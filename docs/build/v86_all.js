'use strict';var p;Object.freeze(["shared","exclusive","unlock"]);
function ca(a,b,c){this.h=a;this.v=c;this.C=[104,111,115,116,57,112];this.F=this.C.length;this.D="9P2000.L";this.j=this.o=8192;this.i=new Uint8Array(2*this.j);this.B=0;this.g=[];this.eb=new da(b,{name:"virtio-9p",Ia:48,Me:4169,Yg:9,Ke:{ad:43008,$a:[{Nc:32,se:0}],eg:[0,32,29,28],Nk:()=>{}},notification:{ad:43264,Vj:!1,Zh:[d=>{if(0===d){for(;ea(this.l);){d=this.l;ea(d);var e=d.s.Ja(d.h+4+2*d.j);e=new fa(d,e);d.j=d.j+1&d.o;d=e;ia(this,d)}d=this.l;e=d.s.Ja(d.h+2)+0&65535;d.s.Fe(d.g+4+8*d.size,e)}}]},
ic:{ad:42752},$f:{ad:42496,wd:[{bytes:2,name:"mount tag length",read:()=>this.F,write:()=>{}}].concat(Array.from(Array(254).keys()).map(d=>({bytes:1,name:"mount tag name "+d,read:()=>this.C[d]||0,write:()=>{}})))}});this.l=this.eb.$a[0]}ca.prototype.Y=function(){var a=[];a[0]=this.C;a[1]=this.F;a[2]=this.eb;a[3]=this.D;a[4]=this.o;a[5]=this.j;a[6]=this.i;a[7]=this.B;a[8]=this.g.map(function(b){return[b.W,b.type,b.uid,b.Yb]});a[9]=this.h;return a};
ca.prototype.G=function(a){this.C=a[0];this.F=a[1];this.eb.G(a[2]);this.l=this.eb.$a[0];this.D=a[3];this.o=a[4];this.j=a[5];this.i=a[6];this.B=a[7];this.g=a[8].map(function(b){return{W:b[0],type:b[1],uid:b[2],Yb:b[3]}});this.h.G(a[9])};function t(a,b,c,d){u(["w","b","h"],[d+7,b+1,c],a.i,0);a.B=d+7}function ja(a,b,c){c=u(["w"],[c],a.i,7);t(a,6,b,c)}
function A(a,b){for(var c=a.i.subarray(0,a.B),d=0,e=c.length;e&&b.Rf!==b.Sf.length;){var f=b.Sf[b.Rf];const k=f.mf+b.He;f=f.Se-b.He;f>e?(f=e,b.He+=e):(b.Rf++,b.He=0);ka(b.s,c.subarray(d,d+f),k);d+=f;e-=f}b.wf+=d;c=a.l;d=c.s.Ja(c.g+2)+c.i&c.o;e=b.wf;c.s.Oc(c.g+4+8*d,b.$h);c.s.Oc(c.g+8+8*d,e);c.i++;a=a.l;0!==a.i&&(b=a.s.Ja(a.g+2)+a.i&65535,a.s.Fe(a.g+2,b),a.i=0,0<(a.eb.h[0]&536870912)?(a.s.Ja(a.h+4+2*a.size),a.eb.Da(1)):~a.s.Ja(a.h)&1&&a.eb.Da(1))}
async function ia(a,b){var c=new Uint8Array(b.vf);la(b,c);var d={offset:0},e=C(["w","b","h"],c,d),f=e[0],k=e[1],g=e[2];switch(k){case 8:f=oa(a.h);var h=pa(a.h);e=[16914839];e[1]=a.o;e[2]=Math.floor(h/e[1]);e[3]=e[2]-Math.floor(f/e[1]);e[4]=e[2]-Math.floor(f/e[1]);e[5]=qa(a.h);e[6]=ra(a.h);e[7]=0;e[8]=256;f=u("wwddddddw".split(""),e,a.i,7);t(a,k,g,f);A(a,b);break;case 112:case 12:e=C(["w","w"],c,d);f=e[0];d=e[1];c=a.g[f].W;var l=H(a.h,c);h=sa(a.h,c,d);ta(a.h,a.g[f].W,function(){var q=[];q[0]=l.ya;
q[1]=this.j-24;u(["Q","w"],q,this.i,7);t(this,k,g,17);A(this,b)}.bind(a));break;case 70:e=C(["w","w","s"],c,d);c=e[0];f=e[1];h=e[2];h=ua(a.h,a.g[c].W,a.g[f].W,h);if(0>h){ja(a,g,-h);A(a,b);break}t(a,k,g,0);A(a,b);break;case 16:e=C(["w","s","s","w"],c,d);f=e[0];h=e[1];var n=e[3];c=va(a.h,h,a.g[f].W,e[2]);l=H(a.h,c);l.uid=a.g[f].uid;l.Ga=n;u(["Q"],[l.ya],a.i,7);t(a,k,g,13);A(a,b);break;case 18:e=C("wswwww".split(""),c,d);f=e[0];h=e[1];d=e[2];c=e[3];var m=e[4];n=e[5];c=wa(a.h,h,a.g[f].W,c,m);l=H(a.h,
c);l.mode=d;l.uid=a.g[f].uid;l.Ga=n;u(["Q"],[l.ya],a.i,7);t(a,k,g,13);A(a,b);break;case 22:e=C(["w"],c,d);f=e[0];l=H(a.h,a.g[f].W);f=u(["s"],[l.Be],a.i,7);t(a,k,g,f);A(a,b);break;case 72:e=C(["w","s","w","w"],c,d);f=e[0];h=e[1];d=e[2];n=e[3];c=xa(a.h,h,a.g[f].W);l=H(a.h,c);l.mode=d|ya;l.uid=a.g[f].uid;l.Ga=n;u(["Q"],[l.ya],a.i,7);t(a,k,g,13);A(a,b);break;case 14:e=C(["w","s","w","w","w"],c,d);f=e[0];h=e[1];c=e[2];d=e[3];n=e[4];a.v.send("9p-create",[h,a.g[f].W]);c=za(a.h,h,a.g[f].W);a.g[f].W=c;a.g[f].type=
1;a.g[f].Yb=h;l=H(a.h,c);l.uid=a.g[f].uid;l.Ga=n;l.mode=d;u(["Q","w"],[l.ya,a.j-24],a.i,7);t(a,k,g,17);A(a,b);break;case 52:e=C("wbwddws".split(""),c,d);f=e[0];c=e[2];h=0===e[4]?Infinity:e[4];e=Aa(e[1],e[3],h,e[5],e[6]);h=Ba(a.h,a.g[f].W,e,c);u(["b"],[h],a.i,7);t(a,k,g,1);A(a,b);break;case 54:e=C("wbddws".split(""),c,d);f=e[0];h=0===e[3]?Infinity:e[3];e=Aa(e[1],e[2],h,e[4],e[5]);h=Ea(a.h,a.g[f].W,e);h||(h=e,h.type=2);f=u(["b","d","d","w","s"],[h.type,h.start,Infinity===h.length?0:h.length,h.h,h.g],
a.i,7);t(a,k,g,f);A(a,b);break;case 24:e=C(["w","d"],c,d);f=e[0];l=H(a.h,a.g[f].W);if(!l||l.status===Fa){ja(a,g,2);A(a,b);break}e[0]|=4096;e[0]=e[1];e[1]=l.ya;e[2]=l.mode;e[3]=l.uid;e[4]=l.Ga;e[5]=l.Ua;e[6]=l.Te<<8|l.Ue;e[7]=l.size;e[8]=a.o;e[9]=Math.floor(l.size/512+1);e[10]=l.Rc;e[11]=0;e[12]=l.oc;e[13]=0;e[14]=l.Id;e[15]=0;e[16]=0;e[17]=0;e[18]=0;e[19]=0;u("dQwwwddddddddddddddd".split(""),e,a.i,7);t(a,k,g,153);A(a,b);break;case 26:e=C("wwwwwddddd".split(""),c,d);f=e[0];l=H(a.h,a.g[f].W);e[1]&1&&
(l.mode=e[2]);e[1]&2&&(l.uid=e[3]);e[1]&4&&(l.Ga=e[4]);e[1]&16&&(l.Rc=Math.floor((new Date).getTime()/1E3));e[1]&32&&(l.oc=Math.floor((new Date).getTime()/1E3));e[1]&64&&(l.Id=Math.floor((new Date).getTime()/1E3));e[1]&128&&(l.Rc=e[6]);e[1]&256&&(l.oc=e[8]);e[1]&8&&await Ga(a.h,a.g[f].W,e[5]);t(a,k,g,0);A(a,b);break;case 50:e=C(["w","d"],c,d);f=e[0];t(a,k,g,0);A(a,b);break;case 40:case 116:e=C(["w","d","w"],c,d);f=e[0];h=e[1];n=e[2];l=H(a.h,a.g[f].W);if(!l||l.status===Fa){ja(a,g,2);A(a,b);break}if(2==
a.g[f].type)for((void 0).length<h+n&&(n=(void 0).length-h),e=0;e<n;e++)a.i[11+e]=(void 0)[h+e];else sa(a.h,a.g[f].W,void 0),e=a.g[f].W,l.size<h+n?n=l.size-h:40==k&&(n=Ha(a.h,e,h+n)-h),h>l.size&&(n=0),a.v.send("9p-read-start",[a.g[f].Yb]),e=await Ia(a.h,e,h,n),a.v.send("9p-read-end",[a.g[f].Yb,n]),e&&a.i.set(e,11);u(["w"],[n],a.i,7);t(a,k,g,4+n);A(a,b);break;case 118:e=C(["w","d","w"],c,d);f=e[0];h=e[1];n=e[2];e=a.g[f].Yb;if(2===a.g[f].type){ja(a,g,95);A(a,b);break}else await Ja(a.h,a.g[f].W,h,n,c.subarray(d.offset));
a.v.send("9p-write-end",[e,n]);u(["w"],[n],a.i,7);t(a,k,g,4);A(a,b);break;case 74:e=C(["w","s","w","s"],c,d);h=await Ka(a.h,a.g[e[0]].W,e[1],a.g[e[2]].W,e[3]);if(0>h){ja(a,g,-h);A(a,b);break}t(a,k,g,0);A(a,b);break;case 76:e=C(["w","s","w"],c,d);d=e[0];h=e[1];c=e[2];f=La(a.h,a.g[d].W,h);if(-1==f){ja(a,g,2);A(a,b);break}h=Ma(a.h,a.g[d].W,h);if(0>h){ja(a,g,-h);A(a,b);break}t(a,k,g,0);A(a,b);break;case 100:f=C(["w","s"],c,d);a.j=f[0];f=u(["w","s"],[a.j,a.D],a.i,7);t(a,k,g,f);A(a,b);break;case 104:e=
C(["w","w","s","s","w"],c,d);f=e[0];a.g[f]={W:0,type:1,uid:e[4],Yb:""};l=H(a.h,a.g[f].W);u(["Q"],[l.ya],a.i,7);t(a,k,g,13);A(a,b);break;case 108:e=C(["h"],c,d);t(a,k,g,0);A(a,b);break;case 110:e=C(["w","w","h"],c,d);f=e[0];n=e[1];m=e[2];if(0==m){a.g[n]={W:a.g[f].W,type:1,uid:a.g[f].uid,Yb:a.g[f].Yb};u(["h"],[0],a.i,7);t(a,k,g,2);A(a,b);break}h=[];for(e=0;e<m;e++)h.push("s");d=C(h,c,d);c=a.g[f].W;h=9;var w=0;for(e=0;e<m;e++){c=La(a.h,c,d[e]);if(-1==c)break;h+=u(["Q"],[H(a.h,c).ya],a.i,h);w++;a.g[n]=
{W:c,type:1,uid:a.g[f].uid,Yb:d[e]}}u(["h"],[w],a.i,7);t(a,k,g,h-7);A(a,b);break;case 120:e=C(["w"],c,d);a.g[e[0]]&&0<=a.g[e[0]].W&&(await Oa(a.h,a.g[e[0]].W),a.g[e[0]].W=-1,a.g[e[0]].type=-1);t(a,k,g,0);A(a,b);break;case 32:e=C(["w","s","d","w"],c,d);f=e[0];h=e[1];c=e[3];a.g[f].type=2;t(a,k,g,0);A(a,b);break;case 30:e=C(["w","w","s"],c,d),f=e[0],h=e[2],ja(a,g,95),A(a,b)}};function Pa(a,b){function c(y){y=y.toString(16);return"#"+Array(7-y.length).join("0")+y}function d(y,D,X,aa){y.style.width="";y.style.height="";aa&&(y.style.transform="");var ma=y.getBoundingClientRect();aa?y.style.transform=(1===D?"":" scaleX("+D+")")+(1===X?"":" scaleY("+X+")"):(0===D%1&&0===X%1?(e.style.imageRendering="crisp-edges",e.style.imageRendering="pixelated",e.style["-ms-interpolation-mode"]="nearest-neighbor"):(e.style.Ik="",e.style["-ms-interpolation-mode"]=""),aa=window.devicePixelRatio||
1,0!==aa%1&&(D/=aa,X/=aa));1!==D&&(y.style.width=ma.width*D+"px");1!==X&&(y.style.height=ma.height*X+"px")}console.assert(a,"1st argument must be a DOM container");var e=a.getElementsByTagName("canvas")[0],f=e.getContext("2d",{alpha:!1}),k=a.getElementsByTagName("div")[0],g=document.createElement("div"),h,l,n,m,w=1,q=1,r=1,x,v,E=!1,G,F,ba,ha=!1,B=this;a=new Uint16Array([199,252,233,226,228,224,229,231,234,235,232,239,238,236,196,197,201,230,198,244,246,242,251,249,255,214,220,162,163,165,8359,402,
225,237,243,250,241,209,170,186,191,8976,172,189,188,161,171,187,9617,9618,9619,9474,9508,9569,9570,9558,9557,9571,9553,9559,9565,9564,9563,9488,9492,9524,9516,9500,9472,9532,9566,9567,9562,9556,9577,9574,9568,9552,9580,9575,9576,9572,9573,9561,9560,9554,9555,9579,9578,9496,9484,9608,9604,9612,9616,9600,945,223,915,960,931,963,181,964,934,920,937,948,8734,966,949,8745,8801,177,8805,8804,8992,8993,247,8776,176,8729,183,8730,8319,178,9632,160]);for(var T=new Uint16Array([32,9786,9787,9829,9830,9827,
9824,8226,9688,9675,9689,9794,9792,9834,9835,9788,9658,9668,8597,8252,182,167,9644,8616,8593,8595,8594,8592,8735,8596,9650,9660]),U=[],I,R=0;256>R;R++)I=127<R?a[R-128]:32>R?T[R]:R,U[R]=String.fromCharCode(I);f.imageSmoothingEnabled=!1;g.style.position="absolute";g.style.backgroundColor="#ccc";g.style.width="7px";g.style.display="inline-block";k.style.display="block";e.style.display="none";this.v=b;b.register("screen-set-mode",function(y){this.Jf(y)},this);b.register("screen-fill-buffer-end",function(y){this.Pf(y)},
this);b.register("screen-put-char",function(y){this.Df(y[0],y[1],y[2],y[3],y[4])},this);b.register("screen-update-cursor",function(y){this.zd(y[0],y[1])},this);b.register("screen-update-cursor-scanline",function(y){this.Ad(y[0],y[1])},this);b.register("screen-clear",function(){this.Xf()},this);b.register("screen-set-size-text",function(y){this.ud(y[0],y[1])},this);b.register("screen-set-size-graphical",function(y){this.td(y[0],y[1],y[2],y[3])},this);this.jb=function(){this.ud(80,25);this.Cb()};this.gi=
function(){try{const y=new Image;y.src=e.toDataURL("image/png");window.open("").document.write(y.outerHTML)}catch(y){}};this.Df=function(y,D,X,aa,ma){y<ba&&D<F&&(D=3*(y*F+D),G[D]=X,G[D+1]=aa,G[D+2]=ma,v[y]=1)};this.Cb=function(){ha||requestAnimationFrame(E?Ca:V)};var V=function(){for(var y=0;y<ba;y++)v[y]&&(B.g(y),v[y]=0);this.Cb()}.bind(this),Ca=function(){this.v.send("screen-fill-buffer");this.Cb()}.bind(this);this.Ba=function(){ha=!0};this.Jf=function(y){(E=y)?(k.style.display="none",e.style.display=
"block"):(k.style.display="block",e.style.display="none")};this.Xf=function(){f.fillStyle="#000";f.fillRect(0,0,e.width,e.height)};this.ud=function(y,D){if(y!==F||D!==ba){v=new Int8Array(D);G=new Int32Array(y*D*3);F=y;for(ba=D;k.childNodes.length>D;)k.removeChild(k.firstChild);for(;k.childNodes.length<D;)k.appendChild(document.createElement("div"));for(y=0;y<D;y++)this.g(y);d(k,w,q,!0)}};this.td=function(y,D,X,aa){e.style.display="block";e.width=y;e.height=D;h=f.createImageData(X,aa);new Uint8Array(h.data.buffer);
l=new Int32Array(h.data.buffer);x=y;r=640>=x?2:1;this.v.send("screen-tell-buffer",[l],[l.buffer]);d(e,w*r,q*r,!1)};this.Kf=function(y,D){w=y;q=D;d(k,w,q,!0);d(e,w*r,q*r,!1)};this.Kf(w,q);this.Ad=function(y,D){y&32?g.style.display="none":(g.style.display="inline",g.style.height=Math.min(15,D-y)+"px",g.style.marginTop=Math.min(15,y)+"px")};this.zd=function(y,D){if(y!==n||D!==m)v[y]=1,v[n]=1,n=y,m=D};this.g=function(y){var D=3*y*F,X;var aa=k.childNodes[y];var ma=document.createElement("div");for(var na=
0;na<F;){var z=document.createElement("span");var O=G[D+1];var P=G[D+2];z.style.backgroundColor=c(O);z.style.color=c(P);for(X="";na<F&&G[D+1]===O&&G[D+2]===P;)if(X+=U[G[D]],na++,D+=3,y===n)if(na===m)break;else if(na===m+1){ma.appendChild(g);break}z.textContent=X;ma.appendChild(z)}aa.parentNode.replaceChild(ma,aa)};this.Pf=function(y){y.forEach(D=>{f.putImageData(h,D.ze-D.Fd,D.Ae-D.Gd,D.Fd,D.Gd,D.ce,D.be)})};this.jb()};(function(){function a(){for(var q=location.search.substr(1).split("&"),r={},x=0;x<q.length;x++){var v=q[x].split("=");r[v[0]]=decodeURIComponent(v.slice(1).join("="))}return r}function b(q){document.title=q+" - Virtual x86";const r=document.querySelector("meta[name=description]");r&&(r.content="Running "+q)}function c(q,r){for(var x="";0<r--;)x+=q;return x}function d(q){return document.getElementById(q)}function e(){function q(B){d("boot_options").style.display="none";b(B.name);v.filesystem=B.filesystem;
B.state&&(d("reset").style.display="none",v.bd=B.state);v.sa=B.sa;v.qa=B.qa;v.V=B.V;v.Rd=B.Rd;v.xc=B.xc;v.Od=B.Od;v.ee=B.ee;v.Wf=B.Wf;v.rc=B.rc;v.fb=B.fb;v.K=B.K;v.na=B.na;v.id=B.id;void 0!==B.Tc&&(v.Tc=B.Tc);if(B.ib){d("description").style.display="block";const T=document.createElement("a");T.href=B.ib;T.textContent=B.name;T.target="_blank";d("description").appendChild(document.createTextNode("Running "));d("description").appendChild(T)}f(v,r)}function r(B){E.c&&setTimeout(function(){Qa(B,E.c+"\n")},
25)}if(window.WebAssembly){var x=document.createElement("script");x.src="build/xterm.js";x.async=!0;document.body.appendChild(x);var v={};d("start_emulation").onclick=function(){d("boot_options").style.display="none";l("custom");var B=d("floppy_image").files[0];if(B){var T=B;v.sa={buffer:B}}if(B=d("cd_image").files[0])T=B,v.qa={buffer:B};if(B=d("hda_image").files[0])T=B,v.V={buffer:B};if(B=d("hdb_image")&&d("hdb_image").files[0])T=B,v.Pe={buffer:B};d("multiboot_image")&&(B=d("multiboot_image").files[0])&&
(T=B,v.Rd={buffer:B});T&&b(T.name);f(v)};x=[{id:"archlinux",name:"Arch Linux",K:536870912,na:8388608,state:{url:m+"arch_state.bin.zst"},filesystem:{baseurl:m+"arch/"}},{id:"haiku",K:536870912,V:{url:m+"haiku.img",async:!0,wa:!n,size:1073741824},state:{url:m+"haiku_state.bin.zst"},name:"Haiku"},{id:"msdos",V:{url:m+"msdos.img",size:8388608,async:!1},Tc:306,name:"MS-DOS"},{id:"freedos",sa:{url:m+"freedos722.img",size:737280,async:!1},name:"FreeDOS"},{id:"oberon",V:{url:m+"oberon.img",size:25165824,
async:!1},name:"Oberon"},{id:"windows1",sa:{url:m+"windows101.img",size:1474560,async:!1},name:"Windows"},{id:"linux26",qa:{url:m+"linux.iso",size:6547456,async:!1},name:"Linux"},{id:"linux3",qa:{url:m+"linux3.iso",size:8624128,async:!1},name:"Linux"},{id:"linux4",qa:{url:m+"linux4.iso",size:7731200,async:!1},name:"Linux",filesystem:{}},{id:"buildroot",xc:{url:m+"buildroot-bzimage.bin",size:5166352,async:!1},name:"Buildroot Linux",filesystem:{},K:134217728,ee:"tsc=reliable mitigations=off random.trust_cpu=on"},
{id:"dsl",K:268435456,qa:{url:m+"dsl-4.11.rc2.iso",size:52824064,async:!1},name:"Damn Small Linux",ib:"http://www.damnsmalllinux.org/"},{id:"minix",name:"Minix",K:268435456,qa:{url:m+"minix-3.3.0.iso",size:605581312,async:!0,wa:!n}},{id:"kolibrios",sa:{url:n?m+"kolibri.img":"//builds.kolibrios.org/eng/data/data/kolibri.img",size:1474560,async:!1},name:"KolibriOS",ib:"https://kolibrios.org/en/"},{id:"kolibrios-fallback",sa:{url:m+"kolibri.img",size:1474560,async:!1},name:"KolibriOS"},{id:"openbsd",
V:{url:m+"openbsd.img",async:!0,wa:!n,size:1073741824},state:{url:m+"openbsd_state.bin.zst"},K:268435456,name:"OpenBSD"},{id:"openbsd-boot",V:{url:m+"openbsd.img",async:!0,wa:!n,size:1073741824},K:268435456,name:"OpenBSD"},{id:"solos",sa:{url:m+"os8.img",async:!1,size:1474560},name:"Sol OS",ib:"http://oby.ro/os/"},{id:"bootchess",sa:{url:m+"bootchess.img",async:!1,size:1474560},name:"BootChess",ib:"http://www.pouet.net/prod.php?which=64962"},{id:"bootbasic",sa:{url:m+"bootbasic.img",async:!1,size:1474560},
name:"bootBASIC",ib:"https://github.com/nanochess/bootBASIC"},{id:"windows2000",K:536870912,V:{url:m+"windows2k.img",size:2147483648,async:!0,wa:!n},name:"Windows 2000",state:{url:m+"windows2k_state.bin.zst"},rc:!0},{id:"windows2000-boot",K:536870912,V:{url:m+"windows2k.img",size:2147483648,async:!0,wa:!n},Tc:306,name:"Windows 2000"},{id:"windows98",K:134217728,V:{url:m+"windows98.img",async:!0,wa:!n,size:314572800},name:"Windows 98",state:{url:m+"windows98_state.bin.zst"},rc:!0},{id:"windows98-boot",
K:134217728,V:{url:m+"windows98.img",async:!0,wa:!n,size:314572800},name:"Windows 98"},{id:"windows95",K:33554432,V:{url:m+"w95.img",size:242049024,async:!0,wa:!n},name:"Windows 95",state:{url:m+"windows95_state.bin.zst"}},{id:"windows95-boot",K:33554432,V:{url:m+"w95.img",size:242049024,async:!0,wa:!n},name:"Windows 95"},{id:"windows30",K:67108864,qa:{url:m+"Win30.iso",async:!1},name:"Windows 3.0"},{id:"windows31",K:67108864,V:{url:m+"win31.img",async:!1,size:34463744},name:"Windows 3.1"},{id:"freebsd",
K:268435456,V:{url:m+"freebsd.img",size:2147483648,async:!0,wa:!n},state:{url:m+"freebsd_state.bin.zst"},name:"FreeBSD"},{id:"freebsd-boot",K:268435456,V:{url:m+"freebsd.img",size:2147483648,async:!0,wa:!n},name:"FreeBSD"},{id:"reactos-livecd",K:268435456,V:{url:m+"reactos-livecd-0.4.15-dev-73-g03c09c9-x86-gcc-lin-dbg.iso",size:250609664,async:!0,wa:!n},name:"ReactOS",ib:"https://reactos.org/"},{id:"reactos",K:536870912,V:{url:m+"reactos.img",size:524288E3,async:!0,wa:!n},state:{url:m+"reactos_state.bin.zst"},
rc:!0,name:"ReactOS",ib:"https://reactos.org/"},{id:"reactos-boot",K:536870912,V:{url:m+"reactos.img",size:524288E3,async:!0,wa:!n},name:"ReactOS",ib:"https://reactos.org/"},{id:"skift",K:134217728,qa:{url:m+"skift-20200910.iso",size:64452608,async:!1},name:"Skift",ib:"https://skiftos.org/"},{id:"snowdrop",K:134217728,sa:{url:m+"snowdrop.img",size:1474560,async:!1},name:"Snowdrop",ib:"http://www.sebastianmihai.com/snowdrop/"},{id:"openwrt",K:134217728,V:{url:m+"openwrt-18.06.1-x86-legacy-combined-squashfs.img",
size:19846474,async:!1},name:"OpenWrt"},{id:"qnx",K:134217728,sa:{url:m+"qnx-demo-network-4.05.img",size:1474560,async:!1},name:"QNX 4.05"},{id:"9front",K:134217728,V:{url:m+"9front-7781.38dcaeaa222c.386.iso",size:496388096,async:!0,wa:!n},state:{url:m+"9front_state.bin.zst"},fb:!0,name:"9front"},{id:"9front-boot",K:134217728,V:{url:m+"9front-7781.38dcaeaa222c.386.iso",size:496388096,async:!0,wa:!n},fb:!0,name:"9front"},{id:"mobius",K:67108864,sa:{url:m+"mobius-fd-release5.img",size:1474560,async:!1},
name:"Mobius"},{id:"android",K:536870912,qa:{url:m+"android-x86-1.6-r2.iso",size:54661120,async:!0,wa:!n},name:"Android"},{id:"tinycore",K:268435456,V:{url:m+"TinyCore-11.0.iso",async:!1},name:"Tinycore",ib:"http://www.tinycorelinux.net/"}];var E=a(),G=E.profile;if(!G){var F=document.createElement("link");F.rel="prefetch";F.href="build/v86.wasm";document.head.appendChild(F)}E.use_bochs_bios&&(v.Zj=!0);for(F=0;F<x.length;F++){var ba=x[F];if(G===ba.id){q(ba);return}var ha=d("start_"+ba.id);ha&&(ha.onclick=
function(B,T,U){U.preventDefault();l(B.id);T.blur();q(B)}.bind(this,ba,ha))}"custom"===G&&(E["hda.url"]&&(v.V={size:parseInt(E["hda.size"],10)||void 0,url:E["hda.url"],async:!0}),E["cdrom.url"]&&(v.qa={size:parseInt(E["cdrom.size"],10)||void 0,url:E["cdrom.url"],async:!0}),E["fda.url"]&&(v.sa={size:parseInt(E["fda.size"],10)||void 0,url:E["fda.url"],async:!1}),v.sa||v.qa||v.V)&&(d("boot_options").style.display="none",f(v,r))}else alert("Your browser is not supported because it doesn't support WebAssembly")}
function f(q,r){var x=q.K;x||(x=1048576*parseInt(d("memory_size").value,10),x||(alert("Invalid memory size - reset to 128MB"),x=134217728));var v=q.na;v||(v=1048576*parseInt(d("video_memory_size").value,10),v||(alert("Invalid video memory size - reset to 8MB"),v=8388608));if(!q.sa){var E=d("floppy_image").files[0];E&&(q.sa={buffer:E})}E=d("networking_proxy").value;const G=d("disable_audio").checked,F=void 0===q.fb?d("enable_acpi").checked:q.fb;if(q.Zj)var ba="bochs-bios.bin",ha="bochs-vgabios.bin";
else ba="seabios.bin",ha="vgabios.bin";if(!q.bd){var B={url:"bios/"+ba};var T={url:"bios/"+ha}}var U=new Ra({memory_size:x,vga_memory_size:v,screen_container:d("screen_container"),serial_container_xtermjs:d("terminal"),boot_order:q.Tc||parseInt(d("boot_order").value,16)||0,network_relay_url:n?"ws://localhost:8080/":E,bios:B,vga_bios:T,fda:q.sa,hda:q.V,hdb:q.Pe,cdrom:q.qa,multiboot:q.Rd,bzimage:q.xc,initrd:q.Od,cmdline:q.ee,bzimage_initrd_from_filesystem:q.Wf,acpi:F,initial_state:q.bd,filesystem:q.filesystem||
{},disable_speaker:G,preserve_mac_from_state_image:q.rc,autostart:!0});Sa(U,"emulator-ready",function(){if(U.g.s.xa.exports.profiler_is_enabled()){var I=document.createElement("pre");document.body.appendChild(I);setInterval(function(){if(U.fe){var R=Ta.Wj(U.g.s);I.textContent=R}},1E3)}"dsl"===q.id?setTimeout(()=>{Qa(U,"\n")},3E3):"android"==q.id&&setTimeout(()=>{Ua(U,[57424,57552]);Qa(U,"\n")},3E3);k(q,U);r&&r(U)});Sa(U,"download-progress",function(I){var R=d("loading");R.style.display="block";if(I.ne.endsWith(".wasm")){var V=
I.ne.split("/");R.textContent="Fetching "+V[V.length-1]+" ..."}else if(I.me===I.le-1&&I.loaded>=I.total-2048)R.textContent="Done downloading. Starting now ...";else{V="Downloading images ";"number"===typeof I.me&&I.le&&(V+="["+(I.me+1)+"/"+I.le+"] ");if(I.total&&"number"===typeof I.loaded){I=Math.floor(I.loaded/I.total*100);I=Math.min(100,Math.max(0,I));var Ca=Math.floor(I/2);V=V+(I+"% [")+c("#",Ca);V+=c(" ",50-Ca)+"]"}else V+=c(".",w++%50);R.textContent=V}});Sa(U,"download-error",function(I){var R=
d("loading");R.style.display="block";R.textContent="Loading "+I.ne+" failed. Check your connection and reload the page to try again."})}function k(q,r){function x(){var z=Date.now(),O=r.g?r.g.s.ng[0]>>>0:0;O<ha&&(ha-=4294967296);var P=O-ha;ha=O;U+=P;O=z-F;ba+=O;F=z;d("speed").textContent=(P/1E3/O).toFixed(1);d("avg_speed").textContent=(U/1E3/ba).toFixed(1);z=d("running_time");P=ba/1E3|0;z.textContent=60>P?P+"s":3600>P?(P/60|0)+"m "+Va(P%60,2)+"s":(P/3600|0)+"h "+Va((P/60|0)%60,2)+"m "+Va(P%60,2)+
"s"}function v(z,O){var P=d("get_"+O+"_image");!z||104857600<z.size?P.style.display="none":P.onclick=function(){var Da=r.Zb[O];let Na=q.id+("cdrom"===O?".iso":".img");Da.lg?(Da=Da.lg(Na),Wa(Da,Na)):Da.Qb(function(hd){hd?Xa(hd,Na):alert("The file could not be loaded. Maybe it's too big?")});P.blur()}}function E(z){z.ctrlKey?window.onbeforeunload=function(){window.onbeforeunload=null;return"CTRL-W cannot be sent to the emulator."}:window.onbeforeunload=null}d("boot_options").style.display="none";d("loading").style.display=
"none";d("runtime_options").style.display="block";d("runtime_infos").style.display="block";d("screen_container").style.display="block";q.filesystem&&g(r);d("run").onclick=function(){r.fe?(d("run").value="Run",r.stop()):(d("run").value="Pause",r.ef());d("run").blur()};d("exit").onclick=function(){r.stop();location.href=location.pathname};d("lock_mouse").onclick=function(){if(!G)d("toggle_mouse").onclick();Ya();d("lock_mouse").blur()};var G=!0;d("toggle_mouse").onclick=function(){G=!G;r.i&&(r.i.Ne=
G);d("toggle_mouse").value=(G?"Dis":"En")+"able mouse";d("toggle_mouse").blur()};var F=0,ba=0,ha=0,B=null,T=!1,U=0;Sa(r,"emulator-started",function(){F=Date.now();B=setInterval(x,1E3)});Sa(r,"emulator-stopped",function(){x();null!==B&&clearInterval(B)});var I=0,R=0,V=[];Sa(r,"9p-read-start",function(z){z=z[0];V.push(z);d("info_filesystem").style.display="block";d("info_filesystem_status").textContent="Loading ...";d("info_filesystem_last_file").textContent=z});Sa(r,"9p-read-end",function(z){I+=z[1];
d("info_filesystem_bytes_read").textContent=I;const O=z[0];V=V.filter(P=>P!==O);V[0]?d("info_filesystem_last_file").textContent=V[0]:d("info_filesystem_status").textContent="Idle"});Sa(r,"9p-write-end",function(z){R+=z[1];d("info_filesystem_bytes_written").textContent=R;V[0]||(d("info_filesystem_last_file").textContent=z[0])});var Ca=0,y=0,D=0,X=0;Sa(r,"ide-read-start",function(){d("info_storage").style.display="block";d("info_storage_status").textContent="Loading ..."});Sa(r,"ide-read-end",function(z){Ca+=
z[1];y+=z[2];d("info_storage_status").textContent="Idle";d("info_storage_bytes_read").textContent=Ca;d("info_storage_sectors_read").textContent=y});Sa(r,"ide-write-end",function(z){D+=z[1];X+=z[2];d("info_storage_bytes_written").textContent=D;d("info_storage_sectors_written").textContent=X});var aa=0,ma=0;Sa(r,"eth-receive-end",function(z){ma+=z[0];d("info_network").style.display="block";d("info_network_bytes_received").textContent=ma});Sa(r,"eth-transmit-end",function(z){aa+=z[0];d("info_network").style.display=
"block";d("info_network_bytes_transmitted").textContent=aa});Sa(r,"mouse-enable",function(z){T=z;d("info_mouse_enabled").textContent=z?"Yes":"No"});Sa(r,"screen-set-mode",function(z){z?d("info_vga_mode").textContent="Graphical":(d("info_vga_mode").textContent="Text",d("info_res").textContent="-",d("info_bpp").textContent="-")});Sa(r,"screen-set-size-graphical",function(z){d("info_res").textContent=z[0]+"x"+z[1];d("info_bpp").textContent=z[4]});d("reset").onclick=function(){r.Gf();d("reset").blur()};
v(q.V,"hda");v(q.Pe,"hdb");v(q.sa,"fda");v(q.dg,"fdb");v(q.qa,"cdrom");d("memory_dump").onclick=function(){const z=r.g.s.Qa;Xa(new Uint8Array(z.buffer,z.byteOffset,z.length),"v86memory.bin");d("memory_dump").blur()};d("save_state").onclick=function(){r.ye(function(z,O){z?(console.log(z.stack),console.log("Couldn't save state: ",z)):Xa(O,"v86state.bin")});d("save_state").blur()};d("load_state").onclick=function(){d("load_state_input").click();d("load_state").blur()};d("load_state_input").onchange=
function(){var z=this.files[0];if(z){var O=r.fe;O&&r.stop();var P=new FileReader;P.onload=function(Da){try{r.Wd(Da.target.result)}catch(Na){throw alert("Something bad happened while restoring the state:\n"+Na+"\n\nNote that the current configuration must be the same as the original"),Na;}O&&r.ef()};P.readAsArrayBuffer(z);this.value=""}};d("ctrlaltdel").onclick=function(){Ua(r,[29,56,83,157,184,211]);d("ctrlaltdel").blur()};d("alttab").onclick=function(){Ua(r,[56,15]);setTimeout(function(){Ua(r,[184,
143])},100);d("alttab").blur()};d("scale").onchange=function(){var z=parseFloat(this.value);(z||0<z)&&r.h&&r.h.Kf(z,z)};d("fullscreen").onclick=function(){if(r.h){var z=document.getElementById("screen_container");if(z){var O=z.requestFullScreen||z.webkitRequestFullscreen||z.mozRequestFullScreen||z.msRequestFullScreen;O&&(O.call(z),(z=document.getElementsByClassName("phone_keyboard")[0])&&z.focus());Ya()}}};d("screen_container").onclick=function(){if(G&&T)Ya(),d("lock_mouse").blur();else if(window.getSelection().isCollapsed){let z=
document.getElementsByClassName("phone_keyboard")[0];z.style.top=document.body.scrollTop+100+"px";z.style.left=document.body.scrollLeft+100+"px";z.focus()}};const na=document.getElementsByClassName("phone_keyboard")[0];na.setAttribute("autocorrect","off");na.setAttribute("autocapitalize","off");na.setAttribute("spellcheck","false");na.tabIndex=0;d("screen_container").addEventListener("mousedown",z=>{z.preventDefault();na.focus()},!1);d("take_screenshot").onclick=function(){r.h&&r.h.gi();d("take_screenshot").blur()};
window.addEventListener("keydown",E,!1);window.addEventListener("keyup",E,!1);window.addEventListener("blur",E,!1)}function g(q){d("filesystem_panel").style.display="block";d("filesystem_send_file").onchange=function(){Array.prototype.forEach.call(this.files,function(r){var x=new Za(r);x.onload=function(){x.Qb(function(v){$a(q,"/"+r.name,new Uint8Array(v))})};x.load()},this);this.value="";this.blur()};d("filesystem_get_file").onkeypress=function(r){13===r.which&&(this.disabled=!0,q.xe(this.value,
function(x,v){this.disabled=!1;v?(x=this.value.replace(/\/$/,"").split("/"),x=x[x.length-1]||"root",Xa(v,x),this.value=""):alert("Can't read file")}.bind(this)))}}function h(){location.reload()}function l(q){window.history.pushState&&window.history.pushState({profile:q},"","?profile="+q)}var n=!location.hostname.endsWith("copy.sh"),m=n?"images/":"//k.copy.sh/",w=0;window.addEventListener("load",e,!1);window.addEventListener("load",function(){setTimeout(function(){window.addEventListener("popstate",
h)},0)});"complete"===document.readyState&&e()})();function ab(a){this.ports=[];this.s=a;for(var b=0;65536>b;b++)this.ports[b]=bb(this);var c=a.K[0];for(b=0;b<<17<c;b++)a.U[b]=a.Z[b]=void 0,a.fc[b]=a.X[b]=void 0;cb(this,c,4294967296-c,function(){return 255},function(){},function(){return-1},function(){})}function bb(a){return{ab:a.Ph,Ja:a.Nh,we:a.Oh,Ge:a.nf,Fe:a.nf,Oc:a.nf,ka:void 0}}p=ab.prototype;p.Ph=function(){return 255};p.Nh=function(){return 65535};p.Oh=function(){return-1};p.nf=function(){};
function J(a,b,c,d,e,f){d&&(a.ports[b].ab=d);e&&(a.ports[b].Ja=e);f&&(a.ports[b].we=f);a.ports[b].ka=c}function K(a,b,c,d,e,f){d&&(a.ports[b].Ge=d);e&&(a.ports[b].Fe=e);f&&(a.ports[b].Oc=f);a.ports[b].ka=c}
p.sd=function(a,b,c,d,e,f){function k(){return c.call(this)|d.call(this)<<8}function g(){return e.call(this)|f.call(this)<<8}function h(){return c.call(this)|d.call(this)<<8|e.call(this)<<16|f.call(this)<<24}e&&f?(J(this,a,b,c,k,h),J(this,a+1,b,d),J(this,a+2,b,e,g),J(this,a+3,b,f)):(J(this,a,b,c,k),J(this,a+1,b,d))};
p.Vb=function(a,b,c,d,e,f){function k(l){c.call(this,l&255);d.call(this,l>>8&255)}function g(l){e.call(this,l&255);f.call(this,l>>8&255)}function h(l){c.call(this,l&255);d.call(this,l>>8&255);e.call(this,l>>16&255);f.call(this,l>>>24)}e&&f?(K(this,a,b,c,k,h),K(this,a+1,b,d),K(this,a+2,b,e,g),K(this,a+3,b,f)):(K(this,a,b,c,k),K(this,a+1,b,d))};p.ii=function(a){var b=this.s.U[a>>>17];return b(a)|b(a+1)<<8|b(a+2)<<16|b(a+3)<<24};
p.ji=function(a,b){var c=this.s.Z[a>>>17];c(a,b&255);c(a+1,b>>8&255);c(a+2,b>>16&255);c(a+3,b>>>24)};function cb(a,b,c,d,e,f,k){f||(f=a.ii.bind(a));k||(k=a.ji.bind(a));for(b>>>=17;0<c;b++)a.s.U[b]=d,a.s.Z[b]=e,a.s.fc[b]=f,a.s.X[b]=k,c-=131072};function db(a,b){this.h=this.g=!1;this.s=new eb(a,b);this.v=a;a.register("cpu-init",this.jb,this);a.register("cpu-run",this.ef,this);a.register("cpu-stop",this.stop,this);a.register("cpu-restart",this.Gf,this);this.Pj()}p=db.prototype;p.ef=function(){this.h=!1;this.g||(this.v.send("emulator-started"),this.pf())};
function fb(a){if(a.h)a.h=a.g=!1,a.v.send("emulator-stopped");else{a.g=!0;a:{var b=a.s;if(b.F[0]){var c=gb(b);if(b.F[0]){b=c;break a}}for(var d=c=hb();1>d-c;){ib(b,d);jb(b);b.dh();if(b.F[0])break;d=hb()}b=0}0>=b?a.pf():a.$j(b)}}p.stop=function(){this.g&&(this.h=!0)};p.Ba=function(){this.Yj()};p.Gf=function(){this.s.reset();kb(this.s)};p.jb=function(a){this.s.jb(a,this.v);this.v.send("emulator-ready")};
if("undefined"!==typeof setImmediate)var lb=function(){setImmediate(()=>{fb(this)})},mb=function(){},nb=function(){};else if("undefined"!==typeof window&&"undefined"!==typeof postMessage){lb=function(){window.postMessage(43605,"*")};let a;mb=function(){a=b=>{b.source===window&&43605===b.data&&fb(this)};window.addEventListener("message",a,!1)};nb=function(){window.removeEventListener("message",a);a=null}}else lb=function(){setTimeout(()=>{fb(this)},0)},mb=function(){},nb=function(){};p=db.prototype;
p.pf=lb;p.Pj=mb;p.Yj=nb;p.$j="undefined"!==typeof document&&"boolean"===typeof document.hidden?function(a){4>a||document.hidden?this.pf():setTimeout(()=>{fb(this)},a)}:function(a){setTimeout(()=>{fb(this)},a)};p.ye=function(){return this.s.ye()};p.Wd=function(a){return this.s.Wd(a)};
if("object"===typeof performance&&performance.now)var hb=performance.now.bind(performance);else if("function"===typeof require){const {performance:a}=require("perf_hooks");hb=a.now.bind(a)}else"object"===typeof process&&process.hrtime?hb=function(){var a=process.hrtime();return 1E3*a[0]+a[1]/1E6}:hb=Date.now;var Za,ob,pb,qb,rb,sb,tb,ub;function vb(a,b){return(a||0===a?a+"":"").padEnd(b," ")}function Va(a,b){return(a||0===a?a+"":"").padStart(b,"0")}function L(a,b,c,d){return new Proxy({},{get:function(e,f){e=new a(b.buffer,c,d);f=e[f];return"function"===typeof f?f.bind(e):f},set:function(e,f,k){(new a(b.buffer,c,d))[f]=k;return!0}})}function wb(a,b){return"0x"+Va((a?a.toString(16):"").toUpperCase(),b||1)}
if("undefined"!==typeof crypto&&crypto.getRandomValues){let a=new Int32Array(1);var xb=function(){crypto.getRandomValues(a);return a[0]}}else if("undefined"!==typeof require){const a=require("crypto");xb=function(){return a.Rk(4).readInt32LE(0)}}function yb(a){this.buffer=a;this.byteLength=a.byteLength;this.onload=void 0}p=yb.prototype;p.load=function(){this.onload&&this.onload({buffer:this.buffer})};p.get=function(a,b,c){c(new Uint8Array(this.buffer,a,b))};
p.set=function(a,b,c){(new Uint8Array(this.buffer,a,b.byteLength)).set(b);c()};p.Qb=function(a){a(this.buffer)};p.Y=function(){const a=[];a[0]=this.byteLength;a[1]=new Uint8Array(this.buffer);return a};p.G=function(a){this.byteLength=a[0];this.buffer=a[1].slice().buffer};
(function(){if("function"===typeof Math.clz32)ob=function(d){return 31-Math.clz32(d)},pb=function(d){return 31-Math.clz32(d)};else{for(var a=new Int8Array(256),b=0,c=-2;256>b;b++)b&b-1||c++,a[b]=c;ob=function(d){return a[d]};pb=function(d){d>>>=0;var e=d>>>16;if(e){var f=e>>>8;return f?24+a[f]:16+a[e]}return(f=d>>>8)?8+a[f]:a[d]}}})();
function zb(a){var b=new Uint8Array(a),c,d;this.length=0;this.push=function(e){this.length!==a&&this.length++;b[d]=e;d=d+1&a-1};this.shift=function(){if(this.length){var e=b[c];c=c+1&a-1;this.length--;return e}return-1};this.clear=function(){this.length=d=c=0};this.clear()}function Ab(){this.size=65536;this.data=new Float32Array(65536);this.length=this.g=this.start=0}
Ab.prototype.push=function(a){this.length===this.size?this.start=this.start+1&this.size-1:this.length++;this.data[this.g]=a;this.g=this.g+1&this.size-1};Ab.prototype.shift=function(){if(this.length){var a=this.data[this.start];this.start=this.start+1&this.size-1;this.length--;return a}};
function Bb(a,b){var c=new Float32Array(b);b>a.length&&(b=a.length);var d=a.start+b,e=a.data.subarray(a.start,d);c.set(e);d>=a.size&&(d-=a.size,c.set(a.data.subarray(0,d),e.length));a.start=d;a.length-=b;return c}Ab.prototype.clear=function(){this.length=this.g=this.start=0};function Xa(a,b){a instanceof Array||(a=[a]);Wa(new Blob(a),b)}
function Wa(a,b){var c=document.createElement("a");c.download=b;c.href=window.URL.createObjectURL(a);c.dataset.downloadurl=["application/octet-stream",c.download,c.href].join(":");document.createEvent?(a=document.createEvent("MouseEvent"),a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(a)):c.click();window.URL.revokeObjectURL(c.href)}
function Cb(a){"number"===typeof a?this.view=new Uint8Array(a+7>>3):a instanceof ArrayBuffer?this.view=new Uint8Array(a):console.assert(!1)}Cb.prototype.set=function(a,b){const c=a>>3;a=1<<(a&7);this.view[c]=b?this.view[c]|a:this.view[c]&~a};Cb.prototype.get=function(a){return this.view[a>>3]>>(a&7)&1};Cb.prototype.Qb=function(){return this.view.buffer};function Db(a,b,c,d,e,f){this.fa=new Eb(this,a,b,d,e,f);this.ga=new Eb(this,a,c,!1,e,f);this.oa=this.fa;this.s=a;0===e?(this.g=496,this.$=14,this.Ia=240):1===e&&(this.g=368,this.$=15,this.Ia=248);this.j=this.g|516;this.h=46080;this.J=[134,128,16,112,5,0,160,2,0,128,1,1,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,this.h&255|1,this.h>>8,0,0,0,0,0,0,0,0,0,0,67,16,212,130,0,0,0,0,0,0,0,0,0,0,0,0,this.$,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.kb=[{size:8},{size:4},void 0,void 0,{size:16}];this.name="ide"+e;this.l=2;J(a.A,this.g|7,this,function(){M(this.s,this.$);return this.Rg()});J(a.A,this.j|2,this,this.Rg);K(a.A,this.j|2,this,this.ek);J(a.A,this.g|0,this,function(){return Fb(this.oa,1)},function(){return Fb(this.oa,2)},function(){return Fb(this.oa,4)});J(a.A,this.g|1,this,function(){return this.oa.error&255});J(a.A,this.g|2,this,function(){return this.oa.ba&
255});J(a.A,this.g|3,this,function(){return this.oa.va&255});J(a.A,this.g|4,this,function(){return this.oa.ja&255});J(a.A,this.g|5,this,function(){return this.oa.la&255});J(a.A,this.g|6,this,function(){return this.oa.yc&255});K(a.A,this.g|0,this,function(k){Gb(this.oa,k,1)},function(k){Gb(this.oa,k,2)},function(k){Gb(this.oa,k,4)});K(a.A,this.g|1,this,function(k){this.fa.fd=(this.fa.fd<<8|k)&65535;this.ga.fd=(this.ga.fd<<8|k)&65535});K(a.A,this.g|2,this,function(k){this.fa.ba=(this.fa.ba<<8|k)&65535;
this.ga.ba=(this.ga.ba<<8|k)&65535});K(a.A,this.g|3,this,function(k){this.fa.va=(this.fa.va<<8|k)&65535;this.ga.va=(this.ga.va<<8|k)&65535});K(a.A,this.g|4,this,function(k){this.fa.ja=(this.fa.ja<<8|k)&65535;this.ga.ja=(this.ga.ja<<8|k)&65535});K(a.A,this.g|5,this,function(k){this.fa.la=(this.fa.la<<8|k)&65535;this.ga.la=(this.ga.la<<8|k)&65535});K(a.A,this.g|6,this,function(k){this.oa=k&16?this.ga:this.fa;this.fa.yc=k;this.ga.yc=k;this.fa.Pd=this.ga.Pd=k>>6&1;this.fa.head=this.ga.head=k&15});this.i=
this.ma=this.rd=0;K(a.A,this.g|7,this,function(k){M(this.s,this.$);var g=this.oa;if(g.buffer)switch(g.o=k,g.error=0,k){case 8:g.i=0;g.g=0;g.h=0;Hb(g);g.P();break;case 16:g.status=80;g.ja=0;g.P();break;case 248:g.status=80;var h=g.j-1;g.va=h&255;g.ja=h>>8&255;g.la=h>>16&255;g.yc=g.yc&240|h>>24&15;g.P();break;case 39:g.status=80;h=g.j-1;g.va=h&255;g.ja=h>>8&255;g.la=h>>16&255;g.va|=h>>24<<8&65280;g.P();break;case 32:case 36:case 41:case 196:Ib(g,k);break;case 48:case 52:case 57:case 197:var l=52===
k||57===k;h=Jb(g,l);l=Kb(g,l);k=48===k||52===k;h*=g.l;l*=g.l;l+h>g.buffer.byteLength?(g.status=255,g.P()):(g.status=88,Lb(g,h),g.g=k?512:Math.min(h,512*g.I),g.X=l);break;case 144:g.P();g.error=257;g.status=80;break;case 145:g.status=80;g.P();break;case 160:g.H&&(g.status=88,Mb(g,12),g.g=12,g.ba=1,g.P());break;case 161:g.H?(Nb(g),g.status=88,g.ja=20,g.la=235):g.status=65;g.P();break;case 198:g.I=g.ba&255;g.status=80;g.P();break;case 37:case 200:h=37===k;l=Jb(g,h);Kb(g,h)*g.l+l*g.l>g.buffer.byteLength?
(g.status=255,g.P()):(g.status=88,g.ka.ma|=1);break;case 53:case 202:h=53===k;l=Jb(g,h);Kb(g,h)*g.l+l*g.l>g.buffer.byteLength?(g.status=255,g.P()):(g.status=88,g.ka.ma|=1);break;case 64:g.status=80;g.P();break;case 218:g.status=65;g.error=4;g.P();break;case 224:g.status=80;g.P();break;case 225:g.status=80;g.P();break;case 231:g.status=80;g.P();break;case 236:if(g.H){g.status=65;g.error=4;g.P();break}Nb(g);g.status=88;g.P();break;case 234:g.status=80;g.P();break;case 239:g.status=80;g.P();break;case 222:g.status=
80;g.P();break;case 245:g.status=80;g.P();break;case 249:g.status=65;g.error=4;break;default:g.status=65,g.error=4}else g.error=4,g.status=65,g.P()});J(a.A,this.h|4,this,void 0,void 0,this.Gh);K(a.A,this.h|4,this,void 0,void 0,this.Kh);J(a.A,this.h,this,this.Ih,void 0,this.Hh);K(a.A,this.h,this,this.ag,void 0,this.Lh);J(a.A,this.h|2,this,this.Jh);K(a.A,this.h|2,this,this.bg);J(a.A,this.h|8,this,function(){return 0});J(a.A,this.h|10,this,function(){return 0});Ob(a.u.Ha,this)}p=Db.prototype;
p.Rg=function(){return this.oa.buffer?this.oa.status:0};p.ek=function(a){a&4&&(M(this.s,this.$),Hb(this.fa),Hb(this.ga));this.l=a};p.Gh=function(){return this.rd};p.Kh=function(a){this.rd=a};p.Jh=function(){return this.ma};p.bg=function(a){this.ma&=~(a&6)};p.Hh=function(){return this.i|this.ma<<16};p.Ih=function(){return this.i};p.Lh=function(a){this.ag(a&255);this.bg(a>>16&255)};
p.ag=function(a){let b=this.i;this.i=a&9;if((b&1)!==(a&1))if(0===(a&1))this.ma&=-2;else switch(this.ma|=1,this.oa.o){case 37:case 200:Pb(this.oa);break;case 202:case 53:Qb(this.oa);break;case 160:Rb(this.oa)}};p.P=function(){0===(this.l&2)&&(this.ma|=4,this.s.Pa(this.$))};p.Y=function(){var a=[];a[0]=this.fa;a[1]=this.ga;a[2]=this.g;a[3]=this.$;a[4]=this.Ia;a[5]=this.j;a[6]=this.h;a[7]=this.name;a[8]=this.l;a[9]=this.rd;a[10]=this.ma;a[11]=this.oa===this.fa;a[12]=this.i;return a};
p.G=function(a){this.fa.G(a[0]);this.ga.G(a[1]);this.g=a[2];this.$=a[3];this.Ia=a[4];this.j=a[5];this.h=a[6];this.name=a[7];this.l=a[8];this.rd=a[9];this.ma=a[10];this.oa=a[11]?this.fa:this.ga;this.i=a[12]};
function Eb(a,b,c,d,e,f){this.ka=a;this.v=f;this.Z=e;this.s=b;this.buffer=c;this.l=d?2048:512;this.H=d;this.F=this.B=this.D=this.j=0;this.buffer&&(this.j=this.buffer.byteLength/this.l,this.j!==(this.j|0)&&(this.j=Math.ceil(this.j)),d?(this.D=1,this.B=0):(this.D=16,this.B=63),this.F=this.j/this.D/this.B,this.F!==(this.F|0)&&(this.F=Math.floor(this.F)),a=b.u.Lc,a.S[57]|=1<<4*this.Z,a.S[18]=a.S[18]&15|240,a.S[27]=this.F&255,a.S[28]=this.F>>8&255,a.S[29]=this.D&255,a.S[30]=255,a.S[31]=255,a.S[32]=200,
a.S[33]=this.F&255,a.S[34]=this.F>>8&255,a.S[35]=this.B&255);this.C={Tg:0,Ug:0,Uf:0,Vf:0,ug:!1};this.buffer=c;this.yc=this.head=this.la=this.ja=this.fd=this.va=this.ba=this.Pd=0;this.status=80;this.I=128;this.i=this.error=0;this.data=new Uint8Array(65536);this.U=new Uint16Array(this.data.buffer);this.M=new Int32Array(this.data.buffer);this.g=this.h=0;this.R=this.o=-1;this.ia=this.X=0;this.N=new Set;this.aa=new Set;Object.seal(this)}
function Hb(a){a.H?(a.status=0,a.ba=1,a.error=1,a.va=1,a.ja=20,a.la=235):(a.status=81,a.ba=1,a.error=1,a.va=1,a.ja=0,a.la=0);for(const b of a.N)a.aa.add(b);a.N.clear()}p=Eb.prototype;p.P=function(){this.ka.P()};p.ie=function(){this.status=80;var a=this.data.subarray(0,this.h);Sb(this,this.o,this.h/512);this.P();this.buffer.set(this.X,a,function(){});Tb(this,this.h)};
function Ub(a,b){var c=(b[7]<<8|b[8])*a.l;b=(b[2]<<24|b[3]<<16|b[4]<<8|b[5])*a.l;a.h=0;var d=a.la<<8&65280|a.ja&255;a.ja=a.la=0;65535===d&&d--;d>c&&(d=c);b>=a.buffer.byteLength?(a.status=255,a.P()):0===c?(a.status=80,a.i=0):(c=Math.min(c,a.buffer.byteLength-b),a.status=208,Vb(a),a.ca(b,c,e=>{Wb(a,e);a.status=88;a.ba=a.ba&-8|2;a.P();d&=-4;a.g=d;a.g>a.h&&(a.g=a.h);a.ja=a.g&255;a.la=a.g>>8&255;Xb(a,c)}))}
function Yb(a,b){var c=(b[7]<<8|b[8])*a.l;b=(b[2]<<24|b[3]<<16|b[4]<<8|b[5])*a.l;b>=a.buffer.byteLength?(a.status=255,a.P()):(a.status=208,Vb(a),a.ca(b,c,d=>{Xb(a,c);a.status=88;a.ba=a.ba&-8|2;Wb(a,d);Rb(a)}))}function Rb(a){if(0!==(a.ka.ma&1)&&0!==(a.status&8)){var b=a.ka.rd,c=0,d=a.data;do{var e=a.s.B(b),f=a.s.Ja(b+4),k=a.s.ab(b+7)&128;f||(f=65536);ka(a.s,d.subarray(c,Math.min(c+f,a.h)),e);c+=f;b+=8;if(c>=a.h&&!k)break}while(!k);a.status=80;a.ka.ma&=-2;a.ba=a.ba&-8|3;a.P()}}
function Fb(a,b){if(a.i<a.g){var c=1===b?a.data[a.i]:2===b?a.U[a.i>>>1]:a.M[a.i>>>2];a.i+=b;a.i>=a.g&&(160===a.o?a.g===a.h?(a.status=80,a.ba=a.ba&-8|3,a.P()):(a.status=88,a.ba=a.ba&-8|2,a.P(),b=a.la<<8&65280|a.ja&255,a.g+b>a.h?(a.ja=a.h-a.g&255,a.la=a.h-a.g>>8&255,a.g=a.h):a.g+=b):(a.error=0,a.i>=a.h?a.status=80:(b=196===a.o||41===a.o?Math.min(a.I,(a.h-a.g)/512):1,Sb(a,a.o,b),a.g+=512*b,a.status=88),a.P()));return c}a.i+=b;return 0}
function Gb(a,b,c){if(!(a.i>=a.g)&&(1===c?a.data[a.i++]=b:2===c?(a.U[a.i>>>1]=b,a.i+=2):(a.M[a.i>>>2]=b,a.i+=4),a.i===a.g))if(160===a.o){a.i=0;a.R=a.data[0];switch(a.R){case 0:Mb(a,0);a.g=a.h;a.status=80;break;case 3:Mb(a,a.data[4]);a.g=a.h;a.status=88;a.data[0]=240;a.data[2]=5;a.data[7]=8;break;case 18:b=a.data[4];a.status=88;a.data.set([5,128,1,49,31,0,0,0,83,79,78,89,32,32,32,32,67,68,45,82,79,77,32,67,68,85,45,49,48,48,48,32,49,46,49,97]);a.g=a.h=Math.min(36,b);break;case 26:Mb(a,a.data[4]);a.g=
a.h;a.status=88;break;case 30:Mb(a,0);a.g=a.h;a.status=80;break;case 37:b=a.j-1;Wb(a,new Uint8Array([b>>24&255,b>>16&255,b>>8&255,b&255,0,0,a.l>>8&255,a.l&255]));a.g=a.h;a.status=88;break;case 40:a.fd&1?Yb(a,a.data):Ub(a,a.data);break;case 66:b=a.data[8];Mb(a,Math.min(8,b));a.g=a.h;a.status=88;break;case 67:b=a.data[8]|a.data[7]<<8;c=a.data[9]>>6;Mb(a,b);a.g=a.h;0===c?(b=a.j,a.data.set(new Uint8Array([0,18,1,1,0,20,1,0,0,0,0,0,0,22,170,0,b>>24,b>>16&255,b>>8&255,b&255]))):1===c&&a.data.set(new Uint8Array([0,
10,1,1,0,0,0,0,0,0,0,0]));a.status=88;break;case 70:b=a.data[8]|a.data[7]<<8;b=Math.min(b,32);Mb(a,b);a.g=a.h;a.data[0]=b-4>>24&255;a.data[1]=b-4>>16&255;a.data[2]=b-4>>8&255;a.data[3]=b-4&255;a.data[6]=8;a.data[10]=3;a.status=88;break;case 81:Mb(a,0);a.g=a.h;a.status=80;break;case 82:a.status=81;a.h=0;a.error=80;break;case 90:b=a.data[8]|a.data[7]<<8;42===a.data[2]&&Mb(a,Math.min(30,b));a.g=a.h;a.status=88;break;case 189:Mb(a,a.data[9]|a.data[8]<<8);a.g=a.h;a.data[5]=1;a.status=88;break;case 74:a.status=
81;a.h=0;a.error=80;break;default:a.status=81,a.h=0,a.error=80}a.ba=a.ba&-8|2;0===(a.status&128)&&a.P();0===(a.status&128)&&0===a.h&&(a.ba|=1,a.status&=-9)}else a.i>=a.h?a.ie():(a.status=88,a.g+=512,a.P())}
function Sb(a,b,c){a.ba-=c;36===b||41===b||52===b||57===b||37===b||53===b?(b=c+Zb(a),a.va=b&255|b>>16&65280,a.ja=b>>8&255,a.la=b>>16&255):a.Pd?(b=c+$b(a),a.va=b&255,a.ja=b>>8&255,a.la=b>>16&255,a.head=a.head&-16|b&15):(b=c+ac(a),c=b/(a.D*a.B)|0,a.ja=c&255,a.la=c>>8&255,a.head=(b/a.B|0)%a.D&15,a.va=b%a.B+1&255,ac(a))}
function Ib(a,b){var c=36===b||41===b,d=Jb(a,c);c=Kb(a,c);var e=32===b||36===b,f=d*a.l;c*=a.l;c+f>a.buffer.byteLength?(a.status=255,a.P()):(a.status=192,Vb(a),a.ca(c,f,k=>{Wb(a,k);a.status=88;a.g=e?512:Math.min(f,512*a.I);Sb(a,b,e?1:Math.min(d,a.B));a.P();Xb(a,f)}))}
function Pb(a){var b=37===a.o,c=Jb(a,b);b=Kb(a,b);var d=c*a.l;b*=a.l;Vb(a);a.ca(b,d,e=>{var f=a.ka.rd,k=0;do{var g=a.s.B(f),h=a.s.Ja(f+4),l=a.s.ab(f+7)&128;h||(h=65536);ka(a.s,e.subarray(k,k+h),g);k+=h;f+=8}while(!l);Sb(a,a.o,c);a.status=80;a.ka.ma&=-2;a.o=-1;a.P();Xb(a,d)})}
function Qb(a){var b=53===a.o,c=Jb(a,b),d=Kb(a,b);b=c*a.l;d*=a.l;var e=a.ka.rd,f=0;const k=new Uint8Array(b);do{var g=a.s.B(e),h=a.s.Ja(e+4),l=a.s.ab(e+7)&128;h||(h=65536);k.set(a.s.Qa.subarray(g,g+h),f);f+=h;e+=8}while(!l);a.buffer.set(d,k,()=>{Sb(a,a.o,c);a.status=80;a.P();a.ka.ma&=-2;a.o=-1});Tb(a,b)}function ac(a){return((a.ja&255|a.la<<8&65280)*a.D+a.head)*a.B+(a.va&255)-1}function $b(a){return a.va&255|a.ja<<8&65280|a.la<<16&16711680|(a.head&15)<<24}
function Zb(a){return(a.va&255|a.ja<<8&65280|a.la<<16&16711680|a.va>>8<<24&4278190080)>>>0}function Kb(a,b){return b?Zb(a):a.Pd?$b(a):ac(a)}function Jb(a,b){b?(a=a.ba,0===a&&(a=65536)):(a=a.ba&255,0===a&&(a=256));return a}
function Nb(a){if(a.yc&16)Mb(a,0);else{for(var b=0;512>b;b++)a.data[b]=0;b=Math.min(16383,a.F);Wb(a,[64,a.H?133:0,b,b>>8,0,0,a.D,a.D>>8,a.B/512,a.B/512>>8,0,2,a.B,a.B>>8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,2,4,0,0,0,0,0,0,0,0,0,56,118,32,54,68,72,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,128,0,1,0,0,2,0,0,0,2,0,2,7,0,b,b>>8,a.D,a.D>>8,a.B,0,a.j&255,a.j>>8&255,a.j>>16&255,a.j>>24&255,0,0,a.j&255,a.j>>8&255,a.j>>16&255,
a.j>>24&255,0,0,160===a.o?0:7,160===a.o?0:4,0,0,30,0,30,0,30,0,30,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,126,0,0,0,0,0,0,116,0,64,0,64,0,116,0,64,0,0,0,0,0,0,0,0,0,0,1,96,0,0,0,0,0,0,0,0,0,0,0,0,a.j&255,a.j>>8&255,a.j>>16&255,a.j>>24&255]);a.h=512;a.g=512}}function Mb(a,b){Lb(a,b);for(var c=0;c<b+3>>2;c++)a.M[c]=0}function Lb(a,b){a.data.length<b&&(a.data=new Uint8Array(b+3&-4),a.U=new Uint16Array(a.data.buffer),a.M=new Int32Array(a.data.buffer));a.h=b;a.i=0}
function Wb(a,b){Lb(a,b.length);a.data.set(b)}function Vb(a){a.C.ug=!0;a.v.send("ide-read-start")}function Xb(a,b){a.C.ug=!1;var c=b/a.l|0;a.C.Tg+=c;a.C.Uf+=b;a.v.send("ide-read-end",[a.Z,b,c])}function Tb(a,b){var c=b/a.l|0;a.C.Ug+=c;a.C.Vf+=b;a.v.send("ide-write-end",[a.Z,b,c])}p.ca=function(a,b,c){const d=this.ia++;this.N.add(d);this.buffer.get(a,b,e=>{this.aa.delete(d)?this.N.has(d):(this.N.delete(d),c(e))})};
p.Y=function(){var a=[];a[0]=this.ba;a[1]=this.F;a[2]=this.la;a[3]=this.ja;a[4]=this.i;a[5]=0;a[6]=0;a[7]=0;a[8]=0;a[9]=this.yc;a[10]=this.error;a[11]=this.head;a[12]=this.D;a[13]=this.H;a[14]=this.Pd;a[15]=this.fd;a[16]=this.data;a[17]=this.h;a[18]=this.va;a[19]=this.j;a[20]=this.l;a[21]=this.I;a[22]=this.B;a[23]=this.status;a[24]=this.X;a[25]=this.o;a[26]=this.g;a[27]=this.R;a[28]=this.buffer;return a};
p.G=function(a){this.ba=a[0];this.F=a[1];this.la=a[2];this.ja=a[3];this.i=a[4];this.yc=a[9];this.error=a[10];this.head=a[11];this.D=a[12];this.H=a[13];this.Pd=a[14];this.fd=a[15];this.data=a[16];this.h=a[17];this.va=a[18];this.j=a[19];this.l=a[20];this.I=a[21];this.B=a[22];this.status=a[23];this.X=a[24];this.o=a[25];this.g=a[26];this.R=a[27];this.U=new Uint16Array(this.data.buffer);this.M=new Int32Array(this.data.buffer);this.buffer&&this.buffer.G(a[28])};function bc(a){this.yb=new Uint8Array(4);this.g=new Uint8Array(4);this.md=new Uint8Array(4);this.nd=new Uint8Array(4);this.ld=new Int32Array(this.yb.buffer);new Int32Array(this.g.buffer);this.yg=new Int32Array(this.md.buffer);this.Ag=new Int32Array(this.nd.buffer);this.Kb=[];this.u=[];this.s=a;for(var b=0;256>b;b++)this.Kb[b]=void 0,this.u[b]=void 0;this.A=a.A;K(a.A,3324,this,function(c){cc(this,this.ld[0],c)},function(c){dc(this,this.ld[0],c)},function(c){var d=this.ld[0],e=d>>8&65535,f=d&255;d=
this.Kb[e];e=this.u[e];if(d)if(16<=f&&40>f)if(e=e.kb[f-16>>2]){f>>=2;var k=d[f]&1;-1===(c|3|e.size-1)?(c=~(e.size-1)|k,0===k&&(d[f]=c)):0===k&&(d[f]=e.wg);1===k&&(ec(this,e,d[f]&65534,c&65534),d[f]=c|1)}else d[f>>2]=0;else 48===f?d[f>>2]=e.zg?-1===(c|2047)?-e.zg|0:e.mi|0:0:4!==f&&(d[f>>>2]=c)});K(a.A,3325,this,function(c){cc(this,this.ld[0]+1|0,c)});K(a.A,3326,this,function(c){cc(this,this.ld[0]+2|0,c)},function(c){dc(this,this.ld[0]+2|0,c)});K(a.A,3327,this,function(c){cc(this,this.ld[0]+3|0,c)});
a.A.sd(3324,this,function(){return this.md[0]},function(){return this.md[1]},function(){return this.md[2]},function(){return this.md[3]});a.A.sd(3320,this,function(){return this.nd[0]},function(){return this.nd[1]},function(){return this.nd[2]},function(){return this.nd[3]});a.A.Vb(3320,this,function(c){this.yb[0]=c&252},function(c){2===(this.yb[1]&6)&&6===(c&6)?(a.reset(),kb(a)):this.yb[1]=c},function(c){this.yb[2]=c},function(c){this.yb[3]=c;c=this.yb[0]&252;var d=this.Kb[this.yb[2]<<8|this.yb[1]];
void 0!==d?(this.Ag[0]=-2147483648,this.yg[0]=c<d.byteLength?d[c>>2]:0):(this.yg[0]=-1,this.Ag[0]=0)});Ob(this,{Ia:0,J:[134,128,55,18,0,0,0,0,2,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0],kb:[],name:"82441FX PMC"});this.i={Ia:8,J:[134,128,0,112,7,0,0,2,0,0,1,6,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],kb:[],
name:"82371SB PIIX3 ISA"};this.j=Ob(this,this.i);this.h=new Uint8Array(this.j.buffer)}bc.prototype.Y=function(){for(var a=[],b=0;256>b;b++)a[b]=this.Kb[b];a[256]=this.yb;a[257]=this.g;a[258]=this.md;a[259]=this.nd;return a};bc.prototype.G=function(a){for(var b=0;256>b;b++){var c=this.u[b],d=a[b];if(c&&d){for(var e=0;e<c.kb.length;e++){var f=d[4+e];if(f&1){var k=c.kb[e];ec(this,k,k.wg&65534,f&65534)}}this.Kb[b].set(d)}}this.yb.set(a[256]);this.g.set(a[257]);this.md.set(a[258]);this.nd.set(a[259])};
function cc(a,b,c){var d=b&255;(new Uint8Array(a.Kb[b>>8&65535].buffer))[d]=c}function dc(a,b,c){var d=b&255;a=new Uint16Array(a.Kb[b>>8&65535].buffer);!a||16<=d&&44>d||(a[d>>>1]=c)}function Ob(a,b){var c=b.Ia,d=new Int32Array(64);d.set(new Int32Array((new Uint8Array(b.J)).buffer));a.Kb[c]=d;a.u[c]=b;c=d.slice(4,10);for(var e=0;e<b.kb.length;e++){var f=b.kb[e];if(f){var k=c[e],g=k&1;f.wg=k;f.entries=[];if(0!==g)for(k&=-2,g=0;g<f.size;g++)f.entries[g]=a.A.ports[k+g]}}return d}
function ec(a,b,c,d){for(var e=b.size,f=a.A.ports,k=0;k<e;k++)f[c+k]=bb(a.A),f[d+k]=b.entries[k]}bc.prototype.Da=function(a){this.s.Pa(this.h[96+((this.Kb[a][15]>>8&255)-1+((a>>3)-1&255)&3)])};function fc(a,b){M(a.s,a.h[96+((a.Kb[b][15]>>8&255)+(b>>3&255)-2&3)])};function gc(a,b){this.A=a.A;this.s=a;this.gb=a.u.gb;this.h=0;this.M=new Uint8Array(10);this.N=0;this.j=null;this.g=new Uint8Array(10);this.C=this.l=this.i=0;this.H=b;this.I=this.D=this.X=this.ia=this.aa=this.Z=0;this.R=1;this.o=0;if(b){this.C=b.byteLength;var c;if((c={160:{type:1,Db:40,Ab:8,xb:1},180:{type:1,Db:40,Ab:9,xb:1},200:{type:1,Db:40,Ab:10,xb:1},320:{type:1,Db:40,Ab:8,xb:2},360:{type:1,Db:40,Ab:9,xb:2},400:{type:1,Db:40,Ab:10,xb:2},720:{type:3,Db:80,Ab:9,xb:2},1200:{type:2,Db:80,Ab:15,xb:2},
1440:{type:4,Db:80,Ab:18,xb:2},1722:{type:5,Db:82,Ab:21,xb:2},2880:{type:5,Db:80,Ab:36,xb:2}}[this.C>>10])&&0===(this.C&1023))a.u.Lc.S[16]=c.type<<4,a=c.Ab,b=c.xb,c=c.Db;else throw"Unknown floppy size: "+wb(b.byteLength);this.B=a;this.F=b;this.U=c}else a.u.Lc.S[16]=64,this.C=this.U=this.F=this.B=0;J(this.A,1008,this,this.sj);J(this.A,1010,this,this.tj);J(this.A,1012,this,this.vj);J(this.A,1013,this,this.wj);J(this.A,1015,this,this.yj);K(this.A,1010,this,this.uj);K(this.A,1013,this,this.xj)}p=gc.prototype;
p.Y=function(){var a=[];a[0]=this.h;a[1]=this.M;a[2]=this.N;a[4]=this.g;a[5]=this.i;a[6]=this.l;a[7]=this.C;a[8]=this.Z;a[9]=this.aa;a[10]=this.ia;a[11]=this.X;a[12]=this.D;a[13]=this.I;a[14]=this.R;a[15]=this.o;a[16]=this.B;a[17]=this.F;a[18]=this.U;return a};
p.G=function(a){this.h=a[0];this.M=a[1];this.N=a[2];this.j=a[3];this.g=a[4];this.i=a[5];this.l=a[6];this.C=a[7];this.Z=a[8];this.aa=a[9];this.ia=a[10];this.X=a[11];this.D=a[12];this.I=a[13];this.R=a[14];this.o=a[15];this.B=a[16];this.F=a[17];this.U=a[18]};p.sj=function(){return 0};p.vj=function(){var a=128;this.i<this.l&&(a|=80);0===(this.o&8)&&(a|=32);return a};p.yj=function(){return 0};p.wj=function(){return this.i<this.l?(M(this.s,6),this.g[this.i++]):255};
p.xj=function(a){if(this.H)if(0<this.h)this.M[this.N++]=a,this.h--,0===this.h&&this.j.call(this,this.M);else{switch(a){case 3:this.j=this.Th;this.h=2;break;case 4:this.j=this.zh;this.h=1;break;case 5:case 197:this.j=function(b){hc(this,!0,b)};this.h=8;break;case 230:this.j=function(b){hc(this,!1,b)};this.h=8;break;case 7:this.j=this.yh;this.h=1;break;case 8:this.i=0;this.l=2;this.g[0]=32;this.g[1]=this.D;break;case 74:this.j=this.Oj;this.h=1;break;case 15:this.h=2;this.j=this.jh;break;case 14:this.g[0]=
128,this.i=0,this.l=1,this.h=0}this.N=0}};p.tj=function(){return this.o};p.uj=function(a){4===(a&4)&&0===(this.o&4)&&this.s.Pa(6);this.o=a};p.zh=function(){this.i=0;this.l=1;this.g[0]=32};p.jh=function(a){this.D=a[1];this.I=a[0]>>2&1;this.Da()};p.yh=function(){this.Da()};function hc(a,b,c){var d=c[2],e=c[1],f=c[3],k=128<<c[4],g=c[5]-c[3]+1,h=((d+a.F*e)*a.B+f-1)*k;a.H&&(b?a.gb.ie(a.H,h,g*k,2,a.done.bind(a,c,e,d,f)):ic(a.gb,a.H,h,a.done.bind(a,c,e,d,f)))}
p.done=function(a,b,c,d,e){e||(d++,d>this.B&&(d=1,c++,c>=this.F&&(c=0,b++)),this.D=b,this.I=c,this.R=d,this.i=0,this.l=7,this.g[0]=c<<2|32,this.g[1]=0,this.g[2]=0,this.g[3]=b,this.g[4]=c,this.g[5]=d,this.g[6]=a[4],this.Da())};p.Th=function(){};p.Oj=function(){this.i=0;this.l=7;this.g[0]=0;this.g[1]=0;this.g[2]=0;this.g[3]=0;this.g[4]=0;this.g[5]=0;this.g[6]=0;this.Da()};p.Da=function(){this.o&8&&this.s.Pa(6)};function ka(a,b,c){b.length&&(a.Re(c),a.Re(c+b.length-1),a.bi(c,c+b.length),a.Qa.set(b,c))};function jc(a){this.s=a;this.o=new Uint8Array(8);this.C=new Uint8Array(8);this.g=new Uint16Array(8);this.j=new Uint16Array(8);this.h=new Uint16Array(8);this.l=new Uint16Array(8);this.Xb=new Uint8Array(8);this.B=new Uint8Array(8);this.kf=[];this.i=0;a=a.A;K(a,0,this,this.Gc.bind(this,0));K(a,2,this,this.Gc.bind(this,1));K(a,4,this,this.Gc.bind(this,2));K(a,6,this,this.Gc.bind(this,3));K(a,1,this,this.Ic.bind(this,0));K(a,3,this,this.Ic.bind(this,1));K(a,5,this,this.Ic.bind(this,2));K(a,7,this,this.Ic.bind(this,
3));J(a,0,this,this.Fc.bind(this,0));J(a,2,this,this.Fc.bind(this,1));J(a,4,this,this.Fc.bind(this,2));J(a,6,this,this.Fc.bind(this,3));J(a,1,this,this.Hc.bind(this,0));J(a,3,this,this.Hc.bind(this,1));J(a,5,this,this.Hc.bind(this,2));J(a,7,this,this.Hc.bind(this,3));K(a,192,this,this.Gc.bind(this,4));K(a,196,this,this.Gc.bind(this,5));K(a,200,this,this.Gc.bind(this,6));K(a,204,this,this.Gc.bind(this,7));K(a,194,this,this.Ic.bind(this,4));K(a,198,this,this.Ic.bind(this,5));K(a,202,this,this.Ic.bind(this,
6));K(a,206,this,this.Ic.bind(this,7));J(a,192,this,this.Fc.bind(this,4));J(a,196,this,this.Fc.bind(this,5));J(a,200,this,this.Fc.bind(this,6));J(a,204,this,this.Fc.bind(this,7));J(a,194,this,this.Hc.bind(this,4));J(a,198,this,this.Hc.bind(this,5));J(a,202,this,this.Hc.bind(this,6));J(a,206,this,this.Hc.bind(this,7));K(a,135,this,this.Kc.bind(this,0));K(a,131,this,this.Kc.bind(this,1));K(a,129,this,this.Kc.bind(this,2));K(a,130,this,this.Kc.bind(this,3));K(a,143,this,this.Kc.bind(this,4));K(a,139,
this,this.Kc.bind(this,5));K(a,137,this,this.Kc.bind(this,6));K(a,138,this,this.Kc.bind(this,7));J(a,135,this,this.Jc.bind(this,0));J(a,131,this,this.Jc.bind(this,1));J(a,129,this,this.Jc.bind(this,2));J(a,130,this,this.Jc.bind(this,3));J(a,143,this,this.Jc.bind(this,4));J(a,139,this,this.Jc.bind(this,5));J(a,137,this,this.Jc.bind(this,6));J(a,138,this,this.Jc.bind(this,7));K(a,1159,this,this.qd.bind(this,0));K(a,1155,this,this.qd.bind(this,1));K(a,1153,this,this.qd.bind(this,2));K(a,1154,this,this.qd.bind(this,
3));K(a,1163,this,this.qd.bind(this,5));K(a,1161,this,this.qd.bind(this,6));K(a,1162,this,this.qd.bind(this,7));J(a,1159,this,this.pd.bind(this,0));J(a,1155,this,this.pd.bind(this,1));J(a,1153,this,this.pd.bind(this,2));J(a,1154,this,this.pd.bind(this,3));J(a,1163,this,this.pd.bind(this,5));J(a,1161,this,this.pd.bind(this,6));J(a,1162,this,this.pd.bind(this,7));K(a,10,this,this.Pg.bind(this,0));K(a,212,this,this.Pg.bind(this,4));K(a,15,this,this.Og.bind(this,0));K(a,222,this,this.Og.bind(this,4));
J(a,15,this,this.Ng.bind(this,0));J(a,222,this,this.Ng.bind(this,4));K(a,11,this,this.Mg.bind(this,0));K(a,214,this,this.Mg.bind(this,4));K(a,12,this,this.Lg);K(a,216,this,this.Lg)}p=jc.prototype;p.Y=function(){return[this.o,this.C,this.g,this.j,this.h,this.l,this.Xb,this.B,this.i]};p.G=function(a){this.o=a[0];this.C=a[1];this.g=a[2];this.j=a[3];this.h=a[4];this.l=a[5];this.Xb=a[6];this.B=a[7];this.i=a[8]};p.Ic=function(a,b){this.h[a]=kc(this,this.h[a],b,!1);this.l[a]=kc(this,this.l[a],b,!0)};
p.Hc=function(a){return lc(this,this.h[a])};p.Gc=function(a,b){this.g[a]=kc(this,this.g[a],b,!1);this.j[a]=kc(this,this.j[a],b,!0)};p.Fc=function(a){return lc(this,this.g[a])};p.qd=function(a,b){this.C[a]=b};p.pd=function(a){return this.C[a]};p.Kc=function(a,b){this.o[a]=b};p.Jc=function(a){return this.o[a]};p.Pg=function(a,b){mc(this,(b&3)+a,b&4?1:0)};p.Og=function(a,b){for(var c=0;4>c;c++)mc(this,a+c,b&1<<c)};
p.Ng=function(a){var b=0|this.Xb[a+0];b|=this.Xb[a+1]<<1;b|=this.Xb[a+2]<<2;return b|=this.Xb[a+3]<<3};p.Mg=function(a,b){this.B[(b&3)+a]=b};p.Lg=function(){this.i=0};function mc(a,b,c){if(a.Xb[b]!==c&&(a.Xb[b]=c,!c))for(c=0;c<a.kf.length;c++)a.kf[c].Oe.call(a.kf[c].Lf,b)}function ic(a,b,c,d){var e=a.h[2]+1,f=nc(a,2);if(c+e>b.byteLength)d(!0);else{var k=a.s;a.g[2]+=e;b.get(c,e,function(g){ka(k,g,f);d(!1)})}}
p.ie=function(a,b,c,d,e){var f=this.h[d]+1&65535,k=5<=d?2:1,g=f*k,h=nc(this,d),l=!1,n=!1,m=this.B[d]&16;c<g?(f=Math.floor(c/k),g=f*k,l=!0):c>g&&(n=!0);b+g>a.byteLength?e(!0):(this.g[d]+=f,this.h[d]-=f,!l&&m&&(this.g[d]=this.j[d],this.h[d]=this.l[d]),a.set(b,this.s.Qa.subarray(h,h+g),()=>{n&&m?this.ie(a,b+g,c-g,d,e):e(!1)}))};function nc(a,b){var c=a.g[b];5<=b&&(c<<=1);c=c&65535|a.o[b]<<16;return c|=a.C[b]<<24}function kc(a,b,c,d){d||(a.i^=1);return a.i?b&-256|c:b&-65281|c<<8}
function lc(a,b){a.i^=1;return a.i?b&255:b>>8&255};function oc(a,b){this.s=a;this.v=b;this.l=new Float64Array(3);this.o=new Uint16Array(3);this.h=new Uint8Array(4);this.j=new Uint8Array(4);this.i=new Uint8Array(4);this.D=new Uint8Array(4);this.C=new Uint8Array(4);this.B=new Uint16Array(3);this.g=new Uint16Array(3);J(a.A,97,this,function(){var c=hb(),d=66.66666666666667*c&1;c=pc(this,2,c);return d<<4|c<<5});K(a.A,97,this,function(c){c&1?this.v.send("pcspeaker-enable"):this.v.send("pcspeaker-disable")});J(a.A,64,this,function(){return qc(this,0)});
J(a.A,65,this,function(){return qc(this,1)});J(a.A,66,this,function(){return qc(this,2)});K(a.A,64,this,function(c){rc(this,0,c)});K(a.A,65,this,function(c){rc(this,1,c)});K(a.A,66,this,function(c){rc(this,2,c)});K(a.A,67,this,this.F)}oc.prototype.Y=function(){var a=[];a[0]=this.h;a[1]=this.j;a[2]=this.i;a[3]=this.D;a[4]=this.C;a[5]=this.B;a[6]=this.g;a[7]=this.l;a[8]=this.o;return a};
oc.prototype.G=function(a){this.h=a[0];this.j=a[1];this.i=a[2];this.D=a[3];this.C=a[4];this.B=a[5];this.g=a[6];this.l=a[7];this.o=a[8]};oc.prototype.Cb=function(a,b){b||(this.j[0]&&pc(this,0,a)?(this.o[0]=sc(this,0,a),this.l[0]=a,M(this.s,0),this.s.Pa(0),0===this.i[0]&&(this.j[0]=0)):M(this.s,0))};function sc(a,b,c){if(!a.j[b])return 0;c=a.o[b]-Math.floor(1193.1816666*(c-a.l[b]));a=a.g[b];c>=a?c%=a:0>c&&(c=c%a+a);return c}
function pc(a,b,c){c-=a.l[b];return 0>c?!0:a.o[b]<Math.floor(1193.1816666*c)}function qc(a,b){var c=a.C[b];if(c)return a.C[b]--,2===c?a.B[b]&255:a.B[b]>>8;c=a.h[b];3===a.i[b]&&(a.h[b]^=1);a=sc(a,b,hb());return c?a&255:a>>8}function rc(a,b,c){a.g[b]=a.h[b]?a.g[b]&-256|c:a.g[b]&255|c<<8;3===a.D[b]&&a.h[b]||(a.g[b]||(a.g[b]=65535),a.o[b]=a.g[b],a.j[b]=!0,a.l[b]=hb());3===a.D[b]&&(a.h[b]^=1);a.v.send("pcspeaker-update",[a.i[2],a.g[2]])}
oc.prototype.F=function(a){var b=a>>1&7,c=a>>6&3;a=a>>4&3;3!==c&&(0===a?(this.C[c]=2,b=sc(this,c,hb()),this.B[c]=b?b-1:0):(6<=b&&(b&=-5),this.h[c]=1===a?0:1,0===c&&M(this.s,0),this.i[c]=b,this.D[c]=a,this.v.send("pcspeaker-update",[this.i[2],this.g[2]])))};var tc=Uint32Array.from([655360,655360,720896,753664]),uc=Uint32Array.from([131072,65536,32768,32768]);
function vc(a,b,c){this.v=b;this.na=c;this.D=0;this.cc=14;this.bc=15;this.H=80;this.sb=25;this.Td=this.Sa=this.lc=this.X=0;this.mc=[];this.nc=this.za=0;this.Xa=new Uint8Array(25);this.o=this.I=this.kc=this.M=this.g=this.i=this.pb=this.qb=this.Ea=0;this.ec=!0;this.Ca=!1;setTimeout(()=>{b.send("screen-set-mode",this.Ca)},0);this.cb=new Int32Array(256);this.B=this.Ra=this.h=0;this.La=!1;this.tc=32;this.Bb=this.Oa=0;this.J=[52,18,17,17,3,1,0,0,2,0,0,3,0,0,0,0,8,14680064,57344,224,0,0,0,0,0,0,191,254,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,26,0,17,0,0,190,254,0,0,0,0,0,0,0,0,0,0,0,0];this.Ia=144;this.kb=[{size:c}];this.zg=65536;this.mi=4272947200;this.name="vga";this.C={pg:!1,Qj:0,Rj:0,Tf:0};this.aa=this.mb=this.Z=this.F=0;this.ge=new Uint8Array(16);this.l=-1;this.tb=32;this.Vc=this.rb=this.Hd=this.Ta=0;this.Fb=-1;this.Eb=15;this.Wa=this.Gb=0;this.ob=-1;this.Na=this.qc=this.jc=0;this.fc=255;this.U=this.R=this.N=this.Ma=this.hc=this.lb=0;this.j=this.Dc=255;c=a.A;K(c,960,this,this.Zi);J(c,960,this,
this.Hg,this.Yi);J(c,961,this,this.Ig);K(c,962,this,this.$i);c.Vb(964,this,this.bj,this.dj);J(c,964,this,this.aj);J(c,965,this,this.cj);c.Vb(974,this,this.mj,this.oj);J(c,974,this,this.lj);J(c,975,this,this.nj);K(c,967,this,this.fj);J(c,967,this,this.ej);K(c,968,this,this.hj);J(c,968,this,this.gj);K(c,969,this,this.jj);J(c,969,this,this.ij);J(c,972,this,this.kj);c.Vb(980,this,this.qj,this.rj);J(c,980,this,this.pj);J(c,981,this,this.Jg,()=>this.Jg());J(c,970,this,function(){return 0});J(c,986,this,
this.Kg);J(c,954,this,this.Kg);this.nb=-1;this.ia=0;K(c,462,this,void 0,this.oi);K(c,463,this,void 0,this.ri);J(c,463,this,void 0,this.pi);void 0===this.na||786432>this.na?this.na=786432:this.na&65535&&(this.na|=65535,this.na++);this.ha=new Uint8Array(this.na);this.Ka=this.na;this.Fa=0;this.Ld=this.na;this.Kd=0;this.Jd=void 0;b.register("screen-tell-buffer",function(e){this.Jd&&e[0]&&e[0].set(this.Jd.subarray(0,e[0].length));this.Jd=e[0]},this);b.register("screen-fill-buffer",function(){if(this.Ca&&
this.Jd)if(this.Fa<this.Ka&&this.Kd<this.Ld)this.v.send("screen-fill-buffer-end",this.mc);else{if(this.La){var e=this.Jd,f=this.Ka,k=this.Fa;switch(this.tc){case 32:var g=f-this.Bb>>2,h=(k-this.Bb>>2)+1,l=f>>2;for(f=g;f<h;f++)k=this.Zg[l++],e[f]=k<<16|k>>16&255|k&65280|4278190080;break;case 24:f-=f%3;k+=3-k%3;g=(f-this.Bb)/3|0;h=((k-this.Bb)/3|0)+1;l=f;for(f=g;l<k;f++){var n=this.ha[l++],m=this.ha[l++],w=this.ha[l++];e[f]=n<<16|m<<8|w|4278190080}break;case 16:g=f-this.Bb>>1;h=(k-this.Bb>>1)+1;l=f>>
1;for(f=g;f<h;f++)k=this.Xj[l++],w=255*(k>>11)/31|0,m=255*(k>>5&63)/63|0,n=255*(k&31)/31|0,e[f]=n<<16|m<<8|w|4278190080;break;case 8:for(g=f-this.Bb,h=k-this.Bb+1,l=f;f<=k;f++)m=this.cb[this.ha[l++]],e[f]=m&65280|m<<16|m>>16|4278190080}e=g/this.Ra|0;this.v.send("screen-fill-buffer-end",[{ze:0,Ae:e,Fd:0,Gd:e,ce:this.Ra,be:(h/this.Ra|0)-e+1}])}else{h=Math.min(this.Kd|15,524287);e=wc(this);g=~this.Ea&3;l=this.qc&96;f=this.Ta&64;for(k=this.Ld&-16;k<=h;){var q=k>>>e;if(g){m=k/this.Sa|0;w=k-this.Sa*m;switch(g){case 1:q=
(m&1)<<13;m>>>=1;break;case 2:q=(m&1)<<14;m>>>=1;break;case 3:q=(m&3)<<13,m>>>=2}q|=(m*this.Sa+w>>>e)+this.za}m=this.$e[q];w=this.af[q];n=this.bf[q];var r=this.cf[q];q=new Uint8Array(8);switch(l){case 0:m<<=0;w<<=1;n<<=2;r<<=3;for(var x=7;0<=x;x--)q[7-x]=m>>x&1|w>>x&2|n>>x&4|r>>x&8;break;case 32:q[0]=m>>6&3|n>>4&12;q[1]=m>>4&3|n>>2&12;q[2]=m>>2&3|n>>0&12;q[3]=m>>0&3|n<<2&12;q[4]=w>>6&3|r>>4&12;q[5]=w>>4&3|r>>2&12;q[6]=w>>2&3|r>>0&12;q[7]=w>>0&3|r<<2&12;break;case 64:case 96:q[0]=m>>4&15,q[1]=m>>0&
15,q[2]=w>>4&15,q[3]=w>>0&15,q[4]=n>>4&15,q[5]=n>>0&15,q[6]=r>>4&15,q[7]=r>>0&15}if(f)for(m=x=0;4>x;x++,k++,m+=2)this.Ze[k]=q[m]<<4|q[m+1];else for(x=0;8>x;x++,k++)this.Ze[k]=q[x]}f=this.Ka;h=Math.min(this.Fa,524287);if(e=this.Jd)if(g=255,l=0,this.Ta&128&&(g&=207,l|=this.Vc<<4&48),this.Ta&64)for(;f<=h;f++)k=this.Ze[f]&g|l,k=this.cb[k],e[f]=k&65280|k<<16|k>>16|4278190080;else for(g&=63,l|=this.Vc<<4&192;f<=h;f++)k=this.ge[this.Ze[f]&this.Hd]&g|l,k=this.cb[k],e[f]=k&65280|k<<16|k>>16|4278190080;this.v.send("screen-fill-buffer-end",
this.mc)}this.Ka=this.na;this.Fa=0;this.Ld=this.na;this.Kd=0}xc(this)},this);this.Xj=new Uint16Array(this.ha.buffer);this.Zg=new Int32Array(this.ha.buffer);this.Ib=new Uint8Array(this.ha.buffer,0,262144);this.$e=new Uint8Array(this.ha.buffer,0,65536);this.af=new Uint8Array(this.ha.buffer,65536,65536);this.bf=new Uint8Array(this.ha.buffer,131072,65536);this.cf=new Uint8Array(this.ha.buffer,196608,65536);this.Ze=new Uint8Array(this.ha.buffer,262144,524288);var d=this;cb(c,655360,131072,function(e){return yc(d,
e)},function(e,f){if(d.La&&d.Ca&&d.ec){var k=e-655360|d.Oa;d.Ka=k<d.Ka?k:d.Ka;d.Fa=k>d.Fa?k:d.Fa;d.ha[k]=f}else{var g=d.Ma>>2&3;e-=tc[g];if(!(0>e||e>=uc[g]))if(d.Ca){var h=f;f=zc(d.fc);var l=Ac(d.lb);g=Ac(d.hc);switch(d.qc&3){case 0:h=(h|h<<8)>>>(d.Na&7)&255;k=zc(h);h=Ac(d.lb);k=Bc(d,(k|g&h)&(~g|h),d.h);k=f&k|~f&d.h;break;case 1:k=d.h;break;case 2:k=Ac(h);k=Bc(d,k,d.h);k=f&k|~f&d.h;break;case 3:h=(h|h<<8)>>>(d.Na&7)&255,f&=zc(h),k=f&l|~f&d.h}f=15;switch(d.Gb&12){case 0:f=5<<(e&1);e&=-2;break;case 8:case 12:f=
1<<(e&3),e&=-4}f&=d.Eb;f&1&&(d.$e[e]=k>>0&255);f&2&&(d.af[e]=k>>8&255);f&4&&(d.bf[e]=k>>16&255);f&8&&(d.cf[e]=k>>24&255);f=Cc(d,e);k=f+7;f<d.Ld&&(d.Ld=f);k>d.Kd&&(d.Kd=k);f<d.Ka&&(d.Ka=f);k>d.Fa&&(d.Fa=k)}else d.Eb&3&&(k=e,g=(k>>1)-d.za,e=g/d.H|0,g%=d.H,k&1?(l=f,h=d.Ib[k&-2]):(h=f,l=d.Ib[k|1]),d.v.send("screen-put-char",[e,g,h,d.cb[l>>4&15],d.cb[l&15]]),d.Ib[k]=f)}});cb(c,3758096384,this.na,function(e){return d.ha[e&268435455]},function(e,f){e&=268435455;d.ha[e]=f;d.Ka=e<d.Ka?e:d.Ka;d.Fa=e>d.Fa?e:
d.Fa},function(e){e&=268435455;return e&3?d.ha[e]|d.ha[e+1]<<8|d.ha[e+2]<<16|d.ha[e+3]<<24:d.Zg[e>>2]},function(e,f){e&=268435455;d.Ka=e<d.Ka?e:d.Ka;d.Fa=e+3>d.Fa?e+3:d.Fa;d.ha[e]=f;d.ha[e+1]=f>>8;d.ha[e+2]=f>>16;d.ha[e+3]=f>>24});Ob(a.u.Ha,this)}p=vc.prototype;
p.Y=function(){var a=[];a[0]=this.na;a[1]=this.D;a[2]=this.cc;a[3]=this.bc;a[4]=this.H;a[5]=this.sb;a[6]=this.mc.map(b=>[b.ze,b.Ae,b.Fd,b.Gd,b.ce,b.be]);a[7]=this.aa;a[8]=this.za;a[9]=this.Ca;a[10]=this.cb;a[11]=this.h;a[12]=this.N;a[13]=this.R;a[14]=this.Ma;a[15]=this.Ra;a[16]=this.B;a[17]=this.Ea;a[18]=this.La;a[19]=this.tc;a[20]=this.Oa;a[21]=this.Bb;a[22]=this.F;a[23]=this.Z;a[24]=this.mb;a[25]=this.ge;a[26]=this.Fb;a[27]=this.Eb;a[28]=this.Gb;a[29]=this.ob;a[30]=this.jc;a[31]=this.qc;a[32]=this.Na;
a[33]=this.fc;a[34]=this.U;a[35]=this.Dc;a[36]=this.j;a[37]=this.nb;a[38]=this.ia;a[39]=this.ha;a[40]=this.ec;a[41]=this.l;a[42]=this.I;a[43]=this.lb;a[44]=this.hc;a[45]=this.nc;a[46]=this.Xa;a[47]=this.qb;a[48]=this.pb;a[49]=this.i;a[50]=this.g;a[51]=this.M;a[52]=this.kc;a[53]=this.I;a[54]=this.tb;a[55]=this.Ta;a[56]=this.Hd;a[57]=this.rb;a[58]=this.Vc;a[59]=this.Wa;a[60]=this.o;return a};
p.G=function(a){this.na=a[0];this.D=a[1];this.cc=a[2];this.bc=a[3];this.H=a[4];this.sb=a[5];this.mc=a[6].map(b=>({ze:b[0],Ae:b[1],Fd:b[2],Gd:b[3],ce:b[4],be:b[5]}));this.aa=a[7];this.za=a[8];this.Ca=a[9];this.cb=a[10];this.h=a[11];this.N=a[12];this.R=a[13];this.Ma=a[14];this.Ra=a[15];this.B=a[16];this.Ea=a[17];this.La=a[18];this.tc=a[19];this.Oa=a[20];this.Bb=a[21];this.F=a[22];this.Z=a[23];this.mb=a[24];this.ge=a[25];this.Fb=a[26];this.Eb=a[27];this.Gb=a[28];this.ob=a[29];this.jc=a[30];this.qc=a[31];
this.Na=a[32];this.fc=a[33];this.U=a[34];this.Dc=a[35];this.j=a[36];this.nb=a[37];this.ia=a[38];this.ha.set(a[39]);this.ec=a[40];this.l=a[41];this.I=a[42];this.lb=a[43];this.hc=a[44];this.nc=a[45];this.Xa.set(a[46]);this.qb=a[47];this.pb=a[48];this.i=a[49];this.g=a[50];this.M=a[51];this.kc=a[52];this.I=a[53];this.tb=a[54];this.Ta=a[55];this.Hd=a[56];this.rb=a[57];this.Vc=a[58];this.Wa=a[59];this.o=a[60];this.v.send("screen-set-mode",this.Ca);this.Ca?(this.lc=this.X=0,this.La?(this.td(this.Ra,this.B,
this.tc,this.Ra,this.B),Dc(this)):(Ec(this),Fc(this))):(this.ud(this.H,this.sb),this.Ad(),this.zd());Gc(this)};
function yc(a,b){if(a.La&&a.ec)return b=b-655360|a.Oa,a.ha[b];var c=a.Ma>>2&3;b-=tc[c];if(0>b||b>=uc[c])return 0;a.h=a.$e[b];a.h|=a.af[b]<<8;a.h|=a.bf[b]<<16;a.h|=a.cf[b]<<24;if(a.qc&8)return c=255,a.R&1&&(c&=a.$e[b]^~(a.N&1?255:0)),a.R&2&&(c&=a.af[b]^~(a.N&2?255:0)),a.R&4&&(c&=a.bf[b]^~(a.N&4?255:0)),a.R&8&&(c&=a.cf[b]^~(a.N&8?255:0)),c;c=a.jc;a.Ca?a.Gb&8?(c=b&3,b&=-4):a.qc&16&&(c=b&1,b&=-2):c=0;return a.Ib[c<<16|b]}function zc(a){return a|a<<8|a<<16|a<<24}
function Ac(a){return(a&1?255:0)|(a&2?255:0)<<8|(a&4?255:0)<<16|(a&8?255:0)<<24}function Bc(a,b,c){switch(a.Na&24){case 8:return b&c;case 16:return b|c;case 24:return b^c}return b}function Hc(a){for(var b=a.za<<1,c,d,e=0;e<a.sb;e++)for(var f=0;f<a.H;f++)c=a.Ib[b],d=a.Ib[b|1],a.v.send("screen-put-char",[e,f,c,a.cb[d>>4&15],a.cb[d&15]]),b+=2}p.zd=function(){var a=(this.D-this.za)/this.H|0,b=(this.D-this.za)%this.H;a=Math.min(this.sb-1,a);this.v.send("screen-update-cursor",[a,b])};
function Gc(a){a.Ca?(a.Ka=0,a.La?a.Fa=a.na:a.Fa=524288):Hc(a)}function Fc(a){a.Ca&&!a.La&&(a.Ld=0,a.Kd=524288,Gc(a))}p.Ba=function(){};function wc(a){var b=128+(~a.M&a.Ea&64);b-=a.M&64;b-=a.Ta&64;return b>>>6}function Cc(a,b){var c=wc(a);if(~a.Ea&3){var d=b-a.za;d&=a.Ea<<13|-24577;d<<=c;var e=d/a.Sa|0;d%=a.Sa;switch(a.Ea&3){case 2:e=e<<1|b>>13&1;break;case 1:e=e<<1|b>>14&1;break;case 0:e=e<<2|b>>13&3}return e*a.Sa+d+(a.za<<c)}return b<<c}
function Ic(a,b){a.U&128&&(b>>>=1);b=Math.ceil(b/(1+(a.U&31)));a.Ea&1||(b<<=1);a.Ea&2||(b<<=1);return b}p.ud=function(a,b){this.H=a;this.sb=b;this.v.send("screen-set-size-text",[a,b])};p.td=function(a,b,c,d,e){this.C.pg&&this.C.Tf===c&&this.X===a&&this.lc===b&&this.Sa===d&&this.Td===e||(this.X=a,this.lc=b,this.Sa=d,this.Td=e,this.C.Tf=c,this.C.pg=!0,this.C.Qj=a,this.C.Rj=b,this.v.send("screen-set-size-graphical",[a,b,d,e,c]))};
function Ec(a){if(!a.La){var b=Math.min(1+a.qb,a.pb),c=Math.min(1+a.i,a.g);if(b&&c)if(a.Ca){b<<=3;var d=a.I<<4;a.Ta&64&&(b>>>=1,d>>>=1);var e=a.I<<2;a.M&64?e<<=1:a.Ea&64&&(e>>>=1);a.td(b,Ic(a,c),8,d,Math.ceil(uc[0]/e));xc(a);Dc(a)}else a.U&128&&(c>>>=1),c=c/(1+(a.U&31))|0,b&&c&&a.ud(b,c)}}
function Dc(a){a.Ca||Hc(a);if(a.La)a.mc=[];else if(a.Sa&&a.X)if(!a.tb||a.Wa&32)a.mc=[],a.v.send("screen-clear");else{var b=a.nc,c=a.rb;a.Ta&64&&(c>>>=1);var d=a.kc>>5&3,e=Cc(a,b+d);b=e/a.Sa|0;var f=e%a.Sa+c;e=Ic(a,1+a.o);e=Math.min(e,a.lc);var k=a.lc-e;a.mc=[];f=-f;for(var g=0;f<a.X;f+=a.Sa,g++)a.mc.push({ze:f,Ae:0,Fd:0,Gd:b+g,ce:a.Sa,be:e});b=0;a.Ta&32||(b=Cc(a,d)+c);f=-b;for(g=0;f<a.X;f+=a.Sa,g++)a.mc.push({ze:f,Ae:e,Fd:0,Gd:g,ce:a.Sa,be:k})}}
function xc(a){a.j|=8;a.nc!==a.za&&(a.nc=a.za,Dc(a))}p.Ad=function(){this.v.send("screen-update-cursor-scanline",[this.cc,this.bc])};
p.Zi=function(a){if(-1===this.l)this.l=a&31,this.tb!==(a&32)&&(this.tb=a&32,Dc(this));else{if(16>this.l)this.ge[this.l]=a,this.Ta&64||Gc(this);else switch(this.l){case 16:if(this.Ta!==a){var b=this.Ta;this.Ta=a;var c=0<(a&1);this.La||this.Ca===c||(this.Ca=c,this.v.send("screen-set-mode",this.Ca));(b^a)&64&&Fc(this);Ec(this);Gc(this)}break;case 18:this.Hd!==a&&(this.Hd=a,Gc(this));break;case 19:this.rb!==a&&(this.rb=a&15,Dc(this));break;case 20:this.Vc!==a&&(this.Vc=a,Gc(this))}this.l=-1}};
p.Hg=function(){return this.l|this.tb};p.Yi=function(){return this.Hg()&255|this.Ig()<<8&65280};p.Ig=function(){if(16>this.l)return this.ge[this.l]&255;switch(this.l){case 16:return this.Ta;case 18:return this.Hd;case 19:return this.rb;case 20:return this.Vc}return 255};p.$i=function(a){this.Dc=a};p.bj=function(a){this.Fb=a};p.aj=function(){return this.Fb};p.dj=function(a){switch(this.Fb){case 1:var b=this.Wa;this.Wa=a;(b^a)&32&&Dc(this);break;case 2:this.Eb=a;break;case 4:this.Gb=a}};
p.cj=function(){switch(this.Fb){case 1:return this.Wa;case 2:return this.Eb;case 4:return this.Gb;case 6:return 18}return 0};p.fj=function(a){this.mb=3*a;this.aa&=0};p.ej=function(){return this.aa};p.hj=function(a){this.Z=3*a;this.aa|=3};p.gj=function(){return this.Z/3|0};p.jj=function(a){var b=this.Z/3|0,c=this.Z%3,d=this.cb[b];a=255*(a&63)/63|0;d=0===c?d&-16711681|a<<16:1===c?d&-65281|a<<8:d&-256|a;this.cb[b]!==d&&(this.cb[b]=d,Gc(this));this.Z++};
p.ij=function(){var a=this.mb%3,b=this.cb[this.mb/3|0];this.mb++;return(b>>8*(2-a)&255)/255*63|0};p.kj=function(){return this.Dc};p.mj=function(a){this.ob=a};p.lj=function(){return this.ob};p.oj=function(a){switch(this.ob){case 0:this.lb=a;break;case 1:this.hc=a;break;case 2:this.N=a;break;case 3:this.Na=a;break;case 4:this.jc=a;break;case 5:var b=this.qc;this.qc=a;(b^a)&96&&Fc(this);break;case 6:this.Ma!==a&&(this.Ma=a,Ec(this));break;case 7:this.R=a;break;case 8:this.fc=a}};
p.nj=function(){switch(this.ob){case 0:return this.lb;case 1:return this.hc;case 2:return this.N;case 3:return this.Na;case 4:return this.jc;case 5:return this.qc;case 6:return this.Ma;case 7:return this.R;case 8:return this.fc}return 0};p.qj=function(a){this.F=a};p.pj=function(){return this.F};
p.rj=function(a){switch(this.F){case 1:this.qb!==a&&(this.qb=a,Ec(this));break;case 2:this.pb!==a&&(this.pb=a,Ec(this));break;case 7:var b=this.i;this.i&=255;this.i=this.i|a<<3&512|a<<7&256;b!=this.i&&Ec(this);this.o=this.o&767|a<<4&256;b=this.g;this.g=this.g&767|a<<5&256;b!==this.g&&Ec(this);Dc(this);break;case 8:this.kc=a;Dc(this);break;case 9:this.U=a;this.o=this.o&511|a<<3&512;b=this.g;this.g=this.g&511|a<<4&512;b!==this.g&&Ec(this);Dc(this);break;case 10:this.cc=a;this.Ad();break;case 11:this.bc=
a;this.Ad();break;case 12:(this.za>>8&255)!==a&&(this.za=this.za&255|a<<8,Dc(this),~this.Ea&3&&Fc(this));break;case 13:(this.za&255)!==a&&(this.za=this.za&65280|a,Dc(this),~this.Ea&3&&Fc(this));break;case 14:this.D=this.D&255|a<<8;this.zd();break;case 15:this.D=this.D&65280|a;this.zd();break;case 18:(this.i&255)!==a&&(this.i=this.i&768|a,Ec(this));break;case 19:this.I!==a&&(this.I=a,Ec(this),~this.Ea&3&&Fc(this));break;case 20:this.M!==a&&(b=this.M,this.M=a,Ec(this),(b^a)&64&&Fc(this));break;case 21:(this.g&
255)!==a&&(this.g=this.g&768|a,Ec(this));break;case 23:this.Ea!==a&&(b=this.Ea,this.Ea=a,Ec(this),(b^a)&67&&Fc(this));break;case 24:this.o=this.o&768|a;Dc(this);break;default:this.F<this.Xa.length&&(this.Xa[this.F]=a)}};
p.Jg=function(){switch(this.F){case 1:return this.qb;case 2:return this.pb;case 7:return this.i>>7&2|this.g>>5&8|this.o>>4&16|this.i>>3&64;case 8:return this.kc;case 9:return this.U;case 10:return this.cc;case 11:return this.bc;case 12:return this.za&255;case 13:return this.za>>8;case 14:return this.D>>8;case 15:return this.D&255;case 18:return this.i&255;case 19:return this.I;case 20:return this.M;case 21:return this.g&255;case 23:return this.Ea;case 24:return this.o&255}return this.F<this.Xa.length?
this.Xa[this.F]:0};p.Kg=function(){var a=this.j;this.Ca?(this.j^=1,this.j&=1):(this.j&1&&(this.j^=8),this.j^=1);this.l=-1;return a};p.oi=function(a){this.nb=a};
p.ri=function(a){switch(this.nb){case 1:this.Ra=a;2560<this.Ra&&(this.Ra=2560);break;case 2:this.B=a;1600<this.B&&(this.B=1600);break;case 3:this.tc=a;break;case 4:this.La=1===(a&1);this.ia=a;break;case 5:this.Oa=a<<16;break;case 9:this.Bb=this.Ra*(15===this.tc?16:this.tc)/8*a,Gc(this)}!this.La||this.Ra&&this.B||(this.La=!1);this.La&&4===this.nb&&(this.td(this.Ra,this.B,this.tc,this.Ra,this.B),this.v.send("screen-set-mode",!0),this.ec=this.Ca=!0);this.La||(this.Oa=0);Dc(this)};
p.pi=function(){return Jc(this,this.nb)};function Jc(a,b){switch(b){case 0:return 45248;case 1:return a.ia&2?2560:a.Ra;case 2:return a.ia&2?1600:a.B;case 3:return a.ia&2?32:a.tc;case 4:return a.ia;case 5:return a.Oa>>>16;case 6:return a.X?a.X:1;case 8:return 0;case 10:return a.na/65536|0}return 255};function Kc(a,b){this.s=a;this.v=b;this.Bd=this.zc=!1;this.oe=!0;this.jd=this.Tb=this.Sb=0;this.R=!0;this.H=this.F=this.C=this.D=this.I=this.B=this.je=!1;this.ea=new zb(1024);this.i=0;this.Mc=100;this.Vd=4;this.l=!1;this.g=new zb(1024);this.o=this.j=!1;this.v.register("keyboard-code",function(c){this.je&&(this.ea.push(c),this.Da())},this);this.v.register("mouse-click",function(c){this.oe&&this.Bd&&(this.jd=c[0]|c[2]<<1|c[1]<<2,this.zc&&Lc(this,0,0))},this);this.v.register("mouse-delta",function(c){var d=
c[1];if(this.oe&&this.Bd){var e=this.Vd*this.Mc/80;this.Sb+=c[0]*e;this.Tb+=d*e;this.zc&&(c=this.Sb|0,d=this.Tb|0,c||d)&&(this.Sb-=c,this.Tb-=d,Lc(this,c,d))}},this);this.v.register("mouse-wheel",function(){},this);this.h=5;this.M=this.N=!1;J(a.A,96,this,this.Fj);J(a.A,100,this,this.Hj);K(a.A,96,this,this.Gj);K(a.A,100,this,this.Ij)}p=Kc.prototype;
p.Y=function(){var a=[];a[0]=this.zc;a[1]=this.Bd;a[2]=this.oe;a[3]=this.Sb;a[4]=this.Tb;a[5]=this.jd;a[6]=this.R;a[7]=this.je;a[8]=this.B;a[9]=this.I;a[10]=this.D;a[11]=this.C;a[12]=this.F;a[13]=this.H;a[15]=this.i;a[16]=this.Mc;a[17]=this.Vd;a[18]=this.l;a[20]=this.h;a[21]=this.N;a[22]=this.M;return a};
p.G=function(a){this.zc=a[0];this.Bd=a[1];this.oe=a[2];this.Sb=a[3];this.Tb=a[4];this.jd=a[5];this.R=a[6];this.je=a[7];this.B=a[8];this.I=a[9];this.D=a[10];this.C=a[11];this.F=a[12];this.H=a[13];this.i=a[15];this.Mc=a[16];this.Vd=a[17];this.l=a[18];this.h=a[20];this.N=a[21];this.M=a[22];this.o=this.j=!1;this.ea.clear();this.g.clear();this.v.send("mouse-enable",this.Bd)};p.Da=function(){this.j||(this.ea.length?Mc(this):this.g.length&&Nc(this))};
function Nc(a){a.j=!0;a.o=!0;a.h&2&&(M(a.s,12),a.s.Pa(12))}function Mc(a){a.j=!0;a.o=!1;a.h&1&&(M(a.s,1),a.s.Pa(1))}function Lc(a,b,c){a.g.push((0>c)<<5|(0>b)<<4|8|a.jd);a.g.push(b);a.g.push(c);a.Da()}p.Fj=function(){this.j=!1;if(!this.ea.length&&!this.g.length)return this.i;this.o?(M(this.s,12),this.i=this.g.shift()):(M(this.s,1),this.i=this.ea.shift());(this.ea.length||this.g.length)&&this.Da();return this.i};p.Hj=function(){var a=16;this.j&&(a|=1);this.o&&(a|=32);return a};
p.Gj=function(a){if(this.M)this.h=a,this.M=!1;else if(this.N)this.N=!1,this.g.clear(),this.g.push(a),Nc(this);else if(this.I)this.I=!1,this.g.clear(),this.g.push(250),this.Mc=a,this.Mc||(this.Mc=100),Nc(this);else if(this.H)this.H=!1,this.g.clear(),this.g.push(250),this.Vd=3<a?4:1<<a,Nc(this);else if(this.D)this.D=!1,this.ea.push(250),Mc(this);else if(this.C)this.C=!1,this.ea.push(250),Mc(this),a||this.ea.push(2);else if(this.F)this.F=!1,this.ea.push(250),Mc(this);else if(this.B){if(this.B=!1,this.oe){this.ea.clear();
this.g.clear();this.g.push(250);switch(a){case 230:this.l=!1;break;case 231:this.l=!0;break;case 232:this.H=!0;break;case 233:Lc(this,0,0);break;case 235:Lc(this,0,0);break;case 242:this.g.push(0);this.g.push(0);this.jd=this.Sb=this.Tb=0;break;case 243:this.I=!0;break;case 244:this.Bd=this.zc=!0;this.v.send("mouse-enable",!0);this.jd=this.Sb=this.Tb=0;break;case 245:this.zc=!1;break;case 246:this.zc=!1;this.Mc=100;this.l=!1;this.Vd=4;break;case 255:this.g.push(170),this.g.push(0),this.Bd=!0,this.v.send("mouse-enable",
!0),this.zc=!1,this.Mc=100,this.l=!1,this.Vd=4,this.jd=this.Sb=this.Tb=0}Nc(this)}}else{this.g.clear();this.ea.clear();this.ea.push(250);switch(a){case 237:this.D=!0;break;case 240:this.C=!0;break;case 242:this.ea.push(171);this.ea.push(83);break;case 243:this.F=!0;break;case 244:this.je=!0;break;case 245:this.je=!1;break;case 255:this.ea.clear(),this.ea.push(250),this.ea.push(170),this.ea.push(0)}Mc(this)}};
p.Ij=function(a){switch(a){case 32:this.ea.clear();this.g.clear();this.ea.push(this.h);Mc(this);break;case 96:this.M=!0;break;case 211:this.N=!0;break;case 212:this.B=!0;break;case 167:this.h|=32;break;case 168:this.h&=-33;break;case 169:this.ea.clear();this.g.clear();this.ea.push(0);Mc(this);break;case 170:this.ea.clear();this.g.clear();this.ea.push(85);Mc(this);break;case 171:this.ea.clear();this.g.clear();this.ea.push(0);Mc(this);break;case 173:this.h|=16;break;case 174:this.h&=-17;break;case 254:a=
this.s,a.reset(),kb(a)}};function Oc(a,b){this.h=this.g=this.O=this.B=this.l=0;this.i=-1;this.fa=b;this.D=void 0===this.fa;this.ga=void 0;this.name=this.D?"master":"slave ";this.F=!1;this.H=this.state=0;this.o=1;this.C=this.I=0;this.s=a;this.D?(this.ga=new Oc(this.s,this),this.j=function(){if(0<=this.i)jb(this.s);else{var c=this.g&this.l;if(c){c&=-c;var d=this.I?this.l:-1;this.O&&(this.O&-this.O&d)<=c||(this.i=ob(c),jb(this.s))}}},this.ae=function(){if(-1!==this.i)if(0===this.g)this.i=-1;else{var c=1<<this.i;0===(this.C&
c)&&(this.g&=~c);this.o||(this.O|=c);2===this.i?this.ga.ae():this.s.tb(this.B|this.i);this.i=-1;this.j()}}):(this.j=function(){if(0<=this.i)jb(this.s);else{var c=this.g&this.l;if(c){c&=-c;var d=this.I?this.l:-1;this.O&&(this.O&-this.O&d)<=c||(this.i=ob(c),this.fa.Zd(2))}}},this.ae=function(){if(-1!==this.i)if(0===this.g)this.i=-1,this.fa.h&=-5,this.s.tb(this.B|7);else{var c=1<<this.i;0===(this.C&c)&&(this.g&=~c);this.o||(this.O|=c);this.fa.h&=-5;this.s.tb(this.B|this.i);this.i=-1;this.j()}});this.D?
(a=32,b=1232):(a=160,b=1233);K(this.s.A,a,this,this.ti);J(this.s.A,a,this,this.si);K(this.s.A,a|1,this,this.vi);J(this.s.A,a|1,this,this.ui);K(this.s.A,b,this,this.Ej);J(this.s.A,b,this,this.Dj);this.D?(this.Zd=function(c){8<=c?this.ga.Zd(c-8):(c=1<<c,0===(this.h&c)&&(this.g|=c,this.h|=c,this.j()))},this.de=function(c){8<=c?this.ga.de(c-8):(c=1<<c,this.h&c&&(this.h&=~c,this.g&=~c,this.j()))}):(this.Zd=function(c){c=1<<c;0===(this.h&c)&&(this.g|=c,this.h|=c,this.j())},this.de=function(c){c=1<<c;this.h&
c&&(this.h&=~c,this.g&=~c,this.j())})}p=Oc.prototype;p.Y=function(){var a=[];a[0]=this.l;a[1]=this.B;a[2]=this.O;a[3]=this.g;a[4]=this.D;a[5]=this.ga;a[6]=this.F;a[7]=this.state;a[8]=this.H;a[9]=this.o;a[10]=this.C;return a};p.G=function(a){this.l=a[0];this.B=a[1];this.O=a[2];this.g=a[3];this.D=a[4];this.ga&&this.ga.G(a[5]);this.F=a[6];this.state=a[7];this.H=a[8];this.o=a[9];this.C=a[10]};
p.ti=function(a){if(a&16)this.h=this.l=this.g=this.O=0,this.o=1,this.i=-1,this.F=a&1,this.state=1;else if(a&8)a&2&&(this.H=a&1),a&64&&(this.I=32===(a&32));else{var b=a>>5;1===b?this.O&=this.O-1:3===b?this.O&=~(1<<(a&7)):192!==(a&200)&&(this.O&=this.O-1);this.j()}};p.si=function(){return this.H?this.O:this.g};p.vi=function(a){0===this.state?this.F?(this.F=!1,this.o=a&2):(this.l=~a,this.j()):1===this.state?(this.B=a,this.state++):2===this.state&&(this.state=0)};p.ui=function(){return~this.l&255};
p.Dj=function(){return this.C};p.Ej=function(a){this.C=a};function Pc(a){this.s=a;this.Uc=0;this.S=new Uint8Array(128);this.B=this.g=Date.now();this.o=this.j=0;this.D=!1;this.C=.9765625;this.l=38;this.h=2;this.zf=this.i=0;K(a.A,112,this,function(b){this.Uc=b&127;this.zf=b>>7});K(a.A,113,this,this.Ch);J(a.A,113,this,this.Bh)}p=Pc.prototype;p.Y=function(){var a=[];a[0]=this.Uc;a[1]=this.S;a[2]=this.g;a[3]=this.B;a[4]=this.j;a[5]=this.o;a[6]=this.D;a[7]=this.C;a[8]=this.l;a[9]=this.h;a[10]=this.i;a[11]=this.zf;return a};
p.G=function(a){this.Uc=a[0];this.S=a[1];this.g=a[2];this.B=a[3];this.j=a[4];this.o=a[5];this.D=a[6];this.C=a[7];this.l=a[8];this.h=a[9];this.i=a[10];this.zf=a[11]};p.Cb=function(a){a=Date.now();this.g+=a-this.B;this.B=a;this.D&&this.j<a?(this.s.Pa(8),this.i|=192,this.j+=this.C*Math.ceil((a-this.j)/this.C)):this.o&&this.o<a&&(this.s.Pa(8),this.i|=160,this.o=0)};function Qc(a,b){if(a.h&4)a=b;else{a=b;for(var c=b=0,d;a;)d=a%10,c|=d<<4*b,b++,a=(a-d)/10;a=c}return a}
function Rc(a,b){var c;a.h&4?c=b:c=(b&15)+10*(b>>4&15);return c}
p.Bh=function(){switch(this.Uc){case 0:return Qc(this,(new Date(this.g)).getUTCSeconds());case 2:return Qc(this,(new Date(this.g)).getUTCMinutes());case 4:return Qc(this,(new Date(this.g)).getUTCHours());case 7:return Qc(this,(new Date(this.g)).getUTCDate());case 8:return Qc(this,(new Date(this.g)).getUTCMonth()+1);case 9:return Qc(this,(new Date(this.g)).getUTCFullYear()%100);case 10:return this.l;case 11:return this.h;case 12:M(this.s,8);var a=this.i;this.i&=-241;return a;case 13:return 255;case 50:return Qc(this,
(new Date(this.g)).getUTCFullYear()/100|0);default:return this.S[this.Uc]}};p.Ch=function(a){switch(this.Uc){case 10:this.l=a&127;this.C=1E3/(32768>>(this.l&15)-1);break;case 11:this.h=a;this.h&64&&(this.j=Date.now());if(this.h&32){a=new Date;const b=Rc(this,this.S[1]),c=Rc(this,this.S[3]),d=Rc(this,this.S[5]);this.o=+new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),d,c,b))}break;case 1:case 3:case 5:this.S[this.Uc]=a}this.D=64===(this.h&64)&&0<(this.l&15)};function Sc(a,b,c){this.v=c;this.s=a;this.Za=4;this.Cc=this.vc=0;this.hd=96;this.$c=this.rf=0;this.Ac=1;this.$=this.ff=this.xf=this.Ve=0;this.input=new zb(4096);this.h=[];switch(b){case 1016:this.g=0;this.$=4;break;case 760:this.g=1;this.$=3;break;case 1E3:this.g=2;this.$=4;break;case 744:this.$=this.g=3;break;default:this.g=0,this.$=4}this.v.register("serial"+this.g+"-input",function(d){this.input.push(d);this.hd|=1;this.Za|=4096;Tc(this)},this);a=a.A;K(a,b,this,function(d){Uc(this,d)},function(d){Uc(this,
d&255);Uc(this,d>>8)});K(a,b|1,this,function(d){this.Cc&128?this.vc=this.vc&255|d<<8:(this.$c=d&15,Tc(this))});J(a,b,this,function(){if(this.Cc&128)return this.vc&255;var d=this.input.shift();0===this.input.length&&(this.hd&=-2,this.Za&=-4097,Tc(this));return d});J(a,b|1,this,function(){return this.Cc&128?this.vc>>8:this.$c&15});J(a,b|2,this,function(){var d=this.Ac&15|192;2==this.Ac&&(this.Za&=-5,Tc(this));return d});K(a,b|2,this,function(d){this.rf=d});J(a,b|3,this,function(){return this.Cc});K(a,
b|3,this,function(d){this.Cc=d});J(a,b|4,this,function(){return this.Ve});K(a,b|4,this,function(d){this.Ve=d});J(a,b|5,this,function(){return this.hd});K(a,b|5,this,function(){});J(a,b|6,this,function(){return this.xf});K(a,b|6,this,function(){});J(a,b|7,this,function(){return this.ff});K(a,b|7,this,function(d){this.ff=d})}
Sc.prototype.Y=function(){var a=[];a[0]=this.Za;a[1]=this.vc;a[2]=this.Cc;a[3]=this.hd;a[4]=this.rf;a[5]=this.$c;a[6]=this.Ac;a[7]=this.Ve;a[8]=this.xf;a[9]=this.ff;a[10]=this.$;return a};Sc.prototype.G=function(a){this.Za=a[0];this.vc=a[1];this.Cc=a[2];this.hd=a[3];this.rf=a[4];this.$c=a[5];this.Ac=a[6];this.Ve=a[7];this.xf=a[8];this.ff=a[9];this.$=a[10]};
function Tc(a){a.Za&4096&&a.$c&1?(a.Ac=12,a.s.Pa(a.$)):a.Za&4&&a.$c&2?(a.Ac=2,a.s.Pa(a.$)):a.Za&1&&a.$c&8?(a.Ac=0,a.s.Pa(a.$)):(a.Ac=1,M(a.s,a.$))}function Uc(a,b){if(a.Cc&128)a.vc=a.vc&-256|b;else if(a.Za|=4,Tc(a),255!==b){var c=String.fromCharCode(b);a.v.send("serial"+a.g+"-output-char",c);a.h.push(b);"\n"===c&&(a.v.send("serial"+a.g+"-output-line",String.fromCharCode.apply("",a.h)),a.h=[])}};function Vc(a){this.s=a;var b=a.A;Ob(a.u.Ha,{Ia:56,J:[134,128,19,113,7,0,128,2,8,0,128,6,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1,0,0],kb:[],name:"acpi"});this.g=this.h=0;this.status=1;this.te=this.od=0;this.i=Wc(this,hb());this.Rb=new Uint8Array(4);J(b,45056,this,void 0,function(){return this.od});K(b,45056,this,void 0,function(c){this.od&=~c});J(b,45058,this,void 0,function(){return this.te});K(b,45058,this,void 0,function(c){this.te=
c});J(b,45060,this,void 0,function(){return this.status});K(b,45060,this,void 0,function(c){this.status=c});J(b,45064,this,void 0,void 0,function(){return Wc(this,hb())&16777215});J(b,45024,this,function(){return this.Rb[0]});J(b,45025,this,function(){return this.Rb[1]});J(b,45026,this,function(){return this.Rb[2]});J(b,45027,this,function(){return this.Rb[3]});K(b,45024,this,function(c){this.Rb[0]=c});K(b,45025,this,function(c){this.Rb[1]=c});K(b,45026,this,function(c){this.Rb[2]=c});K(b,45027,this,
function(c){this.Rb[3]=c})}Vc.prototype.Cb=function(a){a=Wc(this,a);var b=0!==((a^this.i)&8388608);this.te&1&&b?(this.od|=1,this.s.Pa(9)):M(this.s,9);this.i=a};function Wc(a,b){b=Math.round(3579.545*b);b===a.h?3579.545>a.g&&a.g++:a.h+a.g<=b&&(a.g=0,a.h=b);return a.h+a.g}Vc.prototype.Y=function(){var a=[];a[0]=this.status;a[1]=this.od;a[2]=this.te;a[3]=this.Rb;return a};Vc.prototype.G=function(a){this.status=a[0];this.od=a[1];this.te=a[2];this.Rb=a[3]};function Xc(a){this.s=a;this.aa=this.ia=0;this.B=1;this.g=this.l=0;this.j=hb();this.M=this.R=this.N=this.U=this.h=65536;this.H=this.F=this.C=0;this.i=new Int32Array(8);this.O=new Int32Array(8);this.o=new Int32Array(8);this.Z=254;this.D=-1;this.X=this.error=this.I=0;cb(a.A,4276092928,1048576,b=>{var c=b&3;return this.we(b&-4)>>8*c&255},()=>{},b=>this.we(b),(b,c)=>this.Oc(b,c))}p=Xc.prototype;
p.we=function(a){a=a-4276092928|0;switch(a){case 32:return this.ia;case 48:return 327700;case 128:return this.C;case 208:return this.I;case 224:return this.D;case 240:return this.Z;case 256:case 272:case 288:case 304:case 320:case 336:case 352:case 368:return this.O[a-256>>4];case 384:case 400:case 416:case 432:case 448:case 464:case 480:case 496:return this.o[a-384>>4];case 512:case 528:case 544:case 560:case 576:case 592:case 608:case 624:return this.i[a-512>>4];case 640:return this.X;case 768:return this.F;
case 784:return this.H;case 800:return this.h;case 832:return this.U;case 848:return this.N;case 864:return this.R;case 880:return this.M;case 992:return this.aa;case 896:return this.l;case 912:return this.g;default:return 0}};
p.Oc=function(a,b){switch(a-4276092928|0){case 128:this.C=b&255;Yc(this);break;case 176:b=Zc(this.O);if(-1!==b){$c(this.O,b);if(this.o[b>>5]>>(b&31)&1){a=this.s.u.Bc;for(var c=0;24>c;c++){var d=a.g[c];(d&255)===b&&d&16384&&(a.g[c]&=-16385,ad(a,c))}}Yc(this)}break;case 208:this.I=b&4278190080;break;case 224:this.D=b|16777215;break;case 240:this.Z=b;break;case 640:this.X=this.error;this.error=0;break;case 768:a=b&255;c=b>>8&7;d=b>>15&1;var e=b>>18&3;this.F=b&-4097;0===e?bd(this,a,c,d):1===e?bd(this,
a,0,d):2===e&&bd(this,a,c,d);break;case 784:this.H=b;break;case 800:this.h=b;break;case 832:this.U=b;break;case 848:this.N=b;break;case 864:this.R=b;break;case 880:this.M=b;break;case 992:this.aa=b;b=b&3|(b&8)>>1;this.B=7===b?0:b+1;break;case 896:this.l=b>>>0,this.g=b>>>0,this.j=hb()}};
p.Cb=function(a){0!==this.g&&(a=1E6*(a-this.j)/(1<<this.B)>>>0,0!==a&&(this.j+=a/1E6*(1<<this.B),this.g-=a,0>=this.g&&(a=this.h&393216,131072===a?(this.g%=this.l,0>=this.g&&(this.g+=this.l),0===(this.h&65536)&&bd(this,this.h&255,0,!1)):0===a&&(this.g=0,0===(this.h&65536)&&bd(this,this.h&255,0,!1)))))};function bd(a,b,c,d){5===c||4===c||a.i[b>>5]>>(b&31)&1||(cd(a.i,b),d?cd(a.o,b):$c(a.o,b),Yc(a))}function Yc(a){var b=Zc(a.i);-1!==b&&(Zc(a.O)>=b||(b&240)<=(a.C&240)||jb(a.s))}
p.ae=function(){var a=Zc(this.i);-1===a||Zc(this.O)>=a||(a&240)<=(this.C&240)||($c(this.i,a),cd(this.O,a),this.s.tb(a),Yc(this))};p.Y=function(){var a=[];a[0]=this.ia;a[1]=this.aa;a[2]=this.B;a[3]=this.l;a[4]=this.g;a[5]=this.j;a[6]=this.h;a[7]=this.U;a[8]=this.N;a[9]=this.R;a[10]=this.M;a[11]=this.C;a[12]=this.F;a[13]=this.H;a[14]=this.i;a[15]=this.O;a[16]=this.o;a[17]=this.Z;a[18]=this.D;a[19]=this.I;a[20]=this.error;a[21]=this.X;return a};
p.G=function(a){this.ia=a[0];this.aa=a[1];this.B=a[2];this.l=a[3];this.g=a[4];this.j=a[5];this.h=a[6];this.U=a[7];this.N=a[8];this.R=a[9];this.M=a[10];this.C=a[11];this.F=a[12];this.H=a[13];this.i=a[14];this.O=a[15];this.o=a[16];this.Z=a[17];this.D=a[18];this.I=a[19];this.error=a[20];this.X=a[21]};function cd(a,b){a[b>>5]|=1<<(b&31)}function $c(a,b){a[b>>5]&=~(1<<(b&31))}function Zc(a){for(var b=7;0<=b;b--){var c=a[b];if(c)return pb(c>>>0)|b<<5}return-1};function dd(a){this.s=a;this.g=new Int32Array(24);this.o=new Int32Array(24);for(var b=0;b<this.g.length;b++)this.g[b]=65536;this.i=this.h=this.l=this.j=0;cb(a.A,4273995776,131072,c=>{c=c-4273995776|0;return 16<=c&&20>c?(c-=16,this.read(this.j)>>8*c&255):0},()=>{},c=>{c=c-4273995776|0;return 0===c?this.j:16===c?this.read(this.j):0},(c,d)=>{c=c-4273995776|0;0===c?this.j=d:16===c&&this.write(this.j,d)})}
function ad(a,b){var c=1<<b;if(0!==(a.h&c)){var d=a.g[b];if(0===(d&65536)){var e=d>>8&7;if(0===(d&32768))a.h&=~c;else if(a.g[b]|=16384,d&16384)return;0!==e&&1!==e||bd(a.s.u.Pc,d&255,e,32768===(d&32768));a.g[b]&=-4097}}}p=dd.prototype;p.Zd=function(a){if(!(24<=a)){var b=1<<a;0===(this.i&b)&&(this.i|=b,65536!==(this.g[a]&98304)&&(this.h|=b,ad(this,a)))}};p.de=function(a){if(!(24<=a)){var b=1<<a;(this.i&b)===b&&(this.i&=~b,this.g[a]&32768&&(this.h&=~b))}};
p.read=function(a){if(0===a)return this.l<<24;if(1===a)return 1507345;if(2===a)return this.l<<24;if(16<=a&&64>a){var b=a-16>>1;return a&1?this.o[b]:this.g[b]}return 0};p.write=function(a,b){if(0===a)this.l=b>>>24&15;else if(1!==a&&2!==a&&16<=a&&64>a){var c=a-16>>1;a&1?this.o[c]=b&4278190080:(this.g[c]=b&110591|this.g[c]&-110592,ad(this,c))}};p.Y=function(){var a=[];a[0]=this.g;a[1]=this.o;a[2]=this.j;a[3]=this.l;a[4]=this.h;a[5]=this.i;return a};
p.G=function(a){this.g=a[0];this.o=a[1];this.j=a[2];this.l=a[3];this.h=a[4];this.i=a[5]};function ed(a){this.message=a}ed.prototype=Error();const fd={Uint8Array,Int8Array,Uint16Array,Int16Array,Uint32Array,Int32Array,Float32Array,Float64Array};
function gd(a,b){if("object"!==typeof a||null===a)return a;if(a instanceof Array)return a.map(e=>gd(e,b));a.constructor===Object&&console.log(a);if(a.BYTES_PER_ELEMENT){var c=new Uint8Array(a.buffer,a.byteOffset,a.length*a.BYTES_PER_ELEMENT);return{__state_type__:a.constructor.name.replace("bound ",""),buffer_id:b.push(c)-1}}a=a.Y();c=[];for(var d=0;d<a.length;d++)c[d]=gd(a[d],b);return c}
function id(a,b){if("object"!==typeof a||null===a)return a;if(a instanceof Array){for(let c=0;c<a.length;c++)a[c]=id(a[c],b);return a}return new fd[a.__state_type__](b[a.buffer_id])}
eb.prototype.ye=function(){for(var a=[],b=gd(this,a),c=[],d=0,e=0;e<a.length;e++){var f=a[e].byteLength;c[e]={offset:d,length:f};d+=f;d=d+3&-4}e=JSON.stringify({buffer_infos:c,state:b});e=(new TextEncoder).encode(e);b=16+e.length;b=b+3&-4;f=b+d;d=new ArrayBuffer(f);var k=new Int32Array(d,0,4);(new Uint8Array(d,16,e.length)).set(e);b=new Uint8Array(d,b);k[0]=-2039052682;k[1]=6;k[2]=f;k[3]=e.length;for(e=0;e<a.length;e++)b.set(a[e],c[e].offset);return d};
eb.prototype.Wd=function(a){function b(m,w){const q=m.length;if(16>q)throw new ed("Invalid length: "+q);m=new Int32Array(m.buffer,m.byteOffset,4);if(-2039052682!==m[0])throw new ed("Invalid header: "+wb(m[0]>>>0));if(6!==m[1])throw new ed("Version mismatch: dump="+m[1]+" we=6");if(w&&m[2]!==q)throw new ed("Length doesn't match header: real="+q+" header="+m[2]);return m[3]}function c(m){m=(new TextDecoder).decode(m);return JSON.parse(m)}a=new Uint8Array(a);if(4247762216===(new Uint32Array(a.buffer,
0,1))[0]){var d=this.ik(a.length);(new Uint8Array(this.uc.buffer,this.kk(d),a.length)).set(a);var e=this.Ie(d,16),f=new Uint8Array(this.uc.buffer,e,16),k=b(f,!1);this.Je(e,16);e=this.Ie(d,k);f=new Uint8Array(this.uc.buffer,e,k);f=c(f);this.Je(e,k);e=f.state;var g=f.buffer_infos;f=[];k=16+k;for(var h of g){g=(k+3&-4)-k;if(1048576<h.length){var l=this.Ie(d,g);this.Je(l,g);l=new Uint8Array(h.length);f.push(l.buffer);for(var n=0;n<h.length;){const m=Math.min(h.length-n,1048576),w=this.Ie(d,m);l.set(new Uint8Array(this.uc.buffer,
w,m),n);this.Je(w,m);n+=m}}else l=this.Ie(d,g+h.length),n=l+g,f.push(this.uc.buffer.slice(n,n+h.length)),this.Je(l,g+h.length);k+=g+h.length}e=id(e,f);this.G(e);this.jk(d)}else{h=b(a,!0);if(0>h||h+12>=a.length)throw new ed("Invalid info block length: "+h);e=c(a.subarray(16,16+h));d=e.state;e=e.buffer_infos;let m=16+h;m=m+3&-4;h=e.map(w=>{const q=m+w.offset;return a.buffer.slice(q,q+w.length)});d=id(d,h);this.G(d)}};function jd(a,b,c){this.s=a;this.Ha=a.u.Ha;this.rc=c;this.v=b;this.v.register("net0-receive",function(d){if(!(this.ra&1)&&(this.v.send("eth-receive-end",[d.length]),this.Xd&16||this.Xd&4&&255===d[0]&&255===d[1]&&255===d[2]&&255===d[3]&&255===d[4]&&255===d[5]||!(this.Xd&8&&1===(d[0]&1)||d[0]!==this.ta[0]||d[1]!==this.ta[1]||d[2]!==this.ta[2]||d[3]!==this.ta[3]||d[4]!==this.ta[4]||d[5]!==this.ta[5]))){var e=this.Hb<<8,f=Math.max(60,d.length)+4,k=e+4,g=this.Hb+1+(f>>8);if(!((this.wc>this.Hb?this.wc-
this.Hb:this.Va-this.Hb+this.wc-this.Ub)<1+(f>>8)&&0!==this.wc)){if(e+f>this.Va<<8){var h=(this.Va<<8)-k;this.memory.set(d.subarray(0,h),k);this.memory.set(d.subarray(h),this.Ub<<8)}else this.memory.set(d,k),60>d.length&&this.memory.fill(0,k+d.length,k+60);g>=this.Va&&(g+=this.Ub-this.Va);this.memory[e]=1;this.memory[e+1]=g;this.memory[e+2]=f;this.memory[e+3]=f>>8;this.Hb=g;kd(this,1)}}},this);this.port=768;this.name="ne2k";this.J=[236,16,41,128,3,1,0,0,0,0,0,2,0,0,0,0,this.port&255|1,this.port>>
8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,26,0,17,0,0,184,254,0,0,0,0,0,0,0,0,0,1,0,0];this.Ia=40;this.kb=[{size:32}];this.Qe=this.O=0;this.ra=1;this.gf=this.xd=this.zb=this.he=0;this.memory=new Uint8Array(32768);this.Nf=this.Xd=0;this.Mf=1;this.ta=new Uint8Array([0,34,21,255*Math.random()|0,255*Math.random()|0,255*Math.random()|0]);for(b=0;6>b;b++)this.memory[b<<1]=this.memory[b<<1|1]=this.ta[b];this.memory[28]=this.memory[29]=87;this.memory[30]=this.memory[31]=87;this.pa=0;this.Ub=
64;this.Va=128;this.wc=this.Hb=76;b=a.A;J(b,this.port|0,this,function(){return this.ra});K(b,this.port|0,this,function(d){this.ra=d;this.ra&1||(d&24&&0===this.zb&&kd(this,64),d&4&&(d=this.gf<<8,d=this.memory.subarray(d,d+this.xd),this.v.send("net0-send",d),this.v.send("eth-transmit-end",[d.length]),this.ra&=-5,kd(this,2)))});J(b,this.port|13,this,function(){return 0});J(b,this.port|14,this,function(){return 0});J(b,this.port|15,this,function(){return 0});J(b,this.port|31,this,function(){0===N(this)&&
kd(this,128);return 0});K(b,this.port|31,this,function(){});J(b,this.port|1,this,function(){var d=N(this);return 0===d?this.Ub:1===d?this.ta[0]:2===d?this.Ub:0});K(b,this.port|1,this,function(d){var e=N(this);0===e?this.Ub=d:1===e&&(this.ta[0]=d)});J(b,this.port|2,this,function(){var d=N(this);return 0===d?this.Va:1===d?this.ta[1]:2===d?this.Va:0});K(b,this.port|2,this,function(d){var e=N(this);0===e?(d>this.memory.length>>8&&(d=this.memory.length>>8),this.Va=d):1===e&&(this.ta[1]=d)});J(b,this.port|
7,this,function(){var d=N(this);if(0===d)return this.O;if(1===d)return this.Hb});K(b,this.port|7,this,function(d){var e=N(this);0===e?(this.O&=~d,ld(this)):1===e&&(this.Hb=d)});K(b,this.port|13,this,function(d){0===N(this)&&(this.Nf=d)});K(b,this.port|14,this,function(d){0===N(this)&&(this.he=d)});J(b,this.port|10,this,function(){return 0===N(this)?80:0});K(b,this.port|10,this,function(d){0===N(this)&&(this.zb=this.zb&65280|d&255)});J(b,this.port|11,this,function(){return 0===N(this)?67:0});K(b,this.port|
11,this,function(d){0===N(this)&&(this.zb=this.zb&255|d<<8&65280)});J(b,this.port|8,this,function(){if(0===N(this))return this.pa&255});K(b,this.port|8,this,function(d){0===N(this)&&(this.pa=this.pa&65280|d&255)});J(b,this.port|9,this,function(){if(0===N(this))return this.pa>>8&255});K(b,this.port|9,this,function(d){0===N(this)&&(this.pa=this.pa&255|d<<8&65280)});K(b,this.port|15,this,function(d){0===N(this)&&(this.Qe=d,ld(this))});J(b,this.port|3,this,function(){var d=N(this);return 0===d?this.wc:
1===d?this.ta[2]:0});K(b,this.port|3,this,function(d){var e=N(this);0===e?this.wc=d:1===e&&(this.ta[2]=d)});J(b,this.port|4,this,function(){var d=N(this);return 0===d?this.Mf:1===d?this.ta[3]:0});K(b,this.port|4,this,function(d){var e=N(this);0===e?this.gf=d:1===e&&(this.ta[3]=d)});J(b,this.port|5,this,function(){var d=N(this);return 0===d?0:1===d?this.ta[4]:0});K(b,this.port|5,this,function(d){var e=N(this);0===e?this.xd=this.xd&-256|d:1===e&&(this.ta[4]=d)});J(b,this.port|6,this,function(){var d=
N(this);return 0===d?0:1===d?this.ta[5]:0});K(b,this.port|6,this,function(d){var e=N(this);0===e?this.xd=this.xd&255|d<<8:1===e&&(this.ta[5]=d)});J(b,this.port|12,this,function(){return 0===N(this)?9:0});K(b,this.port|12,this,function(d){0===N(this)&&(this.Xd=d)});J(b,this.port|16,this,this.Eh,this.Yf,this.Dh);K(b,this.port|16,this,this.Zf,this.Zf,this.Fh);Ob(a.u.Ha,this)}p=jd.prototype;
p.Y=function(){var a=[];a[0]=this.O;a[1]=this.Qe;a[2]=this.ra;a[3]=this.he;a[4]=this.zb;a[5]=this.xd;a[6]=this.gf;a[7]=this.pa;a[8]=this.Ub;a[9]=this.Hb;a[10]=this.wc;a[11]=this.Va;a[12]=this.Xd;a[13]=this.Nf;a[14]=this.Mf;a[15]=this.ta;a[16]=this.memory;return a};
p.G=function(a){this.O=a[0];this.Qe=a[1];this.ra=a[2];this.he=a[3];this.zb=a[4];this.xd=a[5];this.gf=a[6];this.pa=a[7];this.Ub=a[8];this.Hb=a[9];this.wc=a[10];this.Va=a[11];this.Xd=a[12];this.Nf=a[13];this.Mf=a[14];this.rc&&(this.ta=a[15],this.memory=a[16])};function kd(a,b){a.O|=b;ld(a)}function ld(a){a.Qe&a.O?a.Ha.Da(a.Ia):fc(a.Ha,a.Ia)}function md(a,b){if(16>=a.pa||16384<=a.pa&&32768>a.pa)a.memory[a.pa]=b;a.pa++;a.zb--;a.pa>=a.Va<<8&&(a.pa+=a.Ub-a.Va<<8);0===a.zb&&kd(a,64)}
p.Zf=function(a){md(this,a);this.he&1&&md(this,a>>8)};p.Fh=function(a){md(this,a);md(this,a>>8);md(this,a>>16);md(this,a>>24)};function nd(a){let b=0;32768>a.pa&&(b=a.memory[a.pa]);a.pa++;a.zb--;a.pa>=a.Va<<8&&(a.pa+=a.Ub-a.Va<<8);0===a.zb&&kd(a,64);return b}p.Eh=function(){return this.Yf()&255};p.Yf=function(){return this.he&1?nd(this)|nd(this)<<8:nd(this)};p.Dh=function(){return nd(this)|nd(this)<<8|nd(this)<<16|nd(this)<<24};function N(a){return a.ra>>6&3};var od=new Uint8Array(256),pd=[],qd=[],rd=[],sd=new Uint8Array(256),td=[];
function ud(a,b){this.s=a;this.v=b;this.Aa=new zb(64);this.ca=new zb(64);this.i=this.o=this.ub=this.H=0;this.L=new Uint8Array(256);vd(this);this.Md=!1;this.De=0;this.wb=this.vb=this.Yc=this.ac=!1;this.Jb=[new Ab,new Ab];this.gb=a.u.gb;this.hb=this.$b=this.j=this.Mb=this.l=this.D=0;this.Nb=1;this.Wc=5;this.Lb=!1;this.g=new ArrayBuffer(65536);this.Z=new Int8Array(this.g);this.B=new Uint8Array(this.g);this.X=new Int16Array(this.g);this.aa=new Uint16Array(this.g);this.Ma=new yb(this.g);this.Ob=this.C=
!1;this.bb=22050;b.send("dac-tell-sampling-rate",this.bb);this.h=1;this.M=170;this.I=0;this.Qc=new Uint8Array(256);this.F=new zb(64);this.R=this.N=this.Oa=0;this.Uh=!1;this.$=5;this.cd=new Uint8Array(16);a.A.sd(544,this,this.Dg,this.Fg,this.wi,this.yi);a.A.sd(904,this,this.Dg,this.Fg);a.A.sd(548,this,this.Ai,this.Ci);J(a.A,550,this,this.Ei);J(a.A,551,this,this.Gi);J(a.A,552,this,this.Ii);J(a.A,553,this,this.Ki);J(a.A,554,this,this.Mi);J(a.A,555,this,this.Oi);J(a.A,556,this,this.Qi);J(a.A,557,this,
this.Si);a.A.sd(558,this,this.Ui,this.Wi);a.A.Vb(544,this,this.Eg,this.Gg,this.xi,this.zi);a.A.Vb(904,this,this.Eg,this.Gg);a.A.Vb(548,this,this.Bi,this.Di);K(a.A,550,this,this.Fi);K(a.A,551,this,this.Hi);a.A.Vb(552,this,this.Ji,this.Li);K(a.A,554,this,this.Ni);K(a.A,555,this,this.Pi);K(a.A,556,this,this.Ri);K(a.A,557,this,this.Ti);K(a.A,558,this,this.Vi);K(a.A,559,this,this.Xi);a.A.sd(816,this,this.zj,this.Bj);a.A.Vb(816,this,this.Aj,this.Cj);this.gb.kf.push({Oe:this.ia,Lf:this});b.register("dac-request-data",
function(){!this.Mb||this.Ob?wd(this):xd(this)},this);b.register("speaker-has-initialized",function(){vd(this)},this);b.send("speaker-confirm-initialized");yd(this)}function yd(a){a.Aa.clear();a.ca.clear();a.ub=0;a.o=0;a.Md=!1;a.De=0;a.ac=!1;a.Yc=!1;a.vb=!1;a.wb=!1;a.Jb[0].clear();a.Jb[1].clear();a.D=0;a.l=0;a.Mb=0;a.j=0;a.$b=0;a.hb=0;a.Lb=!1;a.B.fill(0);a.C=!1;a.Ob=!1;a.M=170;a.I=0;a.bb=22050;a.h=1;zd(a,1);a.cd.fill(0);a.Qc.fill(0);a.Qc[5]=1;a.Qc[9]=248}p=ud.prototype;
p.Y=function(){var a=[];a[2]=this.H;a[3]=this.ub;a[4]=this.o;a[5]=this.i;a[6]=this.L;a[7]=this.Md;a[8]=this.De;a[9]=this.ac;a[10]=this.Yc;a[11]=this.vb;a[12]=this.wb;a[15]=this.D;a[16]=this.l;a[17]=this.Mb;a[18]=this.j;a[19]=this.$b;a[20]=this.hb;a[21]=this.Nb;a[22]=this.Wc;a[23]=this.Lb;a[24]=this.B;a[25]=this.C;a[26]=this.Ob;a[27]=this.bb;a[28]=this.h;a[29]=this.M;a[30]=this.I;a[31]=this.Qc;a[33]=this.Xa;a[34]=this.$;a[35]=this.cd;return a};
p.G=function(a){this.H=a[2];this.ub=a[3];this.o=a[4];this.i=a[5];this.L=a[6];Ad(this);this.Md=a[7];this.De=a[8];this.ac=a[9];this.Yc=a[10];this.vb=a[11];this.wb=a[12];this.D=a[15];this.l=a[16];this.Mb=a[17];this.j=a[18];this.$b=a[19];this.hb=a[20];this.Nb=a[21];this.Wc=a[22];this.Lb=a[23];this.B=a[24];this.C=a[25];this.Ob=a[26];this.bb=a[27];this.h=a[28];this.M=a[29];this.I=a[30];this.Qc=a[31];this.Xa=a[33];this.$=a[34];this.cd=a[35];this.g=this.B.buffer;this.Z=new Int8Array(this.g);this.X=new Int16Array(this.g);
this.aa=new Uint16Array(this.g);this.Ma=new yb(this.g);this.Ob?this.v.send("dac-disable"):this.v.send("dac-enable")};p.Dg=function(){return 255};p.Fg=function(){return 255};p.wi=function(){return 255};p.yi=function(){return 255};p.Ai=function(){return this.i};p.Ci=function(){var a=this.i,b=qd[a];return b?b.call(this):this.L[a]};p.Ei=function(){return 255};p.Gi=function(){return 255};p.Ii=function(){return 255};p.Ki=function(){return 255};p.Mi=function(){this.ca.length&&(this.H=this.ca.shift());return this.H};
p.Oi=function(){return 255};p.Qi=function(){return 127};p.Si=function(){return 255};p.Ui=function(){this.cd[1]&&zd(this,1);return(this.ca.length&&!this.ac)<<7|127};p.Wi=function(){zd(this,2);return 0};p.Eg=function(){this.N=0};p.Gg=function(a){var b=td[this.N];b||(b=this.U);b.call(this,a,0,this.N)};p.xi=function(){this.R=0};p.zi=function(a){var b=td[this.R];b||(b=this.U);b.call(this,a,1,this.R)};p.Bi=function(a){this.i=a};p.Di=function(a){Bd(this,this.i,a)};
p.Fi=function(a){this.ac?this.ac=!1:a&&yd(this);this.ca.clear();this.ca.push(170)};p.Hi=function(){};p.Ji=function(){};p.Li=function(){};p.Ni=function(){};p.Pi=function(){};p.Ri=function(a){0===this.ub?(this.ub=a,this.Aa.clear(),this.o=od[a]):this.Aa.push(a);this.Aa.length>=this.o&&(a=pd[this.ub],a||(a=this.cg),a.call(this),this.o=this.ub=0,this.Aa.clear())};p.Ti=function(){};p.Vi=function(){};p.Xi=function(){};p.zj=function(){this.F.length&&(this.Oa=this.F.shift());return this.Oa};p.Aj=function(){};
p.Bj=function(){return 0|128*!this.F.length};p.Cj=function(a){255==a&&(this.F.clear(),this.F.push(254))};p.cg=function(){};function Q(a,b,c){c||(c=ud.prototype.cg);for(var d=0;d<a.length;d++)od[a[d]]=b,pd[a[d]]=c}function Cd(a){for(var b=[],c=0;16>c;c++)b.push(a+c);return b}Q([14],2,function(){this.Qc[this.Aa.shift()]=this.Aa.shift()});Q([15],1,function(){this.ca.clear();this.ca.push(this.Qc[this.Aa.shift()])});
Q([16],1,function(){var a=this.Aa.shift();a=Dd(a/127.5+-1);this.Jb[0].push(a);this.Jb[1].push(a);this.v.send("dac-enable")});Q([20,21],2,function(){this.$b=1;this.hb=this.Nb;this.ac=this.vb=this.wb=this.Lb=!1;Ed(this);Fd(this)});Q([22],2);Q([23],2);Q([28],0,function(){this.$b=1;this.hb=this.Nb;this.Lb=!0;this.ac=this.vb=this.wb=!1;Fd(this)});Q([31],0);Q([32],0,function(){this.ca.clear();this.ca.push(127)});Q([36],2);Q([44],0);Q([48],0);Q([49],0);Q([52],0);Q([53],0);Q([54],0);Q([55],0);Q([56],0);
Q([64],1,function(){Gd(this,1E6/(256-this.Aa.shift())/(this.Yc?2:1))});Q([65,66],2,function(){Gd(this,this.Aa.shift()<<8|this.Aa.shift())});Q([72],2,function(){Ed(this)});Q([116],2);Q([117],2);Q([118],2);Q([119],2);Q([125],0);Q([127],0);Q([128],2);Q([144],0,function(){this.$b=1;this.hb=this.Nb;this.Lb=!0;this.wb=!1;this.ac=!0;this.vb=!1;Fd(this)});Q([145],0);Q([152],0);Q([153],0);Q([160],0);Q([168],0);
Q(Cd(176),3,function(){if(!(this.ub&8)){var a=this.Aa.shift();this.$b=2;this.hb=this.Wc;this.Lb=!!(this.ub&4);this.wb=!!(a&16);this.Yc=!!(a&32);this.vb=!0;Ed(this);Fd(this)}});Q(Cd(192),3,function(){if(!(this.ub&8)){var a=this.Aa.shift();this.$b=1;this.hb=this.Nb;this.Lb=!!(this.ub&4);this.wb=!!(a&16);this.Yc=!!(a&32);this.vb=!1;Ed(this);Fd(this)}});Q([208],0,function(){this.Ob=!0;this.v.send("dac-disable")});Q([209],0,function(){this.Md=!0});Q([211],0,function(){this.Md=!1});
Q([212],0,function(){this.Ob=!1;this.v.send("dac-enable")});Q([213],0,function(){this.Ob=!0;this.v.send("dac-disable")});Q([214],0,function(){this.Ob=!1;this.v.send("dac-enable")});Q([216],0,function(){this.ca.clear();this.ca.push(255*this.Md)});Q([217,218],0,function(){this.Lb=!1});Q([224],1,function(){this.ca.clear();this.ca.push(~this.Aa.shift())});Q([225],0,function(){this.ca.clear();this.ca.push(4);this.ca.push(5)});Q([226],1);
Q([227],0,function(){this.ca.clear();for(var a=0;44>a;a++)this.ca.push("COPYRIGHT (C) CREATIVE TECHNOLOGY LTD, 1992.".charCodeAt(a));this.ca.push(0)});Q([228],1,function(){this.De=this.Aa.shift()});Q([232],0,function(){this.ca.clear();this.ca.push(this.De)});Q([242,243],0,function(){this.Da()});var Hd=new Uint8Array(256);Hd[14]=255;Hd[15]=7;Hd[55]=56;Q([249],1,function(){var a=this.Aa.shift();this.ca.clear();this.ca.push(Hd[a])});function Bd(a,b,c){(b=rd[b])&&b.call(a,c)}ud.prototype.Na=function(){return this.L[this.i]};
ud.prototype.Wa=function(a){this.L[this.i]=a};function vd(a){a.L[4]=204;a.L[34]=204;a.L[38]=204;a.L[40]=0;a.L[46]=0;a.L[10]=0;a.L[48]=192;a.L[49]=192;a.L[50]=192;a.L[51]=192;a.L[52]=192;a.L[53]=192;a.L[54]=0;a.L[55]=0;a.L[56]=0;a.L[57]=0;a.L[59]=0;a.L[60]=31;a.L[61]=21;a.L[62]=11;a.L[63]=0;a.L[64]=0;a.L[65]=0;a.L[66]=0;a.L[67]=0;a.L[68]=128;a.L[69]=128;a.L[70]=128;a.L[71]=128;Ad(a)}function Ad(a){for(var b=1;b<a.L.length;b++)sd[b]||Bd(a,b,a.L[b])}function Id(a,b){b||(b=ud.prototype.Na);qd[a]=b}
function Jd(a,b){b||(b=ud.prototype.Wa);rd[a]=b}function Kd(a,b,c){sd[a]=1;qd[a]=function(){return this.L[b]&240|this.L[c]>>>4};rd[a]=function(d){this.L[a]=d;var e=d<<4&240|this.L[c]&15;Bd(this,b,d&240|this.L[b]&15);Bd(this,c,e)}}function Ld(a,b,c){qd[a]=ud.prototype.Na;rd[a]=function(d){this.L[a]=d;this.v.send("mixer-volume",[b,c,(d>>>2)-62])}}Id(0,function(){vd(this);return 0});Jd(0);Kd(4,50,51);Kd(34,48,49);Kd(38,52,53);Kd(40,54,55);Kd(46,56,57);Ld(48,0,0);Ld(49,0,1);Ld(50,2,0);Ld(51,2,1);Id(59);
Jd(59,function(a){this.L[59]=a;this.v.send("mixer-volume",[1,2,6*(a>>>6)-18])});Id(65);Jd(65,function(a){this.L[65]=a;this.v.send("mixer-gain-left",6*(a>>>6))});Id(66);Jd(66,function(a){this.L[66]=a;this.v.send("mixer-gain-right",6*(a>>>6))});Id(68);Jd(68,function(a){this.L[68]=a;a>>>=3;this.v.send("mixer-treble-left",a-(16>a?14:16))});Id(69);Jd(69,function(a){this.L[69]=a;a>>>=3;this.v.send("mixer-treble-right",a-(16>a?14:16))});Id(70);
Jd(70,function(a){this.L[70]=a;a>>>=3;this.v.send("mixer-bass-right",a-(16>a?14:16))});Id(71);Jd(71,function(a){this.L[71]=a;a>>>=3;this.v.send("mixer-bass-right",a-(16>a?14:16))});Id(128,function(){switch(this.$){case 2:return 1;case 5:return 2;case 7:return 4;case 10:return 8;default:return 0}});Jd(128,function(a){a&1&&(this.$=2);a&2&&(this.$=5);a&4&&(this.$=7);a&8&&(this.$=10)});
Id(129,function(){var a=0;switch(this.Nb){case 0:a|=1;break;case 1:a|=2;break;case 3:a|=8}switch(this.Wc){case 5:a|=32;break;case 6:a|=64;break;case 7:a|=128}return a});Jd(129,function(a){a&1&&(this.Nb=0);a&2&&(this.Nb=1);a&8&&(this.Nb=3);a&32&&(this.Wc=5);a&64&&(this.Wc=6);a&128&&(this.Wc=7)});Id(130,function(){for(var a=32,b=0;16>b;b++)a|=b*this.cd[b];return a});ud.prototype.U=function(){};function Md(a,b){b||(b=ud.prototype.U);for(var c=0;c<a.length;c++)td[a[c]]=b}
function Nd(a,b){for(var c=[];a<=b;a++)c.push(a);return c}var S=new Uint8Array(32);S[0]=0;S[1]=1;S[2]=2;S[3]=3;S[4]=4;S[5]=5;S[8]=6;S[9]=7;S[10]=8;S[11]=9;S[12]=10;S[13]=11;S[16]=12;S[17]=13;S[18]=14;S[19]=15;S[20]=16;S[21]=17;Md([1],function(a,b){this.Uh[b]=a&1});Md([2]);Md([3]);Md([4],function(){});Md([5],function(){});Md([8],function(){});Md(Nd(32,53),function(){});Md(Nd(64,85),function(){});Md(Nd(96,117),function(){});Md(Nd(128,149),function(){});Md(Nd(160,168),function(){});Md(Nd(176,184),function(){});
Md([189],function(){});Md(Nd(192,200),function(){});Md(Nd(224,245),function(){});function Gd(a,b){a.bb=b;a.v.send("dac-tell-sampling-rate",b)}function Ed(a){a.D=1+(a.Aa.shift()<<0)+(a.Aa.shift()<<8)}function Fd(a){a.h=1;a.vb&&(a.h*=2);a.l=a.D*a.h;a.j=1024*a.h;a.j=Math.min(Math.max(a.l>>2&-4,32),a.j);a.C=!0;a.gb.Xb[a.hb]||a.ia(a.hb)}ud.prototype.ia=function(a){a===this.hb&&this.C&&(this.C=!1,this.Mb=this.l,this.Ob=!1,this.v.send("dac-enable"))};
function xd(a){var b=Math.min(a.Mb,a.j),c=Math.floor(b/a.h);a.gb.ie(a.Ma,0,b,a.hb,d=>{if(!d){d=a.vb?32767.5:127.5;var e=a.wb?0:-1,f=a.Yc?1:2,k;a.vb?k=a.wb?a.X:a.aa:k=a.wb?a.Z:a.B;for(var g=0,h=0;h<c;h++)for(var l=Dd(k[h]/d+e),n=0;n<f;n++)a.Jb[g].push(l),g^=1;wd(a);a.Mb-=b;a.Mb||(a.Da(a.$b),a.Lb&&(a.Mb=a.l))}})}function wd(a){if(a.Jb[0].length){var b=Bb(a.Jb[0],a.Jb[0].length),c=Bb(a.Jb[1],a.Jb[1].length);a.v.send("dac-send-data",[b,c],[b.buffer,c.buffer])}}
ud.prototype.Da=function(a){this.cd[a]=1;this.s.Pa(this.$)};function zd(a,b){a.cd[b]=0;M(a.s,a.$)}function Dd(a){return-1*(-1>a)+1*(1<a)+(-1<=a&&1>=a)*a};function da(a,b){this.s=a;this.Ha=a.u.Ha;this.Me=b.Me;this.J=[244,26,b.Me&255,b.Me>>8,7,5,16,0,1,0,2,0,0,0,0,0,1,168,0,0,0,16,191,254,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,26,b.Yg&255,b.Yg>>8,0,0,0,0,64,0,0,0,0,0,0,0,0,1,0,0];this.J=this.J.concat(Array(256-this.J.length).fill(0));this.Ia=b.Ia;this.kb=[];this.name=b.name;this.i=this.C=0;this.l=new Uint32Array(4);this.h=new Uint32Array(4);for(var c of b.Ke.eg)this.l[c>>>5]|=1<<(c&31),this.h[c>>>5]|=1<<(c&31);b.Ke.eg.includes(32);this.B=!0;this.j=
0;this.F=!1;this.D=0;this.$a=[];for(const d of b.Ke.$a)this.$a.push(new Od(a,this,d));this.o=0;this.g=this.$a[0];this.ic=0;c=[];c.push(Pd(this,b.Ke));c.push(Qd(b.notification));c.push(Rd(this,b.ic));b.$f&&(b=b.$f,c.push.call(c,{type:4,Dd:3,port:b.ad,Ee:!1,offset:0,ke:new Uint8Array(0),wd:b.wd}));Sd(this,c);Ob(a.u.Ha,this);this.reset()}
function Pd(a,b){return{type:1,Dd:0,port:b.ad,Ee:!1,offset:0,ke:new Uint8Array(0),wd:[{bytes:4,name:"device_feature_select",read:()=>a.C,write:c=>{a.C=c}},{bytes:4,name:"device_feature",read:()=>a.l[a.C]||0,write:()=>{}},{bytes:4,name:"driver_feature_select",read:()=>a.i,write:c=>{a.i=c}},{bytes:4,name:"driver_feature",read:()=>a.h[a.i]||0,write:c=>{const d=a.l[a.i];a.i<a.h.length&&(a.h[a.i]=c&d);a.B=a.B&&!(c&~d)}},{bytes:2,name:"msix_config",read:()=>65535,write:()=>{}},{bytes:2,name:"num_queues",
read:()=>a.$a.length,write:()=>{}},{bytes:1,name:"device_status",read:()=>a.j,write:c=>{0===c&&a.reset();c&~a.j&4&&a.j&64&&(a.F=!0,a.j&4&&a.Da(2));a.B||(c&=-9);a.j=c}},{bytes:1,name:"config_generation",read:()=>a.D,write:()=>{}},{bytes:2,name:"queue_select",read:()=>a.o,write:c=>{a.o=c;a.o<a.$a.length||(a.g=null)}},{bytes:2,name:"queue_size",read:()=>a.g?a.g.size:0,write:c=>{if(a.g){c&c-1&&(c=1<<pb(c-1)+1);c>a.g.Nc&&(c=a.g.Nc);var d=a.g;d.size=c;d.o=c-1}}},{bytes:2,name:"queue_msix_vector",read:()=>
65535,write:()=>{}},{bytes:2,name:"queue_enable",read:()=>a.g?a.g.enabled|0:0,write:c=>{a.g&&1===c&&(c=a.g,c.l&&c.h&&c.g&&(a.g.enabled=!0))}},{bytes:2,name:"queue_notify_off",read:()=>a.g?a.g.se:0,write:()=>{}},{bytes:4,name:"queue_desc (low dword)",read:()=>a.g?a.g.l:0,write:c=>{a.g&&(a.g.l=c)}},{bytes:4,name:"queue_desc (high dword)",read:()=>0,write:()=>{}},{bytes:4,name:"queue_avail (low dword)",read:()=>a.g?a.g.h:0,write:c=>{a.g&&(a.g.h=c)}},{bytes:4,name:"queue_avail (high dword)",read:()=>
0,write:()=>{}},{bytes:4,name:"queue_used (low dword)",read:()=>a.g?a.g.g:0,write:c=>{a.g&&(a.g.g=c)}},{bytes:4,name:"queue_used (high dword)",read:()=>0,write:()=>{}}]}}function Qd(a){const b=[];let c;c=a.Vj?0:2;for(const [d,e]of a.Zh.entries())b.push({bytes:2,name:"notify"+d,read:()=>65535,write:e||(()=>{})});return{type:2,Dd:1,port:a.ad,Ee:!1,offset:0,ke:new Uint8Array([c&255,c>>8&255,c>>16&255,c>>24]),wd:b}}
function Rd(a,b){return{type:3,Dd:2,port:b.ad,Ee:!1,offset:0,ke:new Uint8Array(0),wd:[{bytes:1,name:"isr_status",read:()=>{const c=a.ic;a.ic=0;fc(a.Ha,a.Ia);return c},write:()=>{}}]}}
function Sd(a,b){let c=a.J[52]=64;var d=c;for(const f of b){b=16+f.ke.length;d=c;c=d+b;var e=f.wd.reduce((k,g)=>k+g.bytes,0);e+=f.offset;e=16>e?16:1<<pb(e-1)+1;a.kb[f.Dd]={size:e};a.J[d]=9;a.J[d+1]=c;a.J[d+2]=b;a.J[d+3]=f.type;a.J[d+4]=f.Dd;a.J[d+5]=0;a.J[d+6]=0;a.J[d+7]=0;a.J[d+8]=f.offset&255;a.J[d+9]=f.offset>>>8&255;a.J[d+10]=f.offset>>>16&255;a.J[d+11]=f.offset>>>24;a.J[d+12]=e&255;a.J[d+13]=e>>>8&255;a.J[d+14]=e>>>16&255;a.J[d+15]=e>>>24;for(const [k,g]of f.ke.entries())a.J[d+16+k]=g;d=16+4*
f.Dd;a.J[d]=f.port&254|!f.Ee;a.J[d+1]=f.port>>>8&255;a.J[d+2]=f.port>>>16&255;a.J[d+3]=f.port>>>24&255;d=f.port+f.offset;for(const k of f.wd){let g=k.read;b=k.write;if(!f.Ee){e=function(l){return g(l&-2)>>((l&1)<<3)&255};const h=function(l){return g(l&-4)>>((l&3)<<3)&255};switch(k.bytes){case 4:J(a.s.A,d,a,h,void 0,g);K(a.s.A,d,a,void 0,void 0,b);break;case 2:J(a.s.A,d,a,e,g);K(a.s.A,d,a,void 0,b);break;case 1:J(a.s.A,d,a,g),K(a.s.A,d,a,b)}}d+=k.bytes}}a.J[c]=9;a.J[c+1]=0;a.J[c+2]=20;a.J[c+3]=5;a.J[c+
4]=0;a.J[c+5]=0;a.J[c+6]=0;a.J[c+7]=0;a.J[c+8]=0;a.J[c+9]=0;a.J[c+10]=0;a.J[c+11]=0;a.J[c+12]=0;a.J[c+13]=0;a.J[c+14]=0;a.J[c+15]=0;a.J[c+16]=0;a.J[c+17]=0;a.J[c+18]=0;a.J[c+19]=0}da.prototype.Y=function(){let a=[];a[0]=this.C;a[1]=this.i;a[2]=this.l;a[3]=this.h;a[4]=this.B;a[5]=this.j;a[6]=this.F;a[7]=this.D;a[8]=this.ic;a[9]=this.o;return a=a.concat(this.$a)};
da.prototype.G=function(a){this.C=a[0];this.i=a[1];this.l=a[2];this.h=a[3];this.B=a[4];this.j=a[5];this.F=a[6];this.D=a[7];this.ic=a[8];this.o=a[9];let b=0;for(let c of a.slice(10))this.$a[b].G(c),b++;this.g=this.$a[this.o]||null};da.prototype.reset=function(){this.i=this.C=0;this.h.set(this.l);this.B=!0;this.o=this.j=0;this.g=this.$a[0];for(const a of this.$a)a.reset();this.F=!1;this.ic=this.D=0;fc(this.Ha,this.Ia)};da.prototype.Da=function(a){this.ic|=a;this.Ha.Da(this.Ia)};
function Od(a,b,c){this.s=a;this.eb=b;this.Nc=this.size=c.Nc;this.o=this.size-1;this.enabled=!1;this.se=c.se;this.i=this.g=this.j=this.h=this.l=0;this.reset()}Od.prototype.Y=function(){const a=[];a[0]=this.size;a[1]=this.Nc;a[2]=this.enabled;a[3]=this.se;a[4]=this.l;a[5]=this.h;a[6]=this.j;a[7]=this.g;a[8]=this.i;return a};Od.prototype.G=function(a){this.size=a[0];this.Nc=a[1];this.enabled=a[2];this.se=a[3];this.l=a[4];this.h=a[5];this.j=a[6];this.g=a[7];this.i=a[8];this.o=this.size-1};
Od.prototype.reset=function(){this.enabled=!1;this.i=this.g=this.j=this.h=this.l=0;var a=this.Nc;this.size=a;this.o=a-1};function ea(a){return(a.s.Ja(a.h+2)&a.o)!==a.j}
function fa(a,b){this.s=a.s;this.eb=a.eb;this.$h=b;this.i=[];this.vf=this.g=this.h=0;this.Sf=[];this.wf=this.He=this.Rf=0;let c=a.l;var d=b;b=0;let e=a.size,f=!1;const k=0<(this.eb.h[0]&268435456);do{var g=a,h=c;g={mf:g.s.B(h+16*d),pk:g.s.B(h+16*d+4),Se:g.s.B(h+16*d+8),flags:g.s.Ja(h+16*d+12),next:g.s.Ja(h+16*d+14)};if(k&&g.flags&4)c=g.mf,b=d=0,e=g.Se/16;else{if(g.flags&2)f=!0,this.Sf.push(g);else{if(f)break;this.i.push(g);this.vf+=g.Se}b++;if(b>e)break;if(g.flags&1)d=g.next;else break}}while(1)}
function la(a,b){let c=0,d=b.length;for(;d&&a.h!==a.i.length;){var e=a.i[a.h],f=e.mf+a.g;let l=e.Se-a.g;l>d?(l=d,a.g+=d):(a.h++,a.g=0);e=b;var k=e.set,g=a.s,h=l;h&&(g.Re(f),g.Re(f+h-1));k.call(e,g.Qa.subarray(f,f+h),c);c+=l;d-=l}};function Td(){this.re={};this.g=void 0}Td.prototype.register=function(a,b,c){var d=this.re[a];void 0===d&&(d=this.re[a]=[]);d.push({Oe:b,Lf:c})};Td.prototype.unregister=function(a,b){var c=this.re[a];void 0!==c&&(this.re[a]=c.filter(function(d){return d.Oe!==b}))};Td.prototype.send=function(a,b){if(this.g&&(a=this.g.re[a],void 0!==a))for(var c=0;c<a.length;c++){var d=a[c];d.Oe.call(d.Lf,b)}};function Ud(){var a=new Td,b=new Td;a.g=b;b.g=a;return[a,b]};function Vd(){};function eb(a,b){this.xa=b;Wd(this);b=Object.create(null);b.m=this.xa.exports.memory;for(var c of Object.keys(this.xa.exports))c.startsWith("_")||c.startsWith("ZSTD")||c.startsWith("zstd")||c.endsWith("_js")||(b[c]=this.xa.exports[c]);this.gh=b;this.uc=c=this.xa.exports.memory;this.K=L(Uint32Array,c,812,1);this.Qa=new Uint8Array(0);this.bh=new Int32Array(this.Qa.buffer);this.D=L(Uint8Array,c,724,8);this.j=L(Int32Array,c,736,8);this.o=L(Uint32Array,c,768,8);this.aa=L(Int32Array,c,800,1);this.bc=L(Int32Array,
c,564,1);this.Ib=L(Int32Array,c,568,1);this.qb=L(Int32Array,c,572,1);this.pb=L(Int32Array,c,576,1);this.Ef=L(Int32Array,c,1128,1);this.hc=L(Uint32Array,c,540,8);this.ra=L(Int32Array,c,580,8);this.C=L(Uint8Array,c,612,1);this.R=L(Int32Array,c,804,1);this.M=L(Int32Array,c,808,1);this.F=L(Uint8Array,c,616,1);this.sb=L(Int32Array,c,620,1);this.Qg=L(Int32Array,c,624,1);this.Dc=L(Int32Array,c,636,1);this.Af=L(Int32Array,c,640,1);this.Td=L(Int32Array,c,644,1);this.jc=L(Int32Array,c,648,1);this.flags=L(Int32Array,
c,120,1);this.Eb=L(Int32Array,c,116,1);this.cc=L(Int32Array,c,96,1);this.ec=L(Int32Array,c,104,1);this.hh=L(Int32Array,c,112,1);this.hk=L(Uint32Array,c,960,2);this.u={};this.I=L(Int32Array,c,556,1);this.kc=L(Int32Array,c,560,1);L(Uint8Array,c,548,1);this.ia=L(Uint8Array,c,552,1);this.U=[];this.Z=[];this.fc=[];this.X=[];this.Ed={vg:null,$d:null};this.ng=L(Uint32Array,c,664,1);this.g=L(Int32Array,c,64,8);this.Fb=L(Int32Array,c,1152,32);this.nb=L(Uint8Array,c,816,1);this.nb[0]=255;this.ob=L(Uint8Array,
c,1032,1);this.ob[0]=0;this.Ma=L(Uint16Array,c,1036,1);this.Ma[0]=895;this.Sg=L(Uint16Array,c,1040,1);this.Sg[0]=0;this.Wa=L(Int32Array,c,1048,1);this.Wa[0]=0;this.Xa=L(Int32Array,c,1052,1);this.Xa[0]=0;this.mb=L(Int32Array,c,1044,1);this.mb[0]=0;this.Na=L(Int32Array,c,1056,1);this.Na[0]=0;this.Oa=L(Int32Array,c,1060,1);this.Oa[0]=0;this.lc=L(Int32Array,c,832,32);this.ih=L(Int32Array,c,824,1);this.h=L(Uint16Array,c,668,8);this.N=L(Int32Array,c,684,8);this.Ya=[];this.tf=0;this.kd=[];this.A=void 0;
this.v=a;this.nc(0,0);Xd(this)}
function Wd(a){const b=c=>{const d=a.xa.exports[c];console.assert(d,"Missing import: "+c);return d};b("getiopl");a.uh=b("vm86_mode");a.eh=b("get_eflags");a.rb=b("get_eflags_no_arith");a.th=b("update_eflags");a.lb=b("trigger_gp");a.rh=b("trigger_np");a.sh=b("trigger_ss");a.oh=b("switch_cs_real_mode");a.tb=b("pic_call_irq");a.dh=b("do_many_cycles_native");b("cycle_internal");a.ab=b("read8");a.Ja=b("read16");a.B=b("read32s");a.Ge=b("write8");a.Fe=b("write16");a.Oc=b("write32");a.Re=b("in_mapped_range");
a.kh=b("push16_js");a.lh=b("push32_js");b("set_stack_reg");b("fpu_load_tag_word");b("fpu_load_status_word");a.qh=b("translate_address_system_read_js");b("translate_address_system_write_js");a.Gb=b("get_seg_cs");b("adjust_stack_reg");a.fh=b("get_real_eip");b("get_stack_pointer");a.vh=b("writable_or_pagefault_js");a.i=b("safe_write32_js");a.l=b("safe_read32s_js");a.mh=b("safe_write16_js");a.H=b("safe_read16_js");a.fk=b("clear_tlb");a.$g=b("full_clear_tlb");a.nc=b("set_tsc");a.nh=b("store_current_tsc");
b("fpu_get_sti_f64");a.ah=b("jit_clear_cache_js");a.bi=b("jit_dirty_cache");a.gk=b("codegen_finalize_finished");a.dk=b("allocate_memory");a.wh=b("zero_memory");a.ik=b("zstd_create_ctx");a.kk=b("zstd_get_src_ptr");a.jk=b("zstd_free_ctx");a.Ie=b("zstd_read");a.Je=b("zstd_read_free")}p=eb.prototype;
p.Y=function(){var a=[];a[0]=this.K[0];a[1]=this.D;a[2]=this.j;a[3]=this.o;a[4]=this.aa[0];a[5]=this.Ib[0];a[6]=this.bc[0];a[7]=this.pb[0];a[8]=this.qb[0];a[9]=this.hc[0];a[10]=this.ra;a[11]=this.C[0];a[13]=this.R[0];a[16]=this.M[0];a[17]=this.F[0];a[18]=this.sb[0];a[19]=this.Qg[0];a[22]=this.Dc[0];a[23]=this.Td[0];a[24]=this.Af[0];a[25]=this.jc[0];a[26]=this.flags[0];a[27]=this.Eb[0];a[28]=this.cc[0];a[30]=this.ec[0];a[37]=this.I[0];a[38]=this.kc[0];a[39]=this.g;a[40]=this.h;a[41]=this.N;this.nh();
a[43]=this.hk;a[45]=this.u.Qf;a[46]=this.u.Pc;a[47]=this.u.Lc;a[48]=this.u.Ha;a[49]=this.u.gb;a[50]=this.u.fb;a[51]=this.u.mg;a[52]=this.u.$d;a[53]=this.u.Cf;a[54]=this.u.Of;a[55]=this.u.qf;a[56]=this.u.qa;a[57]=this.u.V;a[58]=this.u.Ye;a[59]=this.u.yf;a[60]=this.u.pc;a[61]=this.u.If;a[62]=this.Ya;a[63]=this.u.Bc;a[64]=this.Ef[0];a[66]=this.lc;a[67]=this.Fb;a[68]=this.nb[0];a[69]=this.ob[0];a[70]=this.Ma[0];a[71]=this.Wa[0];a[72]=this.Xa[0];a[73]=this.Na[0];a[74]=this.Oa[0];a[75]=this.mb[0];var b=
this.Qa.length>>12;var c=[];for(var d=0;d<b;d++){var e=d<<12;e=this.bh.subarray(e>>2,e+4096>>2);let g=!0;for(let h=0;h<e.length;h++)if(0!==e[h]){g=!1;break}g||c.push(d)}b=new Cb(b);d=new Uint8Array(c.length<<12);for(let [g,h]of c.entries())b.set(h,1),c=h<<12,d.set(this.Qa.subarray(c,c+4096),g<<12);c={xh:b,li:d};const {li:f,xh:k}=c;a[77]=f;a[78]=new Uint8Array(k.Qb());a[79]=this.u.yd;a[80]=this.u.hf;a[81]=this.u.jf;return a};
p.G=function(a){this.K[0]=a[0];this.Qa.length!==this.K[0]&&console.warn("Note: Memory size mismatch. we="+this.Qa.length+" state="+this.K[0]);this.D.set(a[1]);this.j.set(a[2]);this.o.set(a[3]);this.aa[0]=a[4];this.Ib[0]=a[5];this.bc[0]=a[6];this.pb[0]=a[7];this.qb[0]=a[8];this.hc[0]=a[9];this.ra.set(a[10]);this.C[0]=a[11];this.R[0]=a[13];this.M[0]=a[16];this.F[0]=a[17];this.sb[0]=a[18];this.Qg[0]=a[19];this.Dc[0]=a[22];this.Td[0]=a[23];this.Af[0]=a[24];this.jc[0]=a[25];this.flags[0]=a[26];this.Eb[0]=
a[27];this.cc[0]=a[28];this.ec[0]=a[30];this.I[0]=a[37];this.kc[0]=a[38];this.g.set(a[39]);this.h.set(a[40]);this.N.set(a[41]);this.nc(a[43][0],a[43][1]);this.u.Qf&&this.u.Qf.G(a[45]);this.u.Pc&&this.u.Pc.G(a[46]);this.u.Lc&&this.u.Lc.G(a[47]);this.u.Ha&&this.u.Ha.G(a[48]);this.u.gb&&this.u.gb.G(a[49]);this.u.fb&&this.u.fb.G(a[50]);this.u.mg&&this.u.mg.G(a[51]);this.u.$d&&this.u.$d.G(a[52]);this.u.Cf&&this.u.Cf.G(a[53]);this.u.Of&&this.u.Of.G(a[54]);this.u.qf&&this.u.qf.G(a[55]);this.u.qa&&this.u.qa.G(a[56]);
this.u.V&&this.u.V.G(a[57]);this.u.Ye&&this.u.Ye.G(a[58]);this.u.yf&&this.u.yf.G(a[59]);this.u.pc&&this.u.pc.G(a[60]);this.u.If&&this.u.If.G(a[61]);this.u.yd&&this.u.yd.G(a[79]);this.u.hf&&this.u.yd.G(a[80]);this.u.jf&&this.u.yd.G(a[81]);this.Ya=a[62];this.u.Bc&&this.u.Bc.G(a[63]);this.Ef[0]=a[64];this.lc.set(a[66]);this.Fb.set(a[67]);this.nb[0]=a[68];this.ob[0]=a[69];this.Ma[0]=a[70];this.Wa[0]=a[71];this.Xa[0]=a[72];this.Na[0]=a[73];this.Oa[0]=a[74];this.mb[0]=a[75];{var b=new Cb(a[78].buffer);
a=a[77];this.wh(this.K[0]);const c=this.K[0]>>12;let d=0;for(let e=0;e<c;e++)if(b.get(e)){let f=d<<12;this.Qa.set(a.subarray(f,f+4096),e<<12);d++}}this.$g();this.ah()};
p.reset=function(){this.D.fill(0);this.o.fill(0);this.j.fill(0);this.g.fill(0);this.h.fill(0);this.N.fill(0);this.Fb.fill(0);this.nb[0]=255;this.ob[0]=0;this.Ma[0]=895;this.Sg[0]=0;this.Wa[0]=0;this.Xa[0]=0;this.mb[0]=0;this.Na[0]=0;this.Oa[0]=0;this.lc.fill(0);this.ih[0]=8064;this.$g();this.aa[0]=0;this.bc[0]=0;this.Ib[0]=0;this.qb[0]=0;this.pb[0]=0;this.hc[0]=0;this.ra[0]=1610612752;this.ra[2]=0;this.ra[3]=0;this.ra[4]=0;this.N[6]=-61456;this.N[7]=1024;this.C[0]=0;this.R[0]=0;this.M[0]=0;this.jc[0]=
0;this.sb[0]=-1;this.ng[0]=0;this.kc[0]=0;this.F[0]=0;this.Dc[0]=0;this.Af[0]=0;this.Td[0]=0;this.flags[0]=2;this.Eb.fill(0);this.hh.fill(0);this.cc.fill(0);this.ec.fill(0);this.nc(0,0);this.I[0]=1048560;this.oh(61440);Yd(this,2,48);this.g[4]=256;this.u.eb&&this.u.eb.reset();this.Ya=[];this.ah()};
function Zd(a,b){1048576>b?b=1048576:0>(b|0)&&(b=Math.pow(2,31)-131072);b=(b-1|131071)+1|0;console.assert(0===a.K[0],"Expected uninitialised memory");a.K[0]=b;const c=a.dk(b);a.Qa=L(Uint8Array,a.uc,c,b);a.bh=L(Uint32Array,a.uc,c,b>>2)}
p.jb=function(a,b){Zd(this,"number"===typeof a.K?a.K:67108864);this.ia[0]=+a.fb;this.reset();var c=new ab(this);this.A=c;this.Ed.vg=a.Ed;this.Ed.$d=a.ck;kb(this);if(a.xc){const {ki:e}=$d(this.Qa,a.xc,a.Od,a.ee||"");e&&this.kd.push(e)}J(c,179,this,function(){return 0});var d=0;J(c,146,this,function(){return d});K(c,146,this,function(e){d=e});J(c,1297,this,function(){return this.tf<this.Ya.length?this.Ya[this.tf++]:0});K(c,1296,this,void 0,function(e){function f(h){return new Uint8Array((new Int32Array([h])).buffer)}
function k(h){return h>>8|h<<8&65280}function g(h){return h<<24|h<<8&16711680|h>>8&65280|h>>>24}this.tf=0;if(0===e)this.Ya=f(1431127377);else if(1===e)this.Ya=f(0);else if(3===e)this.Ya=f(this.K[0]);else if(5===e)this.Ya=f(1);else if(15===e)this.Ya=f(1);else if(13===e)this.Ya=new Uint8Array(16);else if(25===e){e=new Int32Array(4+64*this.kd.length);const h=new Uint8Array(e.buffer);e[0]=g(this.kd.length);for(let l=0;l<this.kd.length;l++){const {name:n,data:m}=this.kd[l],w=4+64*l;e[w>>2]=g(m.length);
e[w+4>>2]=k(49152+l);for(let q=0;q<n.length;q++)h[w+8+q]=n.charCodeAt(q)}this.Ya=h}else this.Ya=32768<=e&&49152>e?f(0):49152<=e&&e-49152<this.kd.length?this.kd[e-49152].data:f(0)});this.u={};a.ci&&(this.u.pc=new Oc(this),this.u.Ha=new bc(this),this.ia[0]&&(this.u.Bc=new dd(this),this.u.Pc=new Xc(this),this.u.fb=new Vc(this)),this.u.Lc=new Pc(this),ae(this,this.u.Lc,a),this.u.gb=new jc(this),this.u.$d=new vc(this,b,a.na||8388608),this.u.Cf=new Kc(this,b),this.u.Of=new Sc(this,1016,b),a.yd&&(this.u.yd=
new Sc(this,760,b)),a.hf&&(this.u.hf=new Sc(this,1E3,b)),a.jf&&(this.u.jf=new Sc(this,1E3,b)),this.u.qf=new gc(this,a.sa),c=0,a.V&&(this.u.V=new Db(this,a.V,a.Pe,!1,c++,b)),a.qa&&(this.u.qa=new Db(this,a.qa,void 0,!0,c++,b)),this.u.Ye=new oc(this,b),a.Qh&&(this.u.yf=new jd(this,b,a.rc)),a.Pb&&(this.u.Qf=new ca(a.Pb,this,b)),this.u.If=new ud(this,b));a.Rd&&be(this,a.Rd)};
function be(a,b){if(8192>b.byteLength){var c=new Int32Array(2048);(new Uint8Array(c.buffer)).set(new Uint8Array(b))}else c=new Int32Array(b,0,2048);for(var d=0;8192>d;d+=4)if(464367618===c[d>>2]){var e=c[d+4>>2];if(!(464367618+e+c[d+8>>2]|0)){a.g[0]=732803074;a.g[3]=31744;a.Oc(31744,0);a.ra[0]=1;a.aa[0]=1;a.flags[0]=2;ce(a,!0);a.M[0]=1;for(var f=0;6>f;f++)a.D[f]=0,a.j[f]=0,a.o[f]=4294967295,a.h[f]=45058;if(e&65536){var k=c[d+16>>2];f=c[d+20>>2];e=c[d+28>>2];b=new Uint8Array(b,d-(c[d+12>>2]-k),0===
f?void 0:f-k);ka(a,b,k);a.I[0]=a.Gb()+e|0}else if(1179403647===c[0]){c=de(b);a.I[0]=a.Gb()+c.ai.Rh|0;for(k of c.Lj)0!==k.type&&1===k.type&&k.xg+k.hi<a.K[0]&&k.fg&&(c=new Uint8Array(b,k.offset,k.fg),ka(a,c,k.xg))}a.A.Vb(244,a,function(g){console.log("Test exited with code "+wb(g,2));throw"HALT";},function(){},function(){},function(){});for(let g=14;15>=g;g++)K(a.A,8192+g,a,function(h){h?this.Pa(g):M(this,g)});break}}}
function ae(a,b,c){var d=c.Tc||531;b.S[56]=1|d>>4&240;b.S[61]=d&255;b.S[21]=128;b.S[22]=2;d=0;1048576<=a.K[0]&&(d=a.K[0]-1048576>>10,d=Math.min(d,65535));b.S[23]=d&255;b.S[24]=d>>8&255;b.S[48]=d&255;b.S[49]=d>>8&255;d=0;16777216<=a.K[0]&&(d=a.K[0]-16777216>>16,d=Math.min(d,65535));b.S[52]=d&255;b.S[53]=d>>8&255;b.S[91]=0;b.S[92]=0;b.S[93]=0;b.S[20]=47;b.S[95]=0;c.Sh&&(b.S[63]=1)}
function kb(a){var b=a.Ed.vg,c=a.Ed.$d;if(b){var d=new Uint8Array(b);ka(a,d,1048576-b.byteLength);if(c){var e=new Uint8Array(c);ka(a,e,786432);cb(a.A,4272947200,1048576,function(f){f=f-4272947200|0;return f<e.length?e[f]:0},function(){})}cb(a.A,4293918720,1048576,function(f){return this.Qa[f&1048575]}.bind(a),function(f,k){this.Qa[f&1048575]=k}.bind(a))}}
function ee(a,b,c,d,e,f){const k=new Uint8Array(a.uc.buffer,e>>>0,f>>>0);WebAssembly.instantiate(k,{e:a.gh}).then(g=>{g=g.instance.exports.f;a.gk(b,c,d);a.xa.lf.set(b+1024,g);a.ph&&a.ph(k)})}function gb(a){return a.rb()&512?(ib(a,hb()),jb(a),0):100}function ib(a,b){a.u.Ye.Cb(b,!1);a.u.Lc.Cb(b,!1);a.ia[0]&&(a.u.fb.Cb(b),a.u.Pc.Cb(b))}function jb(a){a.rb()&512&&fe(a)}function fe(a){a.rb();a.u.pc&&a.u.pc.ae();a.u.Pc&&a.u.Pc.ae()}p.Pa=function(a){this.u.pc&&this.u.pc.Zd(a);this.u.Bc&&this.u.Bc.Zd(a)};
function M(a,b){a.u.pc&&a.u.pc.de(b);a.u.Bc&&a.u.Bc.de(b)}function ce(a,b){b=!!b;!!a.R[0]!==b&&(a.R[0]=+b)}
function ge(a,b){var c=0===(b&4),d=b&-8;var e={df:b&3,sf:c,dd:!1,qe:!0,Sc:0,Wb:0,flags:0,type:0,Xc:0,Qd:!1,ed:!1,pe:!1,Hf:!1,Le:!1,size:!1,og:!1,Zc:0,sg:!1,rg:!1,Ce:0,Mj:0,Nj:0};if(c){var f=a.pb[0];var k=a.qb[0]}else f=a.j[7],k=a.o[7];if(c&&0===d)return e.dd=!0,e;if((b|7)>k)return e.qe=!1,e;f=f+d|0;a.ra[0]&-2147483648&&(f=a.qh(f));e.Ce=f;e.Sc=a.Ja(f+2|0)|a.ab(f+4|0)<<16|a.ab(f+7|0)<<24;e.Wb=a.ab(f+5|0);e.flags=a.ab(f+6|0)>>4;e.Mj=a.B(f|0);e.Nj=a.B(f+4|0);e.type=e.Wb&15;e.Xc=e.Wb>>5&3;e.Qd=0===(e.Wb&
16);e.ed=128===(e.Wb&128);e.pe=8===(e.Wb&8);e.Hf=2===(e.Wb&2);e.Le=4===(e.Wb&4);e.og=e.Le&&e.pe;e.size=4===(e.flags&4);a=a.Ja(f)|(a.ab(f+6|0)&15)<<16;e.Zc=e.flags&8?(a<<12|4095)>>>0:a;e.sg=e.Hf&&!e.pe;e.rg=e.Hf||!e.pe;return e}
function Yd(a,b,c){if(!a.aa[0]||a.uh())return a.h[b]=c,a.D[b]=0,a.j[b]=c<<4,2===b&&(a.M[0]=0),!0;var d=ge(a,c);if(2===b){if(d.dd)return a.lb(0),!1;if(!d.qe||d.Qd||d.df!==a.C[0]||!d.sg||d.Xc!==a.C[0])return a.lb(c&-4),!1;if(!d.ed)return a.sh(c&-4),!1;a.M[0]=d.size}else if(1!==b){if(d.dd)return a.h[b]=c,a.D[b]=1,!0;if(!d.qe||d.Qd||!d.rg||!d.og&&(d.df>d.Xc||a.C[0]>d.Xc))return a.lb(c&-4),!1;if(!d.ed)return a.rh(c&-4),!1}a.D[b]=0;a.o[b]=d.Zc;a.j[b]=d.Sc;a.h[b]=c;return!0}
p.di=function(a){var b=ge(this,a);if(!b.sf)throw this.debug.ua("TR can only be loaded from GDT");if(b.dd)throw this.debug.ua("#GP handler");if(!b.Qd)throw this.debug.ua("#GP handler (happens when running kvm-unit-test without ACPI)");if(9!==b.type&&1!==b.type)throw this.debug.ua("#GP handler");if(!b.ed)throw this.debug.ua("#NT handler");this.Ef[0]=9===b.type;this.j[6]=b.Sc;this.o[6]=b.Zc;this.h[6]=a;this.Ge(b.Ce+5|0,this.ab(b.Ce+5|0)|2)};
p.tg=function(a){var b=ge(this,a);if(b.dd)this.j[7]=0,this.o[7]=0;else{if(!b.sf)throw this.debug.ua("LDTR can only be loaded from GDT");if(!b.ed)throw this.debug.ua("#GP handler");if(!b.Qd)throw this.debug.ua("#GP handler");if(2!==b.type)throw this.debug.ua("#GP handler");this.j[7]=b.Sc;this.o[7]=b.Zc;this.h[7]=a}};"undefined"!==typeof window?window.CPU=eb:"undefined"!==typeof module&&"undefined"!==typeof module.exports?module.exports.CPU=eb:"function"===typeof importScripts&&(self.CPU=eb);function Xd(a){var b={};a.debug=b;b.Wk=!1;b.Ok=void 0;b.sk=[];b.Xk=!1;b.show=function(f){if("undefined"!==typeof document){var k=document.getElementById("log");if(k){k.textContent+=f+"\n";k.style.display="block";k.scrollTop=1E9;return}}console.log(f)};b.jb=function(){};b.Hk=function(){for(var f={eax:0,ecx:1,edx:2,ebx:3,esp:4,ebp:5,esi:6,edi:7},k="eax ecx edx ebx esp ebp esi edi".split(" "),g="",h="",l=0;4>l;l++)g+=k[l]+"="+wb(a.g[f[k[l]]]>>>0,8)+" ",h+=k[l+4]+"="+wb(a.g[f[k[l+4]]]>>>0,8)+" ";g+="  ds="+
wb(a.h[3],4)+" es="+wb(a.h[0],4)+" fs="+wb(a.h[4],4);h+="  gs="+wb(a.h[5],4)+" cs="+wb(a.h[1],4)+" ss="+wb(a.h[2],4);return[g,h]};b.zk=function(){};b.xk=function(){};b.Fk=function(){};b.Y=function(){};b.Bk=function(){};b.Ak=function(){};b.yk=function(){};b.vk=function(){};b.wk=function(){};b.Gk=function(){};b.Mk=function(){};b.Yk=function(){};b.step=function(){};b.Tk=function(){};b.ua=function(f){f="Unimplemented"+(f?": "+f:"");b.show(f);b.show("Execution stopped");return f};b.ei=function(){};b.tk=
function(){};let c,d;b.uk=function(f,k,g){if(!d){if(void 0===c&&(c="function"===typeof require?require("./capstone-x86.min.js"):window.cs,void 0===c))return;d=[new c.Capstone(c.ARCH_X86,c.MODE_16),new c.Capstone(c.ARCH_X86,c.MODE_32)]}try{d[f].disasm(k,g).forEach(function(h){Vd(wb(h.rk>>>0)+": "+vb(h.bytes.map(l=>wb(l,2).slice(-2)).join(" "),20)+" "+h.mnemonic+" "+h.op_str)})}catch(h){Vd("Could not disassemble: "+Array.from(k).map(l=>wb(l,2)).join(" "))}};let e;b.Ck=function(f){if(void 0===e&&(e=
"function"===typeof require?require("./libwabt.js"):new window.WabtModule,void 0===e))return;f=f.slice();try{var k=e.readWasm(f,{Sk:!1});k.generateNames();k.applyNames();k.toText({Ek:!0,Jk:!0})}catch(l){var g=new Blob([f]),h=document.createElement("a");h.download="failed.wasm";h.href=window.URL.createObjectURL(g);h.dataset.downloadurl=["application/octet-stream",h.download,h.href].join(":");h.click();window.URL.revokeObjectURL(h.src);console.log(l.toString())}finally{k&&k.Ba()}}};let he=DataView.prototype,ie={size:1,get:he.getUint8,set:he.setUint8},je={size:2,get:he.getUint16,set:he.setUint16},W={size:4,get:he.getUint32,set:he.setUint32},le=ke([{fi:W},{Ah:ie},{data:ie},{ak:ie},{Pk:ie},{mk:ie},{Qk:function(a){return{size:a,get:()=>-1}}(7)},{type:je},{Lk:je},{bk:W},{Rh:W},{ni:W},{Sj:W},{flags:W},{Mh:je},{Bg:je},{Cg:je},{Wg:je},{Xg:je},{Vk:je}]);console.assert(52===le.reduce((a,b)=>a+b.size,0));let me=ke([{type:W},{offset:W},{Zk:W},{xg:W},{fg:W},{hi:W},{flags:W},{align:W}]);
console.assert(32===me.reduce((a,b)=>a+b.size,0));let ne=ke([{name:W},{type:W},{flags:W},{nk:W},{offset:W},{size:W},{link:W},{info:W},{qk:W},{Dk:W}]);console.assert(40===ne.reduce((a,b)=>a+b.size,0));function ke(a){return a.map(function(b){var c=Object.keys(b);console.assert(1===c.length);c=c[0];b=b[c];console.assert(0<b.size);return{name:c,type:b,size:b.size,get:b.get,set:b.set}})}
function de(a){var b=new DataView(a);let [c,d]=oe(b,le);console.assert(52===d);console.assert(1179403647===c.fi,"Bad magic");console.assert(1===c.Ah,"Unimplemented: 64 bit elf");console.assert(1===c.data,"Unimplemented: big endian");console.assert(1===c.ak,"Bad version0");console.assert(2===c.type,"Unimplemented type");console.assert(1===c.bk,"Bad version1");console.assert(52===c.Mh,"Bad header size");console.assert(32===c.Bg,"Bad program header size");console.assert(40===c.Wg,"Bad section header size");
[a]=pe(new DataView(b.buffer,b.byteOffset+c.ni,c.Bg*c.Cg),me,c.Cg);[b]=pe(new DataView(b.buffer,b.byteOffset+c.Sj,c.Wg*c.Xg),ne,c.Xg);return{ai:c,Lj:a,Uk:b}}function oe(a,b){let c={},d=0;for(let e of b)b=e.get.call(a,d,!0),console.assert(void 0===c[e.name]),c[e.name]=b,d+=e.size;return[c,d]}function pe(a,b,c){let d=[],e=0;for(var f=0;f<c;f++){let [k,g]=oe(new DataView(a.buffer,a.byteOffset+e,void 0),b);d.push(k);e+=g}return[d,e]};function $d(a,b,c,d){var e=new Uint8Array(b);const f=new Uint16Array(b);var k=new Uint32Array(b),g=e[497]||4;if(43605===f[255]&&1400005704===(f[257]|f[258]<<16)){var h=e[529];e[528]=255;e[529]=h&-97|128;f[274]=56832;f[253]=65535;d+="\x00";k[138]=581632;for(e=0;e<d.length;e++)a[581632+e]=d.charCodeAt(e);g=512*(g+1);d=new Uint8Array(b,0,g);b=new Uint8Array(b,g);e=g=0;c&&(g=67108864,e=c.byteLength,a.set(new Uint8Array(c),g));k[134]=g;k[135]=e;a.set(d,524288);a.set(b,1048576);a=new Uint8Array(256);(new Uint16Array(a.buffer))[0]=
43605;a[2]=1;c=3;a[c++]=250;a[c++]=184;a[c++]=32768;a[c++]=128;a[c++]=142;a[c++]=192;a[c++]=142;a[c++]=216;a[c++]=142;a[c++]=224;a[c++]=142;a[c++]=232;a[c++]=142;a[c++]=208;a[c++]=188;a[c++]=57344;a[c++]=224;a[c++]=234;a[c++]=0;a[c++]=0;a[c++]=32800;a[c++]=128;k=a[c]=0;for(b=0;b<a.length;b++)k+=a[b];a[c]=-k;return{ki:{name:"genroms/kernel.bin",data:a}}}};var ya=16384,Fa=4;function qe(a){this.g=[];this.B=[];this.j=a;this.C={uf:0};this.h={};this.l=274877906944;this.o=0;this.i=[];xa(this,"",-1)}qe.prototype.Y=function(){let a=[];a[0]=this.g;a[1]=this.C.uf;a[2]=[];for(const [b,c]of Object.entries(this.h))0===(this.g[b].mode&ya)&&a[2].push([b,c]);a[3]=this.l;a[4]=this.o;return a=a.concat(this.i)};
qe.prototype.G=function(a){this.g=a[0].map(b=>{const c=new re(0);c.G(b);return c});this.C.uf=a[1];this.h={};for(let [b,c]of a[2])c.buffer.byteLength!==c.byteLength&&(c=c.slice()),this.h[b]=c;this.l=a[3];this.o=a[4];this.i=a.slice(5)};function ta(a,b,c){var d=a.g[b];0==d.status||2==d.status?c():5===d.status?ta(Y(a,d),d.g,c):a.B.push({id:b,lk:c})}
function se(a,b){if(3!==b.version)throw"The filesystem JSON format has changed. Please update your fs2json (https://github.com/copy/fs2json) and recreate the filesystem JSON.";var c=b.fsroot;a.o=b.size;for(b=0;b<c.length;b++)te(a,c[b],0)}
function te(a,b,c){var d=ue(a);const e=b[0];d.size=b[1];d.oc=b[2];d.Id=d.oc;d.Rc=d.oc;d.mode=b[3];d.uid=b[4];d.Ga=b[5];var f=d.mode&61440;if(f===ya)for(ve(a,d,c,e),c=a.g.length-1,b=b[6],d=0;d<b.length;d++)te(a,b[d],c);else 32768===f?(d.status=2,d.vd=b[6],ve(a,d,c,e)):40960===f&&(d.Be=b[6],ve(a,d,c,e))}function we(a,b,c,d){const e=a.g[c],f=a.g[b];Z(a,b);f.da.has(d);f.da.set(d,c);e.Ua++;Z(a,c)&&(e.da.has(".."),e.da.has(".")||e.Ua++,e.da.set(".",c),e.da.set("..",b),f.Ua++)}
function xe(a,b,c){const d=La(a,b,c),e=a.g[d],f=a.g[b];Z(a,b);f.da.delete(c)&&(e.Ua--,Z(a,d)&&(e.da.get(".."),e.da.delete(".."),f.Ua--))}function ve(a,b,c,d){-1!=c?(a.g.push(b),b.dc=a.g.length-1,we(a,c,b.dc,d)):0==a.g.length&&(a.g.push(b),b.da.set(".",0),b.da.set("..",0),b.Ua=2)}
function re(a){this.da=new Map;this.Ue=this.Te=this.oc=this.Rc=this.Id=this.dc=this.Ga=this.uid=this.size=this.status=0;this.Be="";this.mode=493;this.ya={type:0,version:0,path:a};this.Ua=0;this.vd="";this.h=[];this.g=this.i=-1}
re.prototype.Y=function(){const a=[];a[0]=this.mode;a[1]=(this.mode&61440)===ya?[...this.da]:32768===(this.mode&61440)?this.vd:40960===(this.mode&61440)?this.Be:49152===(this.mode&61440)?[this.Ue,this.Te]:null;a[2]=this.h;a[3]=this.status;a[4]=this.size;a[5]=this.uid;a[6]=this.Ga;a[7]=this.dc;a[8]=this.Id;a[9]=this.Rc;a[10]=this.oc;a[11]=this.ya.version;a[12]=this.ya.path;a[13]=this.Ua;return a};
re.prototype.G=function(a){this.mode=a[0];if((this.mode&61440)===ya){this.da=new Map;for(const [b,c]of a[1])this.da.set(b,c)}else 32768===(this.mode&61440)?this.vd=a[1]:40960===(this.mode&61440)?this.Be=a[1]:49152===(this.mode&61440)&&([this.Ue,this.Te]=a[1]);this.h=[];for(const b of a[2]){const c=new ye;c.G(b);this.h.push(c)}this.status=a[3];this.size=a[4];this.uid=a[5];this.Ga=a[6];this.dc=a[7];this.Id=a[8];this.Rc=a[9];this.oc=a[10];this.ya.type=(this.mode&61440)>>8;this.ya.version=a[11];this.ya.path=
a[12];this.Ua=a[13]};function ze(a,b){Object.assign(b,a,{dc:b.dc,da:b.da,Ua:b.Ua})}function ue(a){const b=Math.round(Date.now()/1E3);a=new re(++a.C.uf);a.Rc=a.Id=a.oc=b;return a}function xa(a,b,c){var d=a.g[c];if(0<=c&&5===d.status)return c=d.g,b=xa(Y(a,d),b,c),Ae(a,d.i,b);d=ue(a);d.mode=511|ya;0<=c&&(d.uid=a.g[c].uid,d.Ga=a.g[c].Ga,d.mode=a.g[c].mode&511|ya);d.ya.type=ya>>8;ve(a,d,c,b);return a.g.length-1}
function za(a,b,c){var d=a.g[c];if(5===d.status)return c=d.g,b=za(Y(a,d),b,c),Ae(a,d.i,b);d=ue(a);d.uid=a.g[c].uid;d.Ga=a.g[c].Ga;d.ya.type=128;d.mode=a.g[c].mode&438|32768;ve(a,d,c,b);return a.g.length-1}function wa(a,b,c,d,e){var f=a.g[c];if(5===f.status)return c=f.g,b=wa(Y(a,f),b,c,d,e),Ae(a,f.i,b);f=ue(a);f.Te=d;f.Ue=e;f.uid=a.g[c].uid;f.Ga=a.g[c].Ga;f.ya.type=192;f.mode=a.g[c].mode&438;ve(a,f,c,b);return a.g.length-1}
function va(a,b,c,d){var e=a.g[c];if(5===e.status)return c=e.g,b=va(Y(a,e),b,c,d),Ae(a,e.i,b);e=ue(a);e.uid=a.g[c].uid;e.Ga=a.g[c].Ga;e.ya.type=160;e.Be=d;e.mode=40960;ve(a,e,c,b);return a.g.length-1}async function Be(a,b,c,d){var e=a.g[c];if(5===e.status)return c=e.g,d=await Be(Y(a,e),b,c,d),Ae(a,e.i,d);e=za(a,b,c);b=a.g[e];c=new Uint8Array(d.length);c.set(d);await Ce(a,e,c);b.size=d.length;return e}
function sa(a,b,c){var d=a.g[b];if(5===d.status)return sa(Y(a,d),d.g,c);(d.mode&61440)==ya&&De(a,b);return!0}async function Oa(a,b){var c=a.g[b];if(5===c.status)return await Oa(Y(a,c),c.g);2===c.status&&a.j.g(c.vd);c.status==Fa&&(c.status=-1,await Ee(a,b))}
async function Ka(a,b,c,d,e){if(b==d&&c==e)return 0;var f=La(a,b,c);if(-1===f)return-2;var k=b;Z(a,k);for(var g="";0!=k;)g="/"+Fe(a,k)+g,k=Ge(a,k);if(-1!=La(a,d,e)&&(k=Ma(a,d,e),0>k))return k;g=a.g[f];var h=a.g[b];k=a.g[d];if(5===h.status||5===k.status)if(5===h.status&&h.i===k.i){if(a=await Ka(Y(a,h),h.g,c,k.g,e),0>a)return a}else{if(0===H(a,f).dc||!Z(a,f)&&1<H(a,f).Ua)return-1;{h=La(a,b,c);var l=a.g[h],n=new re(-1);Z(a,h);Object.assign(n,l);const m=a.g.length;a.g.push(n);n.dc=m;5===l.status&&a.i[l.i].g.set(l.g,
m);if(5!==l.status||0===l.g)xe(a,b,c),we(a,b,m,c);if(Z(a,h)&&5!==l.status)for(const [w,q]of n.da)"."!==w&&".."!==w&&Z(a,q)&&a.g[q].da.set("..",m);a.h[m]=a.h[h];delete a.h[h];l.da=new Map;l.Ua=0;h=m}l=H(a,f);n=await Ia(a,h,0,l.size);5===k.status?(d=Y(a,k),e=Z(a,h)?xa(d,e,k.g):za(d,e,k.g),d=H(d,e),ze(l,d),He(a,f,k.i,e)):(g.status=-1,a.i[g.i].g.delete(g.g),ze(l,g),we(a,d,f,e));await Ga(a,f,l.size);n&&n.length&&await Ja(a,f,0,n.length,n);if(Z(a,f))for(const m of Ie(a,h))if(e=await Ka(a,h,m,f,m),0>e)return e;
await Ee(a,h);a=Ma(a,b,c);if(0>a)return a}else xe(a,b,c),we(a,d,f,e),g.ya.version++;return 0}async function Ja(a,b,c,d,e){var f=a.g[b];if(5===f.status)b=f.g,await Ja(Y(a,f),b,c,d,e);else{var k=await a.Qb(b);!k||k.length<c+d?(await Ga(a,b,Math.floor(3*(c+d)/2)),f.size=c+d,k=await a.Qb(b)):f.size<c+d&&(f.size=c+d);e&&k.set(e.subarray(0,d),c);await Ce(a,b,k)}}async function Ia(a,b,c,d){const e=a.g[b];return 5===e.status?(b=e.g,await Ia(Y(a,e),b,c,d)):await Je(a,b,c,d)}
function La(a,b,c){b=a.g[b];if(5===b.status){const d=b.g;c=La(Y(a,b),d,c);return-1===c?-1:Ke(a,b.i,c)}a=b.da.get(c);return void 0===a?-1:a}function qa(a){let b=a.g.length;for(const {h:c,g:d}of a.i)b+=qa(c),b-=d.size;return b}function ra(a){let b=1048576;for(const {h:c}of a.i)b+=ra(c);return b}function oa(a){let b=a.o;for(const {h:c}of a.i)b+=oa(c);return b}function pa(a){let b=a.l;for(const {h:c}of a.i)b+=pa(c);return a.l}
function Fe(a,b){const c=a.g[Ge(a,b)];if(5===c.status)return Fe(Y(a,c),a.g[b].g);if(!c)return"";for(const [d,e]of c.da)if(e===b)return d;return""}function ua(a,b,c,d){if(Z(a,c))return-1;const e=a.g[b],f=a.g[c];if(5===e.status)return 5!==f.status||f.i!==e.i?-1:ua(Y(a,e),e.g,f.g,d);if(5===f.status)return-1;we(a,b,c,d);return 0}
function Ma(a,b,c){if("."===c||".."===c)return-1;var d=La(a,b,c);const e=a.g[d];var f=a.g[b];if(5===f.status)return b=f.g,Ma(Y(a,f),b,c);if(f=Z(a,d)){a:if(d=a.g[d],5===d.status)var k=Z(Y(a,d),d.g);else{for(k of d.da.keys())if("."!==k&&".."!==k){k=!1;break a}k=!0}f=!k}if(f)return-39;xe(a,b,c);0===e.Ua&&(e.status=Fa);return 0}async function Ee(a,b){const c=a.g[b];5===c.status?await Ee(Y(a,c),c.g):(c.size=0,delete a.h[b])}
qe.prototype.Qb=async function(a){const b=this.g[a];return this.h[a]?this.h[a]:2===b.status?await this.j.read(b.vd,0,b.size):null};async function Je(a,b,c,d){const e=a.g[b];return a.h[b]?a.h[b].subarray(c,c+d):2===e.status?await a.j.read(e.vd,c,d):null}async function Ce(a,b,c){a.h[b]=c;2===a.g[b].status&&(a.g[b].status=0,a.j.g(a.g[b].vd))}function H(a,b){b=a.g[b];return 5===b.status?H(Y(a,b),b.g):b}
async function Ga(a,b,c){var d=H(a,b),e=await Je(a,b,0,d.size);if(c!=d.size){var f=new Uint8Array(c);d.size=c;e&&f.set(e.subarray(0,Math.min(e.length,d.size)),0);await Ce(a,b,f)}}
function Le(a,b){b=b.replace("//","/");b=b.split("/");0<b.length&&0===b[b.length-1].length&&b.pop();0<b.length&&0===b[0].length&&b.shift();const c=b.length;var d=-1,e=0;let f=null;for(var k=0;k<c;k++)if(d=e,e=La(a,d,b[k]),!f&&5===a.g[d].status&&(f="/"+b.slice(k).join("/")),-1==e)return k<c-1?{id:-1,Bf:-1,name:b[k],hg:f}:{id:-1,Bf:d,name:b[k],hg:f};return{id:e,Bf:d,name:b[k],hg:f}}
function De(a,b){var c=a.g[b];if(5===c.status)De(Y(a,c),c.g);else{var d=0;for(const e of c.da.keys())d+=24+Me(e);b=a.h[b]=new Uint8Array(d);c.size=d;d=0;for(const [e,f]of c.da)c=H(a,f),d+=u(["Q","d","b","s"],[c.ya,d+13+8+1+2+Me(e),c.mode>>12,e],b,d)}}function Ha(a,b,c){a=a.h[b];if(c>=a.length)return a.length;for(b=0;;){const d=C(["Q","d"],a,{offset:b})[1];if(d>c)break;b=d}return b}function Z(a,b){b=a.g[b];return 5===b.status?Z(Y(a,b),b.g):(b.mode&61440)===ya}
function Ie(a,b){Z(a,b);b=a.g[b];if(5===b.status)return Ie(Y(a,b),b.g);a=[];for(const c of b.da.keys())"."!==c&&".."!==c&&a.push(c);return a}function Ge(a,b){Z(a,b);b=a.g[b];if(5!==b.status||0===b.g)return b.da.get("..");{const c=Ge(Y(a,b),b.g);return Ke(a,b.i,c)}}function He(a,b,c,d){const e=a.g[b];5===e.status&&a.i[e.i].g.delete(e.g);e.status=5;e.i=c;e.g=d;a.i[c].g.set(d,b)}function Ae(a,b,c){const d=ue(a),e=a.g.length;a.g.push(d);d.dc=e;He(a,e,b,c);return e}
function Ke(a,b,c){const d=a.i[b].g.get(c);return void 0===d?Ae(a,b,c):d}function Y(a,b){return a.i[b.i].h}function ye(){this.type=2;this.start=0;this.length=Infinity;this.h=-1;this.g=""}ye.prototype.Y=function(){const a=[];a[0]=this.type;a[1]=this.start;a[2]=Infinity===this.length?0:this.length;a[3]=this.h;a[4]=this.g;return a};ye.prototype.G=function(a){this.type=a[0];this.start=a[1];this.length=0===a[2]?Infinity:a[2];this.h=a[3];this.g=a[4]};function Ne(a){const b=new ye;b.G(a.Y());return b}
function Oe(a,b){return b.h===a.h&&b.g===a.g&&b.type===a.type}function Pe(a,b){return Oe(a,b)&&b.start+b.length===a.start}function Aa(a,b,c,d,e){const f=new ye;f.type=a;f.start=b;f.length=c;f.h=d;f.g=e;return f}function Ea(a,b,c){b=a.g[b];if(5===b.status){var d=b.g;return Ea(Y(a,b),d,c)}for(d of b.h)if(!(c.h===d.h&&c.g===d.g||2===c.type||2===d.type||1!==c.type&&1!==d.type||c.start+c.length<=d.start||d.start+d.length<=c.start))return Ne(d);return null}
function Ba(a,b,c,d){const e=a.g[b];if(5===e.status)return b=e.g,Ba(Y(a,e),b,c,d);c=Ne(c);if(2!==c.type&&Ea(a,b,c))return 1;for(a=0;a<e.h.length;a++){d=e.h[a];if(d.start+d.length<=c.start)continue;if(c.start+c.length<=d.start)break;if(d.h!==c.h||d.g!==c.g)continue;b=c.start+c.length;const f=c.start-d.start,k=d.start+d.length-b;if(0<f&&0<k&&d.type===c.type)return 0;0<f&&(d.length=f);if(0>=f&&0<k)d.start=b,d.length=k;else if(0<k){for(;a<e.h.length&&e.h[a].start<b;)a++;e.h.splice(a,0,Aa(d.type,b,k,d.h,
d.g))}else 0>=f&&(e.h.splice(a,1),a--)}if(2!==c.type){a=c;d=!1;for(b=0;b<e.h.length&&!(Pe(a,e.h[b])&&(e.h[b].length+=c.length,a=e.h[b],d=!0),c.start<=e.h[b].start);b++);d||(e.h.splice(b,0,a),b++);for(;b<e.h.length;b++)if(Oe(e.h[b],a)){Pe(e.h[b],a)&&(a.length+=e.h[b].length,e.h.splice(b,1));break}}return 0}function Qe(a,b){b=Le(a,b);if(-1!==b.id)return a=H(a,b.id),Array.from(a.da.keys()).filter(c=>"."!==c&&".."!==c)}
qe.prototype.xe=function(a){a=Le(this,a);if(-1===a.id)return Promise.resolve(null);const b=H(this,a.id);return Ia(this,a.id,0,b.size)};function u(a,b,c,d){for(var e,f=0,k=0;k<a.length;k++)switch(e=b[k],a[k]){case "w":c[d++]=e&255;c[d++]=e>>8&255;c[d++]=e>>16&255;c[d++]=e>>24&255;f+=4;break;case "d":c[d++]=e&255;c[d++]=e>>8&255;c[d++]=e>>16&255;c[d++]=e>>24&255;c[d++]=0;c[d++]=0;c[d++]=0;c[d++]=0;f+=8;break;case "h":c[d++]=e&255;c[d++]=e>>8;f+=2;break;case "b":c[d++]=e;f+=1;break;case "s":var g=d,h=0;c[d++]=0;c[d++]=0;f+=2;for(var l of e)Re(l.charCodeAt(0)).forEach(function(n){c[d++]=n;f+=1;h++});c[g+0]=h&255;c[g+1]=h>>8&255;break;
case "Q":u(["b","w","d"],[e.type,e.version,e.path],c,d),d+=13,f+=13}return f}
function C(a,b,c){let d=c.offset;for(var e=[],f=0;f<a.length;f++)switch(a[f]){case "w":var k=b[d++];k+=b[d++]<<8;k+=b[d++]<<16;k+=b[d++]<<24>>>0;e.push(k);break;case "d":k=b[d++];k+=b[d++]<<8;k+=b[d++]<<16;k+=b[d++]<<24>>>0;d+=4;e.push(k);break;case "h":k=b[d++];e.push(k+(b[d++]<<8));break;case "b":e.push(b[d++]);break;case "s":k=b[d++];k+=b[d++]<<8;for(var g="",h=new Se,l=0;l<k;l++){var n=h.i(b[d++]);-1!=n&&(g+=String.fromCharCode(n))}e.push(g);break;case "Q":c.offset=d,k=C(["b","w","d"],b,c),d=
c.offset,e.push({type:k[0],version:k[1],path:k[2]})}c.offset=d;return e};function Se(){this.g=new Uint8Array(5);this.h=0;this.i=function(a){this.g[this.h]=a;this.h++;switch(this.h){case 1:if(128>this.g[0])return this.h=0,this.g[0];break;case 2:if(192==(this.g[0]&224)&&128==(this.g[1]&192))return this.h=0,(this.g[0]&31)<<6|this.g[1]&63}return-1}}function Re(a){if(128>a)return[a];if(2048>a)return[192|a>>6&31,128|a&63]}function Me(a){for(var b=0,c=0;c<a.length;c++)b+=128>a.charCodeAt(c)?1:2;return b};function Te(a){function b(q){!q.altKey&&g[56]&&f(56,!1);return e(q,!1)}function c(q){!q.altKey&&g[56]&&f(56,!1);return e(q,!0)}function d(){for(var q=Object.keys(g),r,x=0;x<q.length;x++)r=+q[x],g[r]&&f(r,!1);g={}}function e(q,r){if(h.v&&(q.shiftKey&&q.ctrlKey&&(73===q.keyCode||74===q.keyCode||75===q.keyCode)||!h.Ne?0:q.target?q.target.classList.contains("phone_keyboard")||"INPUT"!==q.target.nodeName&&"TEXTAREA"!==q.target.nodeName:1)){a:{if(void 0!==q.code){var x=w[q.code];if(void 0!==x)break a}x=
l[q.keyCode]}if(x)return f(x,r,q.repeat),q.preventDefault&&q.preventDefault(),!1;console.log("Missing char in map: keyCode="+(q.keyCode||-1).toString(16)+" code="+q.code)}}function f(q,r,x){if(r)g[q]&&!x&&f(q,!1);else if(!g[q])return;(g[q]=r)||(q|=128);255<q?(k(q>>8),k(q&255)):k(q)}function k(q){h.v.send("keyboard-code",q)}var g={},h=this;this.Ne=!0;var l=new Uint16Array([0,0,0,0,0,0,0,0,14,15,0,0,0,28,0,0,42,29,56,0,58,0,0,0,0,0,0,1,0,0,0,0,57,57417,57425,57423,57415,57419,57416,57421,80,0,0,0,0,
82,83,0,11,2,3,4,5,6,7,8,9,10,0,39,0,13,0,0,0,30,48,46,32,18,33,34,35,23,36,37,38,50,49,24,25,16,19,31,20,22,47,17,45,21,44,57435,57436,57437,0,0,82,79,80,81,75,76,77,71,72,73,0,0,0,0,0,0,59,60,61,62,63,64,65,66,67,68,87,88,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,69,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,39,13,51,12,52,53,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,43,27,40,0,57435,57400,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n={8:8,10:13,32:32,39:222,
44:188,45:189,46:190,47:191,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,59:186,61:187,91:219,92:220,93:221,96:192,97:65,98:66,99:67,100:68,101:69,102:70,103:71,104:72,105:73,106:74,107:75,108:76,109:77,110:78,111:79,112:80,113:81,114:82,115:83,116:84,117:85,118:86,119:87,120:88,121:89,122:90},m={33:49,34:222,35:51,36:52,37:53,38:55,40:57,41:48,42:56,43:187,58:186,60:188,62:190,63:191,64:50,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,
81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,94:54,95:189,123:219,124:220,125:221,126:192},w={Escape:1,Digit1:2,Digit2:3,Digit3:4,Digit4:5,Digit5:6,Digit6:7,Digit7:8,Digit8:9,Digit9:10,Digit0:11,Minus:12,Equal:13,Backspace:14,Tab:15,KeyQ:16,KeyW:17,KeyE:18,KeyR:19,KeyT:20,KeyY:21,KeyU:22,KeyI:23,KeyO:24,KeyP:25,BracketLeft:26,BracketRight:27,Enter:28,ControlLeft:29,KeyA:30,KeyS:31,KeyD:32,KeyF:33,KeyG:34,KeyH:35,KeyJ:36,KeyK:37,KeyL:38,Semicolon:39,Quote:40,Backquote:41,ShiftLeft:42,
Backslash:43,KeyZ:44,KeyX:45,KeyC:46,KeyV:47,KeyB:48,KeyN:49,KeyM:50,Comma:51,Period:52,Slash:53,ShiftRight:54,NumpadMultiply:55,AltLeft:56,Space:57,CapsLock:58,F1:59,F2:60,F3:61,F4:62,F5:63,F6:64,F7:65,F8:66,F9:67,F10:68,NumLock:69,ScrollLock:70,Numpad7:71,Numpad8:72,Numpad9:73,NumpadSubtract:74,Numpad4:75,Numpad5:76,Numpad6:77,NumpadAdd:78,Numpad1:79,Numpad2:80,Numpad3:81,Numpad0:82,NumpadDecimal:83,IntlBackslash:86,F11:87,F12:88,NumpadEnter:57372,ControlRight:57373,NumpadDivide:57397,AltRight:57400,
Home:57415,ArrowUp:57416,PageUp:57417,ArrowLeft:57419,ArrowRight:57421,End:57423,ArrowDown:57424,PageDown:57425,Insert:57426,Delete:57427,OSLeft:57435,OSRight:57436,ContextMenu:57437};this.v=a;this.Ba=function(){"undefined"!==typeof window&&(window.removeEventListener("keyup",b,!1),window.removeEventListener("keydown",c,!1),window.removeEventListener("blur",d,!1))};this.jb=function(){"undefined"!==typeof window&&(this.Ba(),window.addEventListener("keyup",b,!1),window.addEventListener("keydown",c,
!1),window.addEventListener("blur",d,!1))};this.jb();this.g=function(q){q={keyCode:q};e(q,!0);e(q,!1)};this.Uj=function(q){var r=q.charCodeAt(0);r in n?this.g(n[r]):r in m?(k(42),this.g(m[r]),k(170)):console.log("ascii -> keyCode not found: ",r,q)}};function Ue(a,b){function c(v){if(!x.enabled||!x.Ne)return!1;var E=b||document.body,G;if(!(G=document.pointerLockElement))a:{for(v=v.target;v.parentNode;){if(v===E){G=!0;break a}v=v.parentNode}G=!1}return G}function d(v){c(v)&&(v=v.changedTouches)&&v.length&&(v=v[v.length-1],q=v.clientX,r=v.clientY)}function e(){if(n||w||m)x.v.send("mouse-click",[!1,!1,!1]),n=w=m=!1}function f(v){if(x.v&&c(v)){var E=0,G=0,F=v.changedTouches;F?F.length&&(F=F[F.length-1],E=F.clientX-q,G=F.clientY-r,q=F.clientX,r=F.clientY,
v.preventDefault()):"number"===typeof v.movementX?(E=v.movementX,G=v.movementY):"number"===typeof v.webkitMovementX?(E=v.webkitMovementX,G=v.webkitMovementY):"number"===typeof v.mozMovementX?(E=v.mozMovementX,G=v.mozMovementY):(E=v.clientX-q,G=v.clientY-r,q=v.clientX,r=v.clientY);x.v.send("mouse-delta",[.15*E,-(.15*G)]);b&&x.v.send("mouse-absolute",[v.pageX-b.offsetLeft,v.pageY-b.offsetTop,b.offsetWidth,b.offsetHeight])}}function k(v){c(v)&&h(v,!0)}function g(v){c(v)&&h(v,!1)}function h(v,E){x.v&&
(1===v.which?n=E:2===v.which?w=E:3===v.which&&(m=E),x.v.send("mouse-click",[n,w,m]))}function l(v){if(c(v)){var E=v.wheelDelta||-v.detail;0>E?E=-1:0<E&&(E=1);x.v.send("mouse-wheel",[E,0]);v.preventDefault()}}var n=!1,m=!1,w=!1,q=0,r=0,x=this;this.enabled=!1;this.Ne=!0;this.v=a;this.v.register("mouse-enable",function(v){this.enabled=v},this);this.Ba=function(){"undefined"!==typeof window&&(window.removeEventListener("touchstart",d,!1),window.removeEventListener("touchend",e,!1),window.removeEventListener("touchmove",
f,!1),window.removeEventListener("mousemove",f,!1),window.removeEventListener("mousedown",k,!1),window.removeEventListener("mouseup",g,!1),window.removeEventListener("DOMMouseScroll",l,!1),window.removeEventListener("mousewheel",l,{passive:!1}))};this.jb=function(){"undefined"!==typeof window&&(this.Ba(),window.addEventListener("touchstart",d,!1),window.addEventListener("touchend",e,!1),window.addEventListener("touchmove",f,!1),window.addEventListener("mousemove",f,!1),window.addEventListener("mousedown",
k,!1),window.addEventListener("mouseup",g,!1),window.addEventListener("DOMMouseScroll",l,!1),window.addEventListener("mousewheel",l,{passive:!1}))};this.jb()};function Ve(a){if("undefined"!==typeof window)if(window.AudioContext||window.webkitAudioContext){var b=window.AudioWorklet?We:Xe;this.v=a;this.T=window.AudioContext?new AudioContext:new webkitAudioContext;this.g=new Ye(a,this.T);this.h=new Ze(a,this.T,this.g);new b(a,this.T,this.g);this.h.start();a.register("emulator-stopped",function(){this.T.suspend()},this);a.register("emulator-started",function(){this.T.resume()},this);a.register("speaker-confirm-initialized",function(){a.send("speaker-has-initialized")},
this);a.send("speaker-has-initialized")}else console.warn("Web browser doesn't support Web Audio API")}
function Ye(a,b){function c(d){return function(e){d.gain.setValueAtTime(e,this.T.currentTime)}}this.T=b;this.sources=new Map;this.kg=this.jg=this.F=this.D=this.C=1;this.i=this.T.createBiquadFilter();this.j=this.T.createBiquadFilter();this.i.type="highshelf";this.j.type="highshelf";this.i.frequency.setValueAtTime(2E3,this.T.currentTime);this.j.frequency.setValueAtTime(2E3,this.T.currentTime);this.g=this.T.createBiquadFilter();this.h=this.T.createBiquadFilter();this.g.type="lowshelf";this.h.type="lowshelf";
this.g.frequency.setValueAtTime(200,this.T.currentTime);this.h.frequency.setValueAtTime(200,this.T.currentTime);this.l=this.T.createGain();this.o=this.T.createGain();this.B=this.T.createChannelMerger(2);this.H=this.i;this.I=this.j;this.i.connect(this.g);this.g.connect(this.l);this.l.connect(this.B,0,0);this.j.connect(this.h);this.h.connect(this.o);this.o.connect(this.B,0,1);this.B.connect(this.T.destination);a.register("mixer-connect",function(d){var e=d[1];d=this.sources.get(d[0]);void 0===d||d.connect(e)},
this);a.register("mixer-disconnect",function(d){var e=d[1];d=this.sources.get(d[0]);void 0===d||d.disconnect(e)},this);a.register("mixer-volume",function(d){var e=d[0],f=d[1];d=Math.pow(10,d[2]/20);e=0===e?this:this.sources.get(e);void 0===e||e.Vg(d,f)},this);a.register("mixer-gain-left",function(d){this.jg=Math.pow(10,d/20);this.update()},this);a.register("mixer-gain-right",function(d){this.kg=Math.pow(10,d/20);this.update()},this);a.register("mixer-treble-left",c(this.i),this);a.register("mixer-treble-right",
c(this.j),this);a.register("mixer-bass-left",c(this.g),this);a.register("mixer-bass-right",c(this.h),this)}function $e(a,b,c){b=new af(a.T,b,a.H,a.I);a.sources.has(c);a.sources.set(c,b);return b}Ye.prototype.Vg=function(a,b){void 0===b&&(b=2);switch(b){case 0:this.D=a;break;case 1:this.F=a;break;case 2:this.C=a;break;default:return}this.update()};
Ye.prototype.update=function(){var a=this.C*this.F*this.kg;this.l.gain.setValueAtTime(this.C*this.D*this.jg,this.T.currentTime);this.o.gain.setValueAtTime(a,this.T.currentTime)};function af(a,b,c,d){this.T=a;this.o=this.l=!0;this.D=this.B=this.j=this.g=1;this.C=a.createChannelSplitter(2);this.h=a.createGain();this.i=a.createGain();b.connect(this.C);this.C.connect(this.h,0);this.h.connect(c);this.C.connect(this.i,1);this.i.connect(d)}
af.prototype.update=function(){var a=this.o*this.g*this.j*this.D;this.h.gain.setValueAtTime(this.l*this.g*this.j*this.B,this.T.currentTime);this.i.gain.setValueAtTime(a,this.T.currentTime)};af.prototype.connect=function(a){var b=!a||2===a;if(b||0===a)this.l=!0;if(b||1===a)this.o=!0;this.update()};af.prototype.disconnect=function(a){var b=!a||2===a;if(b||0===a)this.l=!1;if(b||1===a)this.o=!1;this.update()};
af.prototype.Vg=function(a,b){void 0===b&&(b=2);switch(b){case 0:this.B=a;break;case 1:this.D=a;break;case 2:this.j=a;break;default:return}this.update()};
function Ze(a,b,c){this.Sd=b.createOscillator();this.Sd.type="square";this.Sd.frequency.setValueAtTime(440,b.currentTime);this.g=$e(c,this.Sd,1);this.g.disconnect();a.register("pcspeaker-enable",function(){var d=c.sources.get(1);void 0===d||d.connect(void 0)},this);a.register("pcspeaker-disable",function(){var d=c.sources.get(1);void 0===d||d.disconnect(void 0)},this);a.register("pcspeaker-update",function(d){var e=d[1],f=0;3===d[0]&&(f=Math.min(1193181.6665999999/e,this.Sd.frequency.maxValue),f=
Math.max(f,0));this.Sd.frequency.setValueAtTime(f,b.currentTime)},this)}Ze.prototype.start=function(){this.Sd.start()};
function We(a,b,c){this.v=a;this.T=b;this.enabled=!1;this.bb=48E3;b=function(){function e(g){if(0===g)return 1;g*=Math.PI;return Math.sin(g)/g}function f(){var g=Reflect.construct(AudioWorkletProcessor,[],f);g.D=3;g.l=Array(1024);g.C=0;g.H=0;g.o=0;g.F=g.l.length;g.B=0;g.I=k;g.g=k;g.M=1;g.j=0;g.i=0;g.h=0;g.port.onmessage=h=>{switch(h.data.type){case "queue":g.aa(h.data.value);break;case "sampling-rate":g.M=h.data.value/sampleRate}};return g}var k=[new Float32Array(256),new Float32Array(256)];Reflect.setPrototypeOf(f.prototype,
AudioWorkletProcessor.prototype);Reflect.setPrototypeOf(f,AudioWorkletProcessor);f.prototype.process=f.prototype.process=function(g,h){for(g=0;g<h[0][0].length;g++){for(var l=0,n=0,m=this.h+this.D,w=this.h-this.D+1;w<=m;w++){var q=this.j+w;l+=this.N(q,0)*this.R(this.i-w);n+=this.N(q,1)*this.R(this.i-w)}if(isNaN(l)||isNaN(n))l=n=0;h[0][0][g]=l;h[0][1][g]=n;this.i+=this.M;this.h=Math.floor(this.i)}h=this.h;h+=this.D+2;this.i-=this.h;this.j+=this.h;this.h=0;this.X(h);return!0};f.prototype.R=function(g){return e(g)*
e(g/this.D)};f.prototype.N=function(g,h){return 0>g?(g+=this.I[0].length,this.I[h][g]):this.g[h][g]};f.prototype.X=function(g){var h=this.g[0].length;h-this.j<g&&(this.Z(),this.j-=h)};f.prototype.Z=function(){this.I=this.g;this.g=this.U();var g=this.g[0].length;if(256>g){for(var h=this.C,l=0;256>g&&l<this.o;)g+=this.l[h][0].length,h=h+1&this.F-1,l++;g=Math.max(g,256);g=[new Float32Array(g),new Float32Array(g)];g[0].set(this.g[0]);g[1].set(this.g[1]);h=this.g[0].length;for(var n=0;n<l;n++){var m=this.U();
g[0].set(m[0],h);g[1].set(m[1],h);h+=m[0].length}this.g=g}this.sc()};f.prototype.sc=function(){1024>this.B/this.M&&this.port.postMessage({type:"pump"})};f.prototype.aa=function(g){this.o<this.F&&(this.l[this.H]=g,this.H=this.H+1&this.F-1,this.o++,this.B+=g[0].length,this.sc())};f.prototype.U=function(){if(!this.o)return k;var g=this.l[this.C];this.l[this.C]=null;this.C=this.C+1&this.F-1;this.o--;this.B-=g[0].length;return g};registerProcessor("dac-processor",f)}.toString();var d=URL.createObjectURL(new Blob([b.substring(b.indexOf("{")+
1,b.lastIndexOf("}"))],{type:"application/javascript"}));this.Ec=null;this.g=this.T.createGain();this.T.audioWorklet.addModule(d).then(()=>{URL.revokeObjectURL(d);this.Ec=new AudioWorkletNode(this.T,"dac-processor",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[2],parameterData:{},processorOptions:{}});this.Ec.port.postMessage({type:"sampling-rate",value:this.bb});this.Ec.port.onmessage=e=>{switch(e.data.type){case "pump":this.sc()}};this.Ec.connect(this.g)});this.h=$e(c,this.g,2);this.h.g=
3;a.register("dac-send-data",function(e){this.Ff(e)},this);a.register("dac-enable",function(){this.enabled=!0},this);a.register("dac-disable",function(){this.enabled=!1},this);a.register("dac-tell-sampling-rate",function(e){this.bb=e;this.Ec&&this.Ec.port.postMessage({type:"sampling-rate",value:e})},this)}We.prototype.Ff=function(a){this.Ec&&this.Ec.port.postMessage({type:"queue",value:a},[a[0].buffer,a[1].buffer])};We.prototype.sc=function(){this.enabled&&this.v.send("dac-request-data")};
function Xe(a,b,c){this.v=a;this.T=b;this.enabled=!1;this.bb=22050;this.g=0;this.ve=1;this.We=this.T.createBiquadFilter();this.We.type="lowpass";this.i=this.We;this.h=$e(c,this.i,2);this.h.g=3;a.register("dac-send-data",function(d){this.Ff(d)},this);a.register("dac-enable",function(){this.enabled=!0;this.sc()},this);a.register("dac-disable",function(){this.enabled=!1},this);a.register("dac-tell-sampling-rate",function(d){this.bb=d;this.ve=Math.ceil(8E3/d);this.We.frequency.setValueAtTime(d/2,this.T.currentTime)},
this)}
Xe.prototype.Ff=function(a){var b=a[0].length,c=b/this.bb;if(1<this.ve){var d=this.T.createBuffer(2,b*this.ve,this.bb*this.ve);for(var e=d.getChannelData(0),f=d.getChannelData(1),k=0,g=0;g<b;g++)for(var h=0;h<this.ve;h++,k++)e[k]=a[0][g],f[k]=a[1][g]}else d=this.T.createBuffer(2,b,this.bb),d.copyToChannel?(d.copyToChannel(a[0],0),d.copyToChannel(a[1],1)):(d.getChannelData(0).set(a[0]),d.getChannelData(1).set(a[1]));a=this.T.createBufferSource();a.buffer=d;a.connect(this.We);a.addEventListener("ended",this.sc.bind(this));
d=this.T.currentTime;if(this.g<d)for(this.g=d,d=.2-c,b=0;b<=d;)b+=c,this.g+=c,setTimeout(()=>this.sc(),1E3*b);a.start(this.g);this.g+=c;setTimeout(()=>this.sc(),0)};Xe.prototype.sc=function(){this.enabled&&(.2<this.g-this.T.currentTime||this.v.send("dac-request-data"))};function bf(a,b){function c(g){k.v&&k.enabled&&(k.h(g.which),g.preventDefault())}function d(g){var h=g.which;8===h?(k.h(127),g.preventDefault()):9===h&&(k.h(9),g.preventDefault())}function e(g){if(k.enabled){for(var h=g.clipboardData.getData("text/plain"),l=0;l<h.length;l++)k.h(h.charCodeAt(l));g.preventDefault()}}function f(g){g.target!==a&&a.blur()}var k=this;this.enabled=!0;this.v=b;this.text="";this.j=!1;this.i=0;this.v.register("serial0-output-char",function(g){this.Tj(g)},this);this.Ba=function(){a.removeEventListener("keypress",
c,!1);a.removeEventListener("keydown",d,!1);a.removeEventListener("paste",e,!1);window.removeEventListener("mousedown",f,!1)};this.jb=function(){this.Ba();a.style.display="block";a.addEventListener("keypress",c,!1);a.addEventListener("keydown",d,!1);a.addEventListener("paste",e,!1);window.addEventListener("mousedown",f,!1)};this.jb();this.Tj=function(g){"\b"===g?(this.text=this.text.slice(0,-1),this.update()):"\r"!==g&&(this.text+=g,"\n"===g&&(this.j=!0),this.update())};this.update=function(){var g=
Date.now(),h=g-this.i;16>h?void 0===this.g&&(this.g=setTimeout(()=>{this.g=void 0;this.i=Date.now();this.l()},16-h)):(void 0!==this.g&&(clearTimeout(this.g),this.g=void 0),this.i=g,this.l())};this.l=function(){a.value=this.text;this.j&&(this.j=!1,a.scrollTop=1E9)};this.h=function(g){k.v&&k.v.send("serial0-input",g)}}
function cf(a,b){this.element=a;if(window.Terminal){var c=this.g=new window.Terminal;c.setOption("logLevel","off");c.write("This is the serial console. Whatever you type or paste here will be sent to COM1");c.onData(function(d){b.send("serial0-input",d.charCodeAt(0))});b.register("serial0-output-char",function(d){c.write(d)},this)}}cf.prototype.show=function(){this.g&&this.g.open(this.element)};function df(a,b){this.v=b;this.g=void 0;this.h=[];this.url=a;this.i=Date.now()-1E4;this.v.register("net0-send",function(c){this.send(c)},this)}p=df.prototype;p.Xh=function(a){this.v&&this.v.send("net0-receive",new Uint8Array(a.data))};p.Vh=function(){this.connect();setTimeout(this.connect.bind(this),1E4)};p.Yh=function(){for(var a=0;a<this.h.length;a++)this.send(this.h[a]);this.h=[]};p.Wh=function(){};p.Ba=function(){this.g&&this.g.close()};
p.connect=function(){if("undefined"!==typeof WebSocket){if(this.g){var a=this.g.readyState;if(0===a||1===a)return}this.i+1E4>Date.now()||(this.i=Date.now(),this.g=new WebSocket(this.url),this.g.binaryType="arraybuffer",this.g.onopen=this.Yh.bind(this),this.g.onmessage=this.Xh.bind(this),this.g.onclose=this.Vh.bind(this),this.g.onerror=this.Wh.bind(this))}};p.send=function(a){this.g&&1===this.g.readyState?this.g.send(a):(this.h.push(a),128<this.h.length&&(this.h=this.h.slice(-64)),this.connect())};(function(){function a(g,h){var l=new XMLHttpRequest;l.open(h.method||"get",g,!0);l.responseType=h.Cd?"json":"arraybuffer";if(h.headers)for(var n=Object.keys(h.headers),m=0;m<n.length;m++){var w=n[m];l.setRequestHeader(w,h.headers[w])}h.Ud&&(n=h.Ud.start,l.setRequestHeader("Range","bytes="+n+"-"+(n+h.Ud.length-1)),l.onreadystatechange=function(){200===l.status&&l.abort()});l.onload=function(){4===l.readyState&&(200!==l.status&&206!==l.status?console.error("Loading the image `"+g+"` failed (status %d)",
l.status):l.response&&h.done&&h.done(l.response,l))};h.progress&&(l.onprogress=function(q){h.progress(q)});l.send(null)}function b(g,h){let l=require("fs");h.Ud?l.open(g,"r",(n,m)=>{if(n)throw n;n=h.Ud.length;var w=Buffer.allocUnsafe(n);l.read(m,w,0,n,h.Ud.start,q=>{if(q)throw q;h.done&&h.done(new Uint8Array(w));l.close(m,r=>{if(r)throw r;})})}):l.readFile(g,{encoding:h.Cd?"utf-8":null},function(n,m){n?console.log("Could not read file:",g,n):(n=m,h.Cd?n=JSON.parse(n):n=(new Uint8Array(n)).buffer,
h.done(n))})}function c(g,h){this.filename=g;this.g=256;this.byteLength=h;this.h=Object.create(null);this.onload=void 0}function d(g,h){const l=g.match(/(.*)(\..*)/);l?(this.i=l[1],this.j=l[2]):(this.i=g,this.j="");this.g=256;this.byteLength=h;this.h=Object.create(null);this.onload=void 0}function e(g){this.g=g;this.byteLength=g.size;1073741824<g.size&&console.warn("SyncFileBuffer: Allocating buffer of "+(g.size>>20)+" MB ...");this.buffer=new ArrayBuffer(g.size);this.onload=void 0}function f(g){this.i=
g;this.byteLength=g.size;this.g=256;this.h=Object.create(null);this.onload=void 0}"undefined"===typeof XMLHttpRequest?qb=b:qb=a;rb=c;sb=d;tb=f;Za=e;ub=function(g,h,l){return String.fromCharCode(...new Uint8Array(g.buffer,h>>>0,l>>>0))};var k="undefined"===typeof XMLHttpRequest?function(g,h){require("fs").stat(g,(l,n)=>{l?h(l):h(null,n.size)})}:function(g,h){qb(g,{done:(l,n)=>{l=n.getResponseHeader("Content-Range")||"";(n=l.match(/\/(\d+)\s*$/))?h(null,+n[1]):h("`Range: bytes=...` header not supported (Got `"+
l+"`)")},headers:{Range:"bytes=0-0"}})};c.prototype.load=function(){void 0!==this.byteLength?this.onload&&this.onload(Object.create(null)):k(this.filename,(g,h)=>{if(g)throw Error("Cannot use: "+this.filename+". "+g);this.byteLength=h;this.onload&&this.onload(Object.create(null))})};c.prototype.i=function(g,h){var l=h/this.g;g/=this.g;for(var n=0;n<l;n++)if(!this.h[g+n])return;if(1===l)return this.h[g];h=new Uint8Array(h);for(n=0;n<l;n++)h.set(this.h[g+n],n*this.g);return h};c.prototype.get=function(g,
h,l){console.assert(g+h<=this.byteLength);console.assert(0===g%this.g);console.assert(0===h%this.g);console.assert(h);var n=this.i(g,h,l);n?l(n):qb(this.filename,{done:function(m){m=new Uint8Array(m);this.j(g,h,m);l(m)}.bind(this),Ud:{start:g,length:h}})};c.prototype.set=function(g,h,l){console.assert(g+h.byteLength<=this.byteLength);var n=h.length;console.assert(0===g%this.g);console.assert(0===n%this.g);console.assert(n);g/=this.g;n/=this.g;for(var m=0;m<n;m++){var w=this.h[g+m];void 0===w&&(w=
this.h[g+m]=new Uint8Array(this.g));var q=h.subarray(m*this.g,(m+1)*this.g);w.set(q);console.assert(w.byteLength===q.length)}l()};c.prototype.j=function(g,h,l){g/=this.g;h/=this.g;for(var n=0;n<h;n++){var m=this.h[g+n];m&&l.set(m,n*this.g)}};c.prototype.Qb=function(g){g()};c.prototype.Y=function(){const g=[],h=[];for(let [l,n]of Object.entries(this.h))h.push([+l,n]);g[0]=h;return g};c.prototype.G=function(g){g=g[0];this.h=Object.create(null);for(let [h,l]of Object.values(g))this.h[h]=l};d.prototype.load=
function(){this.onload&&this.onload(Object.create(null))};d.prototype.l=c.prototype.i;d.prototype.get=function(g,h,l){console.assert(g+h<=this.byteLength);console.assert(0===g%this.g);console.assert(0===h%this.g);console.assert(h);var n=this.l(g,h,l);n?l(n):qb(this.i+"-"+g+"-"+(g+h)+this.j,{done:function(m){m=new Uint8Array(m);this.o(g,h,m);l(m)}.bind(this)})};d.prototype.set=c.prototype.set;d.prototype.o=c.prototype.j;d.prototype.Y=c.prototype.Y;d.prototype.G=c.prototype.G;e.prototype.load=function(){this.h(0)};
e.prototype.h=function(g){var h=new FileReader;h.onload=function(l){l=new Uint8Array(l.target.result);(new Uint8Array(this.buffer,g)).set(l);this.h(g+4194304)}.bind(this);g<this.byteLength?h.readAsArrayBuffer(this.g.slice(g,Math.min(g+4194304,this.byteLength))):(this.g=void 0,this.onload&&this.onload({buffer:this.buffer}))};e.prototype.get=function(g,h,l){console.assert(g+h<=this.byteLength);l(new Uint8Array(this.buffer,g,h))};e.prototype.set=function(g,h,l){console.assert(g+h.byteLength<=this.byteLength);
(new Uint8Array(this.buffer,g,h.byteLength)).set(h);l()};e.prototype.Qb=function(g){g(this.buffer)};e.prototype.Y=function(){const g=[];g[0]=this.byteLength;g[1]=new Uint8Array(this.buffer);return g};e.prototype.G=function(g){this.byteLength=g[0];this.buffer=g[1].slice().buffer};f.prototype.load=function(){this.onload&&this.onload(Object.create(null))};f.prototype.get=function(g,h,l){console.assert(0===g%this.g);console.assert(0===h%this.g);console.assert(h);var n=this.j(g,h,l);n?l(n):(n=new FileReader,
n.onload=function(m){m=new Uint8Array(m.target.result);this.l(g,h,m);l(m)}.bind(this),n.readAsArrayBuffer(this.i.slice(g,g+h)))};f.prototype.j=c.prototype.i;f.prototype.set=c.prototype.set;f.prototype.l=c.prototype.j;f.prototype.Y=c.prototype.Y;f.prototype.Qb=function(g){g()};f.prototype.lg=function(g){for(var h=[],l=Object.keys(this.h).map(Number).sort(function(r,x){return r-x}),n=0,m=0;m<l.length;m++){var w=l[m],q=this.h[w];w*=this.g;console.assert(w>=n);w!==n&&(h.push(this.i.slice(n,w)),n=w);h.push(q);
n+=q.length}n!==this.i.size&&h.push(this.i.slice(n));g=new File(h,g);console.assert(g.size===this.i.size);return g}})();function Ra(a){this.fe=!1;const b=Ud();this.v=b[0];this.Nd=b[1];var c,d;const e=new WebAssembly.Table({element:"anyfunc",initial:1924}),f={cpu_exception_hook:h=>this.cpu_exception_hook&&this.cpu_exception_hook(h),hlt_op:function(){var h=c;h.C[0]?h.lb(0):(0===(h.rb()&512)&&h.v.send("cpu-event-halt"),h.F[0]=1,gb(h))},abort:function(){},logop:function(){return c.debug.ei()},microtick:hb,get_rand_int:function(){return xb()},pic_acknowledge:function(){fe(c)},io_port_read8:function(h){h=c.A.ports[h];return h.ab.call(h.ka)},
io_port_read16:function(h){h=c.A.ports[h];return h.Ja.call(h.ka)},io_port_read32:function(h){h=c.A.ports[h];return h.we.call(h.ka)},io_port_write8:function(h,l){h=c.A.ports[h];h.Ge.call(h.ka,l)},io_port_write16:function(h,l){h=c.A.ports[h];h.Fe.call(h.ka,l)},io_port_write32:function(h,l){h=c.A.ports[h];h.Oc.call(h.ka,l)},mmap_read8:function(h){return c.U[h>>>17](h)},mmap_read16:function(h){var l=c.U[h>>>17];return l(h)|l(h+1|0)<<8},mmap_read32:function(h){return c.fc[h>>>17](h)},mmap_write8:function(h,
l){c.Z[h>>>17](h,l)},mmap_write16:function(h,l){var n=c.Z[h>>>17];n(h,l&255);n(h+1|0,l>>8&255)},mmap_write32:function(h,l){c.X[h>>>17](h,l)},mmap_write64:function(h,l,n){var m=c.X[h>>>17];m(h,l);m(h+4,n)},mmap_write128:function(h,l,n,m,w){var q=c.X[h>>>17];q(h,l);q(h+4,n);q(h+8,m);q(h+12,w)},cpuid:function(){var h=c,l=0,n=0,m=0,w=0;switch(h.g[0]){case 0:l=22;w=1970169159;m=1231384169;n=1818588270;break;case 1:l=3939;w=67584;n=-1065353216;m=125872441;h.ia[0]&&(m|=512);break;case 2:l=1717260289;n=w=
0;m=8024064;break;case 4:switch(h.g[1]){case 0:l=289;w=29360191;n=63;m=1;break;case 1:l=290;w=29360191;n=63;m=1;break;case 2:l=323,w=96469055,n=4095,m=1}break;case 5:w=l=64;n=3;m=1319200;break;case 7:l=0;w=512;m=n=0;break;case -2147483648:l=5;break;case 1073741824:w=1635208534;n=1297507698;m=1701994871;break;case 21:w=l=1;n=1E9;break;case 22:w=l=1E3,n=10}h.g[0]=l;h.g[1]=n;h.g[2]=m;h.g[3]=w},load_ldt:function(){return c.tg.apply(c,arguments)},load_tr:function(){return c.di.apply(c,arguments)},log_from_wasm:function(h,
l){ub(d,h,l)},console_log_from_wasm:function(h,l){h=ub(d,h,l);console.error(h)},dbg_trace_from_wasm:function(){},codegen_finalize:(h,l,n,m,w)=>{ee(c,h,l,n,m,w)},jit_clear_func:h=>{c.xa.lf.set(h+1024,null)},jit_clear_all_funcs:()=>{{const h=c.xa.lf;for(let l=0;900>l;l++)h.set(1024+l,null)}},do_task_switch:(h,l,n)=>{var m=c,w=ge(m,h),q=3>=w.type,r=2===(w.type&2);if(!w.qe||w.dd||!w.sf)throw m.debug.ua("#GP handler");if(11===(w.Wb&31))throw m.debug.ua("#GP handler");if(!w.ed)throw m.debug.ua("#NP handler");
if(103>w.Zc)throw m.debug.ua("#NP handler");var x=m.j[6],v=m.eh();r&&(v&=-16385);if(m.vh(x,102)){m.i(x+32,m.fh());m.i(x+36,v);m.i(x+40,m.g[0]);m.i(x+44,m.g[1]);m.i(x+48,m.g[2]);m.i(x+52,m.g[3]);m.i(x+56,m.g[4]);m.i(x+60,m.g[5]);m.i(x+64,m.g[6]);m.i(x+68,m.g[7]);m.i(x+72,m.h[0]);m.i(x+76,m.h[1]);m.i(x+80,m.h[2]);m.i(x+84,m.h[3]);m.i(x+88,m.h[4]);m.i(x+92,m.h[5]);m.Ge(w.Ce+5|0,m.ab(w.Ce+5|0)|2);r=w.Sc;m.mh(r+0,m.h[6]);v=m.l(r+28);m.flags[0]&=-131073;var E=m.l(r+32),G=m.H(r+76),F=ge(m,G);if(F.dd)throw m.debug.ua("#TS handler");
if(!F.qe)throw m.debug.ua("#TS handler");if(F.Qd)throw m.debug.ua("#TS handler");if(!F.pe)throw m.debug.ua("#TS handler");if(F.Le&&F.Xc>F.df)throw m.debug.ua("#TS handler");if(!F.Le&&F.Xc!==F.df)throw m.debug.ua("#TS handler");if(!F.ed)throw m.debug.ua("#TS handler");m.D[1]=0;m.o[1]=F.Zc;m.j[1]=F.Sc;m.h[1]=G;m.C=F.Xc;m.sb[0]=-1;ce(m,F.size);G=m.l(r+36);m.i(x+0,h);G|=16384;if(G&131072)throw m.debug.ua("task switch to VM mode");m.th(G);m.flags[0]|=16384;x=m.H(r+96);m.tg(x);m.g[0]=m.l(r+40);m.g[1]=m.l(r+
44);m.g[2]=m.l(r+48);m.g[3]=m.l(r+52);m.g[4]=m.l(r+56);m.g[5]=m.l(r+60);m.g[6]=m.l(r+64);m.g[7]=m.l(r+68);Yd(m,0,m.H(r+72))&&Yd(m,2,m.H(r+80))&&Yd(m,3,m.H(r+84))&&Yd(m,4,m.H(r+88))&&Yd(m,5,m.H(r+92));m.I[0]=m.Gb()+E|0;m.j[6]=w.Sc;m.o[6]=w.Zc;m.h[6]=h;m.ra[3]=v;m.fk();m.ra[0]|=8;!1!==l&&(q?m.kh(n&65535):m.lh(n))}},__indirect_function_table:e};let k="v86.wasm",g="v86-fallback.wasm";a.wasm_path?k=a.wasm_path:"undefined"===typeof window&&"string"===typeof __dirname?(k=__dirname+"/"+k,g=__dirname+"/"+
g):(k="build/"+k,g="build/"+g);qb(k,{done:h=>{WebAssembly.instantiate(h,{env:f}).then(({instance:l})=>{l=l.exports;d=l.memory;l.rust_init();l=this.g=new db(this.Nd,{exports:l,lf:e});c=l.s;ef(this,l,a)},()=>{qb(g,{done:l=>{WebAssembly.instantiate(l,{env:f}).then(({instance:n})=>{n=n.exports;d=n.memory;n.rust_init();n=this.g=new db(this.Nd,{exports:n,lf:e});c=n.s;ef(this,n,a)})}})})},progress:h=>{this.Nd.send("download-progress",{me:0,le:1,ne:k,lengthComputable:h.lengthComputable,total:h.total,loaded:h.loaded})}})}
async function ef(a,b,c){function d(q,r){switch(q){case "hda":k.V=this.Zb.hda=r;break;case "hdb":k.Pe=this.Zb.hdb=r;break;case "cdrom":k.qa=this.Zb.cdrom=r;break;case "fda":k.sa=this.Zb.fda=r;break;case "fdb":k.dg=this.Zb.fdb=r;break;case "multiboot":k.Rd=this.Zb.multiboot=r.buffer;break;case "bzimage":k.xc=this.Zb.bzimage=r.buffer;break;case "initrd":k.Od=this.Zb.initrd=r.buffer;break;case "bios":k.Ed=r.buffer;break;case "vga_bios":k.ck=r.buffer;break;case "initial_state":k.bd=r.buffer;break;case "fs9p_json":k.ig=
r}}function e(q,r){if(r)if(r.get&&r.set&&r.load)g.push({name:q,gd:r});else{r={buffer:r.buffer,async:r.async,url:r.url,size:r.size,wa:r.wa};if("bios"===q||"vga_bios"===q||"initial_state"===q||"multiboot"===q||"bzimage"===q||"initrd"===q)r.async=!1;r.buffer instanceof ArrayBuffer?(r=new yb(r.buffer),g.push({name:q,gd:r})):"undefined"!==typeof File&&r.buffer instanceof File?(void 0===r.async&&(r.async=268435456<=r.buffer.size),r=r.async?new tb(r.buffer):new Za(r.buffer),g.push({name:q,gd:r})):r.url&&
(r.async?(r=r.wa?new sb(r.url,r.size):new rb(r.url,r.size),g.push({name:q,gd:r})):g.push({name:q,url:r.url,size:r.size}))}}function f(){function q(){this.Yd&&this.Yd.show&&this.Yd.show();this.v.send("cpu-init",k);k.bd&&(b.Wd(k.bd),k.bd=void 0);c.autostart&&this.v.send("cpu-run");this.Nd.send("emulator-loaded")}if(k.Pb&&k.ig)if(k.bd||se(k.Pb,k.ig),c.bzimage_initrd_from_filesystem){const {xc:r,Od:x}=ff(k.Pb);Promise.all([k.Pb.xe(x),k.Pb.xe(r)]).then(([v,E])=>{d.call(this,"initrd",new yb(v.buffer));
d.call(this,"bzimage",new yb(E.buffer));q.call(this)})}else q.call(this);else console.assert(!c.bzimage_initrd_from_filesystem,"bzimage_initrd_from_filesystem: Requires a filesystem"),q.call(this)}a.v.register("emulator-stopped",function(){this.fe=!1},a);a.v.register("emulator-started",function(){this.fe=!0},a);var k={};a.Zb={fda:void 0,fdb:void 0,hda:void 0,hdb:void 0,cdrom:void 0};k.fb=c.acpi;k.ci=!0;k.Kk=c.log_level;k.K=c.memory_size||67108864;k.na=c.vga_memory_size||8388608;k.Tc=c.boot_order||
531;k.Sh=c.fastboot||!1;k.sa=void 0;k.dg=void 0;k.yd=c.uart1;k.hf=c.uart2;k.jf=c.uart3;k.ee=c.cmdline;k.rc=c.preserve_mac_from_state_image;c.network_adapter?a.l=c.network_adapter(a.v):c.network_relay_url&&(a.l=new df(c.network_relay_url,a.v));k.Qh=!0;c.disable_keyboard||(a.j=new Te(a.v));c.disable_mouse||(a.i=new Ue(a.v,c.screen_container));c.screen_container?a.h=new Pa(c.screen_container,a.v):c.screen_dummy&&(a.h=new gf(a.v));c.serial_container&&(a.Yd=new bf(c.serial_container,a.v));c.serial_container_xtermjs&&
(a.Yd=new cf(c.serial_container_xtermjs,a.v));c.disable_speaker||new Ve(a.v);var g=[];c.state&&console.warn("Warning: Unknown option 'state'. Did you mean 'initial_state'?");for(var h="bios vga_bios cdrom hda hdb fda fdb initial_state multiboot bzimage initrd".split(" "),l=0;l<h.length;l++)e(h[l],c[h[l]]);if(c.filesystem){h=c.filesystem.basefs;l=c.filesystem.baseurl;let q=new hf;l&&(q=new jf(q,l));k.Pb=a.Pb=new qe(q);if(h){console.assert(l,"Filesystem: baseurl must be specified");if("object"===typeof h){var n=
h.size;h=h.url}g.push({name:"fs9p_json",url:h,size:n,Cd:!0})}}var m=g.length,w=function(q){if(q===m)setTimeout(f.bind(this),0);else{var r=g[q];r.gd?(r.gd.onload=function(){d.call(this,r.name,r.gd);w(q+1)}.bind(this),r.gd.load()):qb(r.url,{done:function(x){d.call(this,r.name,r.Cd?x:new yb(x));w(q+1)}.bind(this),progress:function(x){200===x.target.status?a.Nd.send("download-progress",{me:q,le:m,ne:r.url,lengthComputable:x.lengthComputable,total:x.total||r.size,loaded:x.loaded}):a.Nd.send("download-error",
{me:q,le:m,ne:r.url,request:x.target})},Cd:r.Cd})}}.bind(a);w(0)}function ff(a){const b=(Qe(a,"/")||[]).map(e=>"/"+e);a=(Qe(a,"/boot/")||[]).map(e=>"/boot/"+e);let c,d;for(let e of[].concat(b,a)){const f=/old/i.test(e)||/fallback/i.test(e),k=/initrd/i.test(e)||/initramfs/i.test(e);!/vmlinuz/i.test(e)&&!/bzimage/i.test(e)||d&&f||(d=e);!k||c&&f||(c=e)}c&&d||(console.log("Failed to find bzimage or initrd in filesystem. Files:"),console.log(b.join(" ")),console.log(a.join(" ")));return{Od:c,xc:d}}p=Ra.prototype;
p.ef=function(){this.v.send("cpu-run")};p.stop=function(){this.v.send("cpu-stop")};p.Ba=function(){this.stop();this.g.Ba();this.j&&this.j.Ba();this.l&&this.l.Ba();this.i&&this.i.Ba();this.h&&this.h.Ba();this.Yd&&this.Yd.Ba()};p.Gf=function(){this.v.send("cpu-restart")};function Sa(a,b,c){a.v.register(b,c,a)}p.Wd=function(a){this.g.Wd(a)};p.ye=function(a){setTimeout(function(){try{a(null,this.g.ye())}catch(b){a(b,null)}}.bind(this),0)};
function Ua(a,b){for(var c=0;c<b.length;c++)a.v.send("keyboard-code",b[c])}function Qa(a,b){for(var c=0;c<b.length;c++)a.j.Uj(b[c])}function Ya(){var a=document.body,b=a.requestPointerLock||a.mozRequestPointerLock||a.webkitRequestPointerLock;b&&b.call(a)}function $a(a,b,c){var d=d||function(){};if(a=a.Pb){var e=b.split("/");e=e[e.length-1];b=Le(a,b).Bf;""!==e&&-1!==b?Be(a,e,b,c).then(()=>d(null)):setTimeout(function(){d(new kf)},0)}}
p.xe=function(a,b){var c=this.Pb;c&&c.xe(a).then(d=>{d?b(null,d):b(new kf,null)})};function kf(){this.message="File not found"}kf.prototype=Error.prototype;"undefined"!==typeof window?(window.V86Starter=Ra,window.V86=Ra):"undefined"!==typeof module&&"undefined"!==typeof module.exports?(module.exports.V86Starter=Ra,module.exports.V86=Ra):"function"===typeof importScripts&&(self.V86Starter=Ra,self.V86=Ra);function gf(a){var b,c,d,e,f,k,g;this.v=a;a.register("screen-set-mode",function(h){this.Jf(h)},this);a.register("screen-fill-buffer-end",function(h){this.Pf(h[0])},this);a.register("screen-put-char",function(h){this.Df(h[0],h[1],h[2],h[3],h[4])},this);a.register("screen-text-scroll",function(h){console.log("scroll",h)},this);a.register("screen-update-cursor",function(h){this.zd(h[0],h[1])},this);a.register("screen-update-cursor-scanline",function(h){this.Ad(h[0],h[1])},this);a.register("screen-set-size-text",
function(h){this.ud(h[0],h[1])},this);a.register("screen-set-size-graphical",function(h){this.td(h[0],h[1])},this);this.Df=function(h,l,n,m,w){h<g&&l<k&&(h=3*(h*k+l),f[h]=n,f[h+1]=m,f[h+2]=w)};this.Ba=function(){};this.Jf=function(){};this.Xf=function(){};this.ud=function(h,l){if(h!==k||l!==g)f=new Int32Array(h*l*3),k=h,g=l};this.td=function(h,l){b=new Uint8Array(4*h*l);c=new Int32Array(b.buffer);this.v.send("screen-tell-buffer",[c],[c.buffer])};this.Kf=function(){};this.Ad=function(){};this.zd=function(h,
l){if(h!==d||l!==e)d=h,e=l};this.Pf=function(){}};const Ta={Wj:function(a){return Ta.Kj(a)+Ta.Jj(a)},Kj:function(a){let b="";var c="COMPILE COMPILE_SKIPPED_NO_NEW_ENTRY_POINTS COMPILE_SUCCESS COMPILE_WRONG_ADDRESS_SPACE COMPILE_CUT_OFF_AT_END_OF_PAGE COMPILE_WITH_LOOP_SAFETY COMPILE_PAGE COMPILE_PAGE/COMPILE_SUCCESS COMPILE_PAGE_SKIPPED_NO_NEW_ENTRY_POINTS COMPILE_BASIC_BLOCK COMPILE_DUPLICATED_BASIC_BLOCK COMPILE_WASM_BLOCK COMPILE_WASM_LOOP COMPILE_DISPATCHER COMPILE_ENTRY_POINT COMPILE_WASM_TOTAL_BYTES COMPILE_WASM_TOTAL_BYTES/COMPILE_PAGE JIT_CACHE_OVERRIDE JIT_CACHE_OVERRIDE_DIFFERENT_STATE_FLAGS RUN_INTERPRETED RUN_INTERPRETED_PENDING RUN_INTERPRETED_NEAR_END_OF_PAGE RUN_INTERPRETED_DIFFERENT_STATE RUN_INTERPRETED_MISSED_COMPILED_ENTRY_RUN_INTERPRETED RUN_INTERPRETED_MISSED_COMPILED_ENTRY_LOOKUP RUN_INTERPRETED_STEPS RUN_FROM_CACHE RUN_FROM_CACHE_STEPS RUN_FROM_CACHE_STEPS/RUN_FROM_CACHE RUN_FROM_CACHE_STEPS/RUN_INTERPRETED_STEPS DIRECT_EXIT INDIRECT_JUMP INDIRECT_JUMP_NO_ENTRY NORMAL_PAGE_CHANGE NORMAL_FALLTHRU NORMAL_FALLTHRU_WITH_TARGET_BLOCK NORMAL_BRANCH NORMAL_BRANCH_WITH_TARGET_BLOCK CONDITIONAL_JUMP CONDITIONAL_JUMP_PAGE_CHANGE CONDITIONAL_JUMP_EXIT CONDITIONAL_JUMP_FALLTHRU CONDITIONAL_JUMP_FALLTHRU_WITH_TARGET_BLOCK CONDITIONAL_JUMP_BRANCH CONDITIONAL_JUMP_BRANCH_WITH_TARGET_BLOCK DISPATCHER_SMALL DISPATCHER_LARGE LOOP LOOP_SAFETY CONDITION_OPTIMISED CONDITION_UNOPTIMISED FAILED_PAGE_CHANGE SAFE_READ_FAST SAFE_READ_SLOW_PAGE_CROSSED SAFE_READ_SLOW_NOT_VALID SAFE_READ_SLOW_NOT_USER SAFE_READ_SLOW_IN_MAPPED_RANGE SAFE_WRITE_FAST SAFE_WRITE_SLOW_PAGE_CROSSED SAFE_WRITE_SLOW_NOT_VALID SAFE_WRITE_SLOW_NOT_USER SAFE_WRITE_SLOW_IN_MAPPED_RANGE SAFE_WRITE_SLOW_READ_ONLY SAFE_WRITE_SLOW_HAS_CODE SAFE_READ_WRITE_FAST SAFE_READ_WRITE_SLOW_PAGE_CROSSED SAFE_READ_WRITE_SLOW_NOT_VALID SAFE_READ_WRITE_SLOW_NOT_USER SAFE_READ_WRITE_SLOW_IN_MAPPED_RANGE SAFE_READ_WRITE_SLOW_READ_ONLY SAFE_READ_WRITE_SLOW_HAS_CODE PAGE_FAULT TLB_MISS DO_RUN DO_MANY_CYCLES CYCLE_INTERNAL INVALIDATE_ALL_MODULES_NO_FREE_WASM_INDICES INVALIDATE_MODULE_WRITTEN_WHILE_COMPILED INVALIDATE_MODULE_UNUSED_AFTER_OVERWRITE INVALIDATE_MODULE_DIRTY_PAGE INVALIDATE_PAGE_HAD_CODE INVALIDATE_PAGE_HAD_ENTRY_POINTS DIRTY_PAGE_DID_NOT_HAVE_CODE RUN_FROM_CACHE_EXIT_SAME_PAGE RUN_FROM_CACHE_EXIT_NEAR_END_OF_PAGE RUN_FROM_CACHE_EXIT_DIFFERENT_PAGE CLEAR_TLB FULL_CLEAR_TLB TLB_FULL TLB_GLOBAL_FULL MODRM_SIMPLE_REG MODRM_SIMPLE_REG_WITH_OFFSET MODRM_SIMPLE_CONST_OFFSET MODRM_COMPLEX SEG_OFFSET_OPTIMISED SEG_OFFSET_NOT_OPTIMISED".split(" "),
d=0;const e={};for(let k=0;k<c.length;k++){const g=c[k];var f=void 0;if(g.includes("/")){d++;const [h,l]=g.split("/");f=e[h]/e[l]}else f=e[g]=a.xa.exports.profiler_stat_get(k-d),f=1E8<=f?Math.round(f/1E6)+"m":1E5<=f?Math.round(f/1E3)+"k":f;b+=g+"="+f+"\n"}b+="\n";c=a.xa.exports.get_valid_tlb_entries_count();d=a.xa.exports.get_valid_global_tlb_entries_count();b=b+("TLB_ENTRIES="+c+" ("+d+" global, "+(c-d)+" non-global)\nWASM_TABLE_FREE=")+(a.xa.exports.jit_get_wasm_table_index_free_list_count()+"\n");
b+="JIT_CACHE_SIZE="+a.xa.exports.jit_get_cache_size()+"\n";b+="FLAT_SEGMENTS="+a.xa.exports.has_flat_segmentation()+"\n";b=b+("do_many_cycles avg: "+(0/0||0)+"\nwasm memory size: ")+((a.uc.buffer.byteLength>>20)+"m\n");b=b+"Config:\nMAX_PAGES="+(a.xa.exports.get_config(0)+"\n");b+="JIT_USE_LOOP_SAFETY="+a.xa.exports.get_config(1)+"\n";return b+="MAX_EXTRA_BASIC_BLOCKS="+a.xa.exports.get_config(2)+"\n"},Jj:function(a){return[Ta.ue(a,!1,!1,!1,!1),Ta.ue(a,!0,!1,!1,!1),Ta.ue(a,!1,!0,!1,!1),Ta.ue(a,!1,
!1,!0,!1),Ta.ue(a,!1,!1,!1,!0)].join("\n\n")},ue:function(a,b,c,d,e){let f="";var k=[],g=b?"compiled":c?"jit exit":d?"unguarded register":e?"wasm size":"executed";for(let n=0;256>n;n++)for(let m=0;8>m;m++)for(let w of[!1,!0]){var h=a.xa.exports.get_opstats_buffer(b,c,d,e,n,!1,w,m);k.push({Xe:n,count:h,qg:w,gg:m});h=a.xa.exports.get_opstats_buffer(b,c,d,e,n,!0,w,m);k.push({Xe:3840|n,count:h,qg:w,gg:m})}a=0;b=new Set([38,46,54,62,100,101,102,103,240,242,243]);for(let {count:n,Xe:m}of k)b.has(m)||(a+=
n);if(0===a)return"";c=new Uint32Array(256);b=new Uint32Array(256);for(let {Xe:n,count:m}of k)3840==(n&65280)?b[n&255]+=m:c[n&255]+=m;f=f+"------------------\nTotal: "+(a+"\n");const l=1E7<a?1E3:1;d=Math.max.apply(Math,k.map(({count:n})=>Math.round(n/l)));d=String(d).length;f+=`Instruction counts ${g} (in ${l}):\n`;for(e=0;256>e;e++)f+=wb(e,2).slice(2)+":"+vb(Math.round(c[e]/l),d),f=15==e%16?f+"\n":f+" ";f=f+"\n"+`Instruction counts ${g} (0f, in ${l}):\n`;for(g=0;256>g;g++)f+=wb(g&255,2).slice(2)+
":"+vb(Math.round(b[g]/l),d),f=15==g%16?f+"\n":f+" ";f+="\n";k=k.filter(({count:n})=>n).sort(({count:n},{count:m})=>m-n);for(let {Xe:n,qg:m,gg:w,count:q}of k.slice(0,200))f+=n.toString(16)+"_"+w+(m?"_m":"_r")+":"+(q/a*100).toFixed(2)+" ";return f+"\n"}};"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports.print_stats=Ta);function hf(){this.h=new Map}hf.prototype.read=async function(a,b,c){return(a=this.h.get(a))?a.subarray(b,b+c):null};hf.prototype.cache=async function(a,b){this.h.set(a,b)};hf.prototype.g=function(a){this.h.delete(a)};function jf(a,b){this.h=a;this.i=b}function lf(a,b){return new Promise(c=>{qb(a.i+b,{done:d=>{const e=new Uint8Array(d);a.cache(b,e).then(()=>c(e))}})})}jf.prototype.read=async function(a,b,c){const d=await this.h.read(a,b,c);return d?d:(await lf(this,a)).subarray(b,b+c)};
jf.prototype.cache=async function(a,b){return await this.h.cache(a,b)};jf.prototype.g=function(a){this.h.g(a)};"undefined"!==typeof window?(window.MemoryFileStorage=hf,window.ServerFileStorageWrapper=jf):"undefined"!==typeof module&&"undefined"!==typeof module.exports?(module.exports.MemoryFileStorage=hf,module.exports.ServerFileStorageWrapper=jf):"function"===typeof importScripts&&(self.MemoryFileStorage=hf,self.ServerFileStorageWrapper=jf);
